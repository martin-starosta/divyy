/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze/route";
exports.ids = ["app/api/analyze/route"];
exports.modules = {

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fmartinstarosta%2FDevelopment%2Fvibes%2Fdivyy%2Fapps%2Fweb%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmartinstarosta%2FDevelopment%2Fvibes%2Fdivyy%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fmartinstarosta%2FDevelopment%2Fvibes%2Fdivyy%2Fapps%2Fweb%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmartinstarosta%2FDevelopment%2Fvibes%2Fdivyy%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/../../node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/../../node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/../../node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/../../node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/../../node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/../../node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/../../node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/../../node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/../../node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/../../node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/../../node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/../../node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_martinstarosta_Development_vibes_divyy_apps_web_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/analyze/route.ts */ \"(rsc)/./src/app/api/analyze/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze/route\",\n        pathname: \"/api/analyze\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/Users/martinstarosta/Development/vibes/divyy/apps/web/src/app/api/analyze/route.ts\",\n    nextConfigOutput,\n    userland: _Users_martinstarosta_Development_vibes_divyy_apps_web_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/analyze/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyL2luZGV4LmpzP25hbWU9YXBwJTJGYXBpJTJGYW5hbHl6ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYW5hbHl6ZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFuYWx5emUlMkZyb3V0ZS50cyZhcHBEaXI9JTJGVXNlcnMlMkZtYXJ0aW5zdGFyb3N0YSUyRkRldmVsb3BtZW50JTJGdmliZXMlMkZkaXZ5eSUyRmFwcHMlMkZ3ZWIlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWFydGluc3Rhcm9zdGElMkZEZXZlbG9wbWVudCUyRnZpYmVzJTJGZGl2eXklMkZhcHBzJTJGd2ViJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEJmlzR2xvYmFsTm90Rm91bmRFbmFibGVkPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZDtBQUNTO0FBQ087QUFDSztBQUNtQztBQUNqRDtBQUNPO0FBQ2Y7QUFDc0M7QUFDekI7QUFDTTtBQUNDO0FBQ2hCO0FBQzhDO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELHdCQUF3QixNQUF1QztBQUMv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NkMsMEZBQXFCO0FBQ2xFO0FBQ0Esa0JBQWtCLDZFQUFZO0FBQzlCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsNENBQTRDLDZGQUFlO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbWFydGluc3Rhcm9zdGEvRGV2ZWxvcG1lbnQvdmliZXMvZGl2eXkvYXBwcy93ZWIvc3JjL2FwcC9hcGkvYW5hbHl6ZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYW5hbHl6ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5emVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FuYWx5emUvcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnLFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL21hcnRpbnN0YXJvc3RhL0RldmVsb3BtZW50L3ZpYmVzL2Rpdnl5L2FwcHMvd2ViL3NyYy9hcHAvYXBpL2FuYWx5emUvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9hbmFseXplL3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBpZiB3ZSBhcmVuJ3Qgd3JhcHBlZCBieSBiYXNlLXNlcnZlciBoYW5kbGUgaGVyZVxuICAgICAgICBpZiAoIWFjdGl2ZVNwYW4gJiYgIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fmartinstarosta%2FDevelopment%2Fvibes%2Fdivyy%2Fapps%2Fweb%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmartinstarosta%2FDevelopment%2Fvibes%2Fdivyy%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/../../packages/core/dist/calculators/DividendCalculator.js":
/*!******************************************************************!*\
  !*** ../../packages/core/dist/calculators/DividendCalculator.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DividendCalculator: () => (/* binding */ DividendCalculator)\n/* harmony export */ });\n/* harmony import */ var _utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/MathUtils.js */ \"(rsc)/../../packages/core/dist/utils/MathUtils.js\");\n\nclass DividendCalculator {\n    static annualizeDividends(dividendEvents) {\n        const map = new Map();\n        for (const event of dividendEvents){\n            const year = event.year;\n            const amount = event.amount;\n            if (!isFinite(amount)) continue;\n            map.set(year, (map.get(year) || 0) + amount);\n        }\n        return [\n            ...map.entries()\n        ].sort((a, b)=>a[0] - b[0]);\n    }\n    static calculateTTMDividends(dividendEvents) {\n        const now = Date.now();\n        const oneYearAgo = now - 365 * 24 * 3600 * 1000;\n        return (0,_utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__.sum)(dividendEvents.filter((d)=>d.date.getTime() > oneYearAgo).map((d)=>d.amount));\n    }\n    static calculateDividendStreak(annualSeries) {\n        const sorted = annualSeries.slice().sort((a, b)=>a[0] - b[0]);\n        let streak = 0;\n        // Improved calculation with better tolerance for real-world data issues\n        for(let i = sorted.length - 1; i > 0; i--){\n            const current = sorted[i][1];\n            const previous = sorted[i - 1][1];\n            // Allow up to 2% decline to handle data rounding, stock splits, and minor cuts\n            // This is more realistic for dividend analysis while still being conservative\n            if (current >= previous * 0.98) {\n                streak++;\n            } else {\n                // Check if this might be a data quality issue rather than a real cut\n                const decline = (previous - current) / previous;\n                // If decline is small (< 5%) and next year recovers, might be data noise\n                if (decline < 0.05 && i < sorted.length - 1) {\n                    const nextYear = sorted[i + 1][1];\n                    if (nextYear >= previous * 0.98) {\n                        // Likely data noise, continue streak but with lower confidence\n                        streak++;\n                        continue;\n                    }\n                }\n                break;\n            }\n        }\n        return streak;\n    }\n    static calculateSafeGrowth(cagr5, cagr3, fundamentals, streak) {\n        const growthBase = cagr5 ?? cagr3 ?? 0;\n        let safeGrowth = (0,_utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(growthBase, -0.10, 0.15);\n        // Graceful handling of bad CAGRs for long streak stocks\n        // If CAGR < -5% but streak >= 20y, assume modest positive growth instead\n        if (safeGrowth < -0.05 && streak >= 20) {\n            // For long streak stocks with bad calculated CAGR, use modest positive growth\n            // This prevents \"negative growth\" from conflicting with a proven long streak\n            // Use conservative 1.5% as middle ground between 0-3%\n            const adjustedGrowth = 0.015;\n            console.warn(`  Adjusted negative CAGR (${(growthBase * 100).toFixed(1)}%) to +${(adjustedGrowth * 100).toFixed(1)}% for ${streak}-year streak stock`);\n            safeGrowth = adjustedGrowth;\n        }\n        const epsPayoutRatio = fundamentals.epsPayoutRatio;\n        const fcfPayoutRatio = fundamentals.fcfPayoutRatio;\n        if (isFinite(epsPayoutRatio) && epsPayoutRatio > 0.8 || isFinite(fcfPayoutRatio) && fcfPayoutRatio > 1.0 || streak < 3) {\n            safeGrowth = Math.min(safeGrowth, 0);\n        }\n        return safeGrowth;\n    }\n    static calculateGordonGrowthModel(forwardDividend, price, requiredReturn, safeGrowth) {\n        if (!price || !isFinite(forwardDividend)) return null;\n        const conservativeGrowth = Math.max(-0.05, Math.min(0.06, safeGrowth));\n        if (requiredReturn > conservativeGrowth) {\n            return forwardDividend / (requiredReturn - conservativeGrowth);\n        }\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L2NhbGN1bGF0b3JzL0RpdmlkZW5kQ2FsY3VsYXRvci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFtRDtBQUM1QyxNQUFNRTtJQUNULE9BQU9DLG1CQUFtQkMsY0FBYyxFQUFFO1FBQ3RDLE1BQU1DLE1BQU0sSUFBSUM7UUFDaEIsS0FBSyxNQUFNQyxTQUFTSCxlQUFnQjtZQUNoQyxNQUFNSSxPQUFPRCxNQUFNQyxJQUFJO1lBQ3ZCLE1BQU1DLFNBQVNGLE1BQU1FLE1BQU07WUFDM0IsSUFBSSxDQUFDQyxTQUFTRCxTQUNWO1lBQ0pKLElBQUlNLEdBQUcsQ0FBQ0gsTUFBTSxDQUFDSCxJQUFJTyxHQUFHLENBQUNKLFNBQVMsS0FBS0M7UUFDekM7UUFDQSxPQUFPO2VBQUlKLElBQUlRLE9BQU87U0FBRyxDQUFDQyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsQ0FBQyxDQUFDLEVBQUUsR0FBR0MsQ0FBQyxDQUFDLEVBQUU7SUFDeEQ7SUFDQSxPQUFPQyxzQkFBc0JiLGNBQWMsRUFBRTtRQUN6QyxNQUFNYyxNQUFNQyxLQUFLRCxHQUFHO1FBQ3BCLE1BQU1FLGFBQWFGLE1BQU8sTUFBTSxLQUFLLE9BQU87UUFDNUMsT0FBT2xCLHdEQUFHQSxDQUFDSSxlQUNOaUIsTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxJQUFJLENBQUNDLE9BQU8sS0FBS0osWUFDL0JmLEdBQUcsQ0FBQ2lCLENBQUFBLElBQUtBLEVBQUViLE1BQU07SUFDMUI7SUFDQSxPQUFPZ0Isd0JBQXdCQyxZQUFZLEVBQUU7UUFDekMsTUFBTUMsU0FBU0QsYUFBYUUsS0FBSyxHQUFHZCxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsQ0FBQyxDQUFDLEVBQUUsR0FBR0MsQ0FBQyxDQUFDLEVBQUU7UUFDOUQsSUFBSWEsU0FBUztRQUNiLHdFQUF3RTtRQUN4RSxJQUFLLElBQUlDLElBQUlILE9BQU9JLE1BQU0sR0FBRyxHQUFHRCxJQUFJLEdBQUdBLElBQUs7WUFDeEMsTUFBTUUsVUFBVUwsTUFBTSxDQUFDRyxFQUFFLENBQUMsRUFBRTtZQUM1QixNQUFNRyxXQUFXTixNQUFNLENBQUNHLElBQUksRUFBRSxDQUFDLEVBQUU7WUFDakMsK0VBQStFO1lBQy9FLDhFQUE4RTtZQUM5RSxJQUFJRSxXQUFXQyxXQUFXLE1BQU07Z0JBQzVCSjtZQUNKLE9BQ0s7Z0JBQ0QscUVBQXFFO2dCQUNyRSxNQUFNSyxVQUFVLENBQUNELFdBQVdELE9BQU0sSUFBS0M7Z0JBQ3ZDLHlFQUF5RTtnQkFDekUsSUFBSUMsVUFBVSxRQUFRSixJQUFJSCxPQUFPSSxNQUFNLEdBQUcsR0FBRztvQkFDekMsTUFBTUksV0FBV1IsTUFBTSxDQUFDRyxJQUFJLEVBQUUsQ0FBQyxFQUFFO29CQUNqQyxJQUFJSyxZQUFZRixXQUFXLE1BQU07d0JBQzdCLCtEQUErRDt3QkFDL0RKO3dCQUNBO29CQUNKO2dCQUNKO2dCQUNBO1lBQ0o7UUFDSjtRQUNBLE9BQU9BO0lBQ1g7SUFDQSxPQUFPTyxvQkFBb0JDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxZQUFZLEVBQUVWLE1BQU0sRUFBRTtRQUMzRCxNQUFNVyxhQUFhSCxTQUFTQyxTQUFTO1FBQ3JDLElBQUlHLGFBQWF4QywwREFBS0EsQ0FBQ3VDLFlBQVksQ0FBQyxNQUFNO1FBQzFDLHdEQUF3RDtRQUN4RCx5RUFBeUU7UUFDekUsSUFBSUMsYUFBYSxDQUFDLFFBQVFaLFVBQVUsSUFBSTtZQUNwQyw4RUFBOEU7WUFDOUUsNkVBQTZFO1lBQzdFLHNEQUFzRDtZQUN0RCxNQUFNYSxpQkFBaUI7WUFDdkJDLFFBQVFDLElBQUksQ0FBQyxDQUFDLDRCQUE0QixFQUFFLENBQUNKLGFBQWEsR0FBRSxFQUFHSyxPQUFPLENBQUMsR0FBRyxPQUFPLEVBQUUsQ0FBQ0gsaUJBQWlCLEdBQUUsRUFBR0csT0FBTyxDQUFDLEdBQUcsTUFBTSxFQUFFaEIsT0FBTyxrQkFBa0IsQ0FBQztZQUN2SlksYUFBYUM7UUFDakI7UUFDQSxNQUFNSSxpQkFBaUJQLGFBQWFPLGNBQWM7UUFDbEQsTUFBTUMsaUJBQWlCUixhQUFhUSxjQUFjO1FBQ2xELElBQUksU0FBVUQsbUJBQW1CQSxpQkFBaUIsT0FDN0NwQyxTQUFTcUMsbUJBQW1CQSxpQkFBaUIsT0FDOUNsQixTQUFTLEdBQUc7WUFDWlksYUFBYU8sS0FBS0MsR0FBRyxDQUFDUixZQUFZO1FBQ3RDO1FBQ0EsT0FBT0E7SUFDWDtJQUNBLE9BQU9TLDJCQUEyQkMsZUFBZSxFQUFFQyxLQUFLLEVBQUVDLGNBQWMsRUFBRVosVUFBVSxFQUFFO1FBQ2xGLElBQUksQ0FBQ1csU0FBUyxDQUFDMUMsU0FBU3lDLGtCQUNwQixPQUFPO1FBQ1gsTUFBTUcscUJBQXFCTixLQUFLTyxHQUFHLENBQUMsQ0FBQyxNQUFNUCxLQUFLQyxHQUFHLENBQUMsTUFBTVI7UUFDMUQsSUFBSVksaUJBQWlCQyxvQkFBb0I7WUFDckMsT0FBT0gsa0JBQW1CRSxDQUFBQSxpQkFBaUJDLGtCQUFpQjtRQUNoRTtRQUNBLE9BQU87SUFDWDtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbWFydGluc3Rhcm9zdGEvRGV2ZWxvcG1lbnQvdmliZXMvZGl2eXkvcGFja2FnZXMvY29yZS9kaXN0L2NhbGN1bGF0b3JzL0RpdmlkZW5kQ2FsY3VsYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdW0sIGNsYW1wIH0gZnJvbSBcIi4uL3V0aWxzL01hdGhVdGlscy5qc1wiO1xuZXhwb3J0IGNsYXNzIERpdmlkZW5kQ2FsY3VsYXRvciB7XG4gICAgc3RhdGljIGFubnVhbGl6ZURpdmlkZW5kcyhkaXZpZGVuZEV2ZW50cykge1xuICAgICAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgZGl2aWRlbmRFdmVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBldmVudC55ZWFyO1xuICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gZXZlbnQuYW1vdW50O1xuICAgICAgICAgICAgaWYgKCFpc0Zpbml0ZShhbW91bnQpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbWFwLnNldCh5ZWFyLCAobWFwLmdldCh5ZWFyKSB8fCAwKSArIGFtb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5tYXAuZW50cmllcygpXS5zb3J0KChhLCBiKSA9PiBhWzBdIC0gYlswXSk7XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjdWxhdGVUVE1EaXZpZGVuZHMoZGl2aWRlbmRFdmVudHMpIHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3Qgb25lWWVhckFnbyA9IG5vdyAtICgzNjUgKiAyNCAqIDM2MDAgKiAxMDAwKTtcbiAgICAgICAgcmV0dXJuIHN1bShkaXZpZGVuZEV2ZW50c1xuICAgICAgICAgICAgLmZpbHRlcihkID0+IGQuZGF0ZS5nZXRUaW1lKCkgPiBvbmVZZWFyQWdvKVxuICAgICAgICAgICAgLm1hcChkID0+IGQuYW1vdW50KSk7XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjdWxhdGVEaXZpZGVuZFN0cmVhayhhbm51YWxTZXJpZXMpIHtcbiAgICAgICAgY29uc3Qgc29ydGVkID0gYW5udWFsU2VyaWVzLnNsaWNlKCkuc29ydCgoYSwgYikgPT4gYVswXSAtIGJbMF0pO1xuICAgICAgICBsZXQgc3RyZWFrID0gMDtcbiAgICAgICAgLy8gSW1wcm92ZWQgY2FsY3VsYXRpb24gd2l0aCBiZXR0ZXIgdG9sZXJhbmNlIGZvciByZWFsLXdvcmxkIGRhdGEgaXNzdWVzXG4gICAgICAgIGZvciAobGV0IGkgPSBzb3J0ZWQubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHNvcnRlZFtpXVsxXTtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzID0gc29ydGVkW2kgLSAxXVsxXTtcbiAgICAgICAgICAgIC8vIEFsbG93IHVwIHRvIDIlIGRlY2xpbmUgdG8gaGFuZGxlIGRhdGEgcm91bmRpbmcsIHN0b2NrIHNwbGl0cywgYW5kIG1pbm9yIGN1dHNcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbW9yZSByZWFsaXN0aWMgZm9yIGRpdmlkZW5kIGFuYWx5c2lzIHdoaWxlIHN0aWxsIGJlaW5nIGNvbnNlcnZhdGl2ZVxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPj0gcHJldmlvdXMgKiAwLjk4KSB7XG4gICAgICAgICAgICAgICAgc3RyZWFrKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIG1pZ2h0IGJlIGEgZGF0YSBxdWFsaXR5IGlzc3VlIHJhdGhlciB0aGFuIGEgcmVhbCBjdXRcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNsaW5lID0gKHByZXZpb3VzIC0gY3VycmVudCkgLyBwcmV2aW91cztcbiAgICAgICAgICAgICAgICAvLyBJZiBkZWNsaW5lIGlzIHNtYWxsICg8IDUlKSBhbmQgbmV4dCB5ZWFyIHJlY292ZXJzLCBtaWdodCBiZSBkYXRhIG5vaXNlXG4gICAgICAgICAgICAgICAgaWYgKGRlY2xpbmUgPCAwLjA1ICYmIGkgPCBzb3J0ZWQubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0WWVhciA9IHNvcnRlZFtpICsgMV1bMV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0WWVhciA+PSBwcmV2aW91cyAqIDAuOTgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpa2VseSBkYXRhIG5vaXNlLCBjb250aW51ZSBzdHJlYWsgYnV0IHdpdGggbG93ZXIgY29uZmlkZW5jZVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFrKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFrO1xuICAgIH1cbiAgICBzdGF0aWMgY2FsY3VsYXRlU2FmZUdyb3d0aChjYWdyNSwgY2FncjMsIGZ1bmRhbWVudGFscywgc3RyZWFrKSB7XG4gICAgICAgIGNvbnN0IGdyb3d0aEJhc2UgPSBjYWdyNSA/PyBjYWdyMyA/PyAwO1xuICAgICAgICBsZXQgc2FmZUdyb3d0aCA9IGNsYW1wKGdyb3d0aEJhc2UsIC0wLjEwLCAwLjE1KTtcbiAgICAgICAgLy8gR3JhY2VmdWwgaGFuZGxpbmcgb2YgYmFkIENBR1JzIGZvciBsb25nIHN0cmVhayBzdG9ja3NcbiAgICAgICAgLy8gSWYgQ0FHUiA8IC01JSBidXQgc3RyZWFrID49IDIweSwgYXNzdW1lIG1vZGVzdCBwb3NpdGl2ZSBncm93dGggaW5zdGVhZFxuICAgICAgICBpZiAoc2FmZUdyb3d0aCA8IC0wLjA1ICYmIHN0cmVhayA+PSAyMCkge1xuICAgICAgICAgICAgLy8gRm9yIGxvbmcgc3RyZWFrIHN0b2NrcyB3aXRoIGJhZCBjYWxjdWxhdGVkIENBR1IsIHVzZSBtb2Rlc3QgcG9zaXRpdmUgZ3Jvd3RoXG4gICAgICAgICAgICAvLyBUaGlzIHByZXZlbnRzIFwibmVnYXRpdmUgZ3Jvd3RoXCIgZnJvbSBjb25mbGljdGluZyB3aXRoIGEgcHJvdmVuIGxvbmcgc3RyZWFrXG4gICAgICAgICAgICAvLyBVc2UgY29uc2VydmF0aXZlIDEuNSUgYXMgbWlkZGxlIGdyb3VuZCBiZXR3ZWVuIDAtMyVcbiAgICAgICAgICAgIGNvbnN0IGFkanVzdGVkR3Jvd3RoID0gMC4wMTU7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyAgQWRqdXN0ZWQgbmVnYXRpdmUgQ0FHUiAoJHsoZ3Jvd3RoQmFzZSAqIDEwMCkudG9GaXhlZCgxKX0lKSB0byArJHsoYWRqdXN0ZWRHcm93dGggKiAxMDApLnRvRml4ZWQoMSl9JSBmb3IgJHtzdHJlYWt9LXllYXIgc3RyZWFrIHN0b2NrYCk7XG4gICAgICAgICAgICBzYWZlR3Jvd3RoID0gYWRqdXN0ZWRHcm93dGg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXBzUGF5b3V0UmF0aW8gPSBmdW5kYW1lbnRhbHMuZXBzUGF5b3V0UmF0aW87XG4gICAgICAgIGNvbnN0IGZjZlBheW91dFJhdGlvID0gZnVuZGFtZW50YWxzLmZjZlBheW91dFJhdGlvO1xuICAgICAgICBpZiAoKGlzRmluaXRlKGVwc1BheW91dFJhdGlvKSAmJiBlcHNQYXlvdXRSYXRpbyA+IDAuOCkgfHxcbiAgICAgICAgICAgIChpc0Zpbml0ZShmY2ZQYXlvdXRSYXRpbykgJiYgZmNmUGF5b3V0UmF0aW8gPiAxLjApIHx8XG4gICAgICAgICAgICBzdHJlYWsgPCAzKSB7XG4gICAgICAgICAgICBzYWZlR3Jvd3RoID0gTWF0aC5taW4oc2FmZUdyb3d0aCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNhZmVHcm93dGg7XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjdWxhdGVHb3Jkb25Hcm93dGhNb2RlbChmb3J3YXJkRGl2aWRlbmQsIHByaWNlLCByZXF1aXJlZFJldHVybiwgc2FmZUdyb3d0aCkge1xuICAgICAgICBpZiAoIXByaWNlIHx8ICFpc0Zpbml0ZShmb3J3YXJkRGl2aWRlbmQpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGNvbnNlcnZhdGl2ZUdyb3d0aCA9IE1hdGgubWF4KC0wLjA1LCBNYXRoLm1pbigwLjA2LCBzYWZlR3Jvd3RoKSk7XG4gICAgICAgIGlmIChyZXF1aXJlZFJldHVybiA+IGNvbnNlcnZhdGl2ZUdyb3d0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZvcndhcmREaXZpZGVuZCAvIChyZXF1aXJlZFJldHVybiAtIGNvbnNlcnZhdGl2ZUdyb3d0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInN1bSIsImNsYW1wIiwiRGl2aWRlbmRDYWxjdWxhdG9yIiwiYW5udWFsaXplRGl2aWRlbmRzIiwiZGl2aWRlbmRFdmVudHMiLCJtYXAiLCJNYXAiLCJldmVudCIsInllYXIiLCJhbW91bnQiLCJpc0Zpbml0ZSIsInNldCIsImdldCIsImVudHJpZXMiLCJzb3J0IiwiYSIsImIiLCJjYWxjdWxhdGVUVE1EaXZpZGVuZHMiLCJub3ciLCJEYXRlIiwib25lWWVhckFnbyIsImZpbHRlciIsImQiLCJkYXRlIiwiZ2V0VGltZSIsImNhbGN1bGF0ZURpdmlkZW5kU3RyZWFrIiwiYW5udWFsU2VyaWVzIiwic29ydGVkIiwic2xpY2UiLCJzdHJlYWsiLCJpIiwibGVuZ3RoIiwiY3VycmVudCIsInByZXZpb3VzIiwiZGVjbGluZSIsIm5leHRZZWFyIiwiY2FsY3VsYXRlU2FmZUdyb3d0aCIsImNhZ3I1IiwiY2FncjMiLCJmdW5kYW1lbnRhbHMiLCJncm93dGhCYXNlIiwic2FmZUdyb3d0aCIsImFkanVzdGVkR3Jvd3RoIiwiY29uc29sZSIsIndhcm4iLCJ0b0ZpeGVkIiwiZXBzUGF5b3V0UmF0aW8iLCJmY2ZQYXlvdXRSYXRpbyIsIk1hdGgiLCJtaW4iLCJjYWxjdWxhdGVHb3Jkb25Hcm93dGhNb2RlbCIsImZvcndhcmREaXZpZGVuZCIsInByaWNlIiwicmVxdWlyZWRSZXR1cm4iLCJjb25zZXJ2YXRpdmVHcm93dGgiLCJtYXgiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/calculators/DividendCalculator.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/calculators/ScoreCalculator.js":
/*!***************************************************************!*\
  !*** ../../packages/core/dist/calculators/ScoreCalculator.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ScoreCalculator: () => (/* binding */ ScoreCalculator)\n/* harmony export */ });\n/* harmony import */ var _utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/MathUtils.js */ \"(rsc)/../../packages/core/dist/utils/MathUtils.js\");\n/* harmony import */ var _models_DividendAnalysis_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/DividendAnalysis.js */ \"(rsc)/../../packages/core/dist/models/DividendAnalysis.js\");\n\n\nclass ScoreCalculator {\n    static calculatePayoutScore(payoutRatio) {\n        if (!isFinite(payoutRatio) || payoutRatio <= 0) return 100;\n        if (payoutRatio <= 0.6) return 100;\n        if (payoutRatio >= 1.0) return 0;\n        return (1 - (payoutRatio - 0.6) / 0.4) * 100;\n    }\n    static calculateFCFCoverageScore(coverage, payoutRatio = NaN) {\n        if (!isFinite(coverage)) {\n            if (isFinite(payoutRatio) && payoutRatio <= 0.6) {\n                return 50;\n            }\n            return 0;\n        }\n        if (coverage >= 2) return 100;\n        if (coverage <= 0) return 0;\n        return (0,_utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(coverage / 2, 0, 1) * 100;\n    }\n    static calculateStreakScore(streak) {\n        return (0,_utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(streak / 20, 0, 1) * 100;\n    }\n    static calculateGrowthScore(growthRate) {\n        const x = (0,_utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)((growthRate - -0.10) / (0.10 - -0.10), 0, 1);\n        return x * 100;\n    }\n    static calculateTrendScore(price, ema) {\n        if (!price || !ema.ema20 || !ema.ema50 || !ema.ema200) {\n            return 0;\n        }\n        let score = 0;\n        // EMA200 is the most important - if stock is persistently under EMA200, \n        // it indicates market doubts about fundamentals\n        if (price > ema.ema200) {\n            score += 50; // Increased weight for EMA200\n        } else {\n            // Stock is under EMA200 - significant negative signal\n            score -= 20; // Penalty for being under EMA200\n        }\n        // EMA50 provides medium-term trend context\n        if (price > ema.ema50) {\n            score += 30;\n        }\n        // EMA20 provides short-term trend context\n        if (price > ema.ema20) {\n            score += 20;\n        }\n        // Ensure score doesn't go below 0\n        return Math.max(0, score);\n    }\n    static calculateMACDScore(macd) {\n        // If no MACD data available, return neutral score\n        if (!macd || macd.macdLine === null || macd.signalLine === null || macd.histogram === null) {\n            return 50; // Neutral score when data unavailable\n        }\n        let score = 50; // Start with neutral score\n        // MACD Line vs Signal Line (primary signal)\n        if (macd.macdLine > macd.signalLine) {\n            // Bullish signal\n            const diff = macd.macdLine - macd.signalLine;\n            score += Math.min(30, diff * 15); // Up to 30 points for strong bullish signal\n        } else {\n            // Bearish signal\n            const diff = macd.signalLine - macd.macdLine;\n            score -= Math.min(30, diff * 15); // Down to 30 points for strong bearish signal\n        }\n        // Histogram analysis (momentum)\n        if (macd.histogram > 0) {\n            // Positive momentum\n            score += Math.min(20, macd.histogram * 10); // Up to 20 points for strong positive momentum\n        } else {\n            // Negative momentum\n            score -= Math.min(20, Math.abs(macd.histogram) * 10); // Down to 20 points for strong negative momentum\n        }\n        // MACD line position relative to zero (trend strength)\n        if (macd.macdLine > 0) {\n            // Above zero line - bullish trend\n            score += Math.min(10, macd.macdLine * 5);\n        } else {\n            // Below zero line - bearish trend  \n            score -= Math.min(10, Math.abs(macd.macdLine) * 5);\n        }\n        // Ensure score stays within 0-100 range\n        return Math.max(0, Math.min(100, score));\n    }\n    static calculateRSIScore(rsi) {\n        // If no RSI data available, return neutral score\n        if (!rsi || rsi.rsi === null) {\n            return 50; // Neutral score when data unavailable\n        }\n        const rsiValue = rsi.rsi;\n        let score = 50; // Start with neutral score\n        // RSI-based scoring logic for dividend stocks\n        // For dividend stocks, we prefer stocks that aren't severely overbought or oversold\n        if (rsiValue >= 20 && rsiValue <= 80) {\n            // Normal range - good for dividend stocks\n            if (rsiValue >= 40 && rsiValue <= 60) {\n                // Sweet spot for dividend investing - not extreme\n                score = 100;\n            } else if (rsiValue >= 30 && rsiValue <= 70) {\n                // Good range\n                score = 85;\n            } else {\n                // Still acceptable but getting toward extremes\n                score = 70;\n            }\n        } else if (rsiValue > 80) {\n            // Overbought - potentially risky entry point for dividend investors\n            if (rsiValue > 90) {\n                score = 10; // Extremely overbought\n            } else {\n                score = 30; // Very overbought\n            }\n        } else if (rsiValue < 20) {\n            // Oversold - could be opportunity but also risk\n            if (rsiValue < 10) {\n                score = 20; // Extremely oversold - high risk/reward\n            } else {\n                score = 40; // Oversold - potential opportunity\n            }\n        }\n        return Math.max(0, Math.min(100, score));\n    }\n    static calculateDividendScores(fundamentals, streak, safeGrowth, quote, ema, macd, rsi) {\n        return new _models_DividendAnalysis_js__WEBPACK_IMPORTED_MODULE_1__.DividendScores({\n            payout: this.calculatePayoutScore(fundamentals.epsPayoutRatio),\n            fcf: this.calculateFCFCoverageScore(fundamentals.fcfCoverage, fundamentals.epsPayoutRatio),\n            streak: this.calculateStreakScore(streak),\n            growth: this.calculateGrowthScore(safeGrowth),\n            trend: this.calculateTrendScore(quote.price, ema),\n            macd: this.calculateMACDScore(macd),\n            rsi: this.calculateRSIScore(rsi)\n        });\n    }\n    static calculateTotalScore(scores) {\n        return Math.round(0.25 * scores.payout + 0.25 * scores.fcf + 0.17 * scores.streak + 0.16 * scores.growth + 0.07 * scores.trend + 0.06 * scores.macd + 0.04 * scores.rsi);\n    }\n    /**\n     * Analyzes EMA trends to detect potential fundamental concerns\n     */ static analyzeEMATrends(price, ema) {\n        const concerns = [];\n        let bearishSignals = 0;\n        let bullishSignals = 0;\n        if (!price || !ema.ema20 || !ema.ema50 || !ema.ema200) {\n            return {\n                isUnderEMA200: false,\n                isUnderEMA50: false,\n                isUnderEMA20: false,\n                fundamentalConcerns: [\n                    'EMA data unavailable'\n                ],\n                trendStrength: 'neutral'\n            };\n        }\n        const isUnderEMA200 = price < ema.ema200;\n        const isUnderEMA50 = price < ema.ema50;\n        const isUnderEMA20 = price < ema.ema20;\n        // EMA200 analysis - most critical for fundamentals\n        if (isUnderEMA200) {\n            concerns.push('Stock trading below EMA200 - market may doubt fundamentals');\n            bearishSignals += 2; // Strong bearish signal\n        } else {\n            bullishSignals += 2; // Strong bullish signal\n        }\n        // EMA50 analysis\n        if (isUnderEMA50) {\n            concerns.push('Stock below EMA50 - medium-term trend is bearish');\n            bearishSignals += 1;\n        } else {\n            bullishSignals += 1;\n        }\n        // EMA20 analysis\n        if (isUnderEMA20) {\n            concerns.push('Stock below EMA20 - short-term momentum is negative');\n            bearishSignals += 1;\n        } else {\n            bullishSignals += 1;\n        }\n        // Determine trend strength\n        let trendStrength;\n        if (bearishSignals >= 3) trendStrength = 'strong_bearish';\n        else if (bearishSignals >= 2) trendStrength = 'bearish';\n        else if (bullishSignals >= 3) trendStrength = 'strong_bullish';\n        else if (bullishSignals >= 2) trendStrength = 'bullish';\n        else trendStrength = 'neutral';\n        return {\n            isUnderEMA200,\n            isUnderEMA50,\n            isUnderEMA20,\n            fundamentalConcerns: concerns,\n            trendStrength\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L2NhbGN1bGF0b3JzL1Njb3JlQ2FsY3VsYXRvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFDaUI7QUFDeEQsTUFBTUU7SUFDVCxPQUFPQyxxQkFBcUJDLFdBQVcsRUFBRTtRQUNyQyxJQUFJLENBQUNDLFNBQVNELGdCQUFnQkEsZUFBZSxHQUN6QyxPQUFPO1FBQ1gsSUFBSUEsZUFBZSxLQUNmLE9BQU87UUFDWCxJQUFJQSxlQUFlLEtBQ2YsT0FBTztRQUNYLE9BQU8sQ0FBQyxJQUFJLENBQUNBLGNBQWMsR0FBRSxJQUFLLEdBQUUsSUFBSztJQUM3QztJQUNBLE9BQU9FLDBCQUEwQkMsUUFBUSxFQUFFSCxjQUFjSSxHQUFHLEVBQUU7UUFDMUQsSUFBSSxDQUFDSCxTQUFTRSxXQUFXO1lBQ3JCLElBQUlGLFNBQVNELGdCQUFnQkEsZUFBZSxLQUFLO2dCQUM3QyxPQUFPO1lBQ1g7WUFDQSxPQUFPO1FBQ1g7UUFDQSxJQUFJRyxZQUFZLEdBQ1osT0FBTztRQUNYLElBQUlBLFlBQVksR0FDWixPQUFPO1FBQ1gsT0FBT1AsMERBQUtBLENBQUNPLFdBQVcsR0FBRyxHQUFHLEtBQUs7SUFDdkM7SUFDQSxPQUFPRSxxQkFBcUJDLE1BQU0sRUFBRTtRQUNoQyxPQUFPViwwREFBS0EsQ0FBQ1UsU0FBUyxJQUFJLEdBQUcsS0FBSztJQUN0QztJQUNBLE9BQU9DLHFCQUFxQkMsVUFBVSxFQUFFO1FBQ3BDLE1BQU1DLElBQUliLDBEQUFLQSxDQUFDLENBQUNZLGFBQWMsQ0FBQyxJQUFJLElBQU0sUUFBUSxDQUFDLElBQUksR0FBSSxHQUFHO1FBQzlELE9BQU9DLElBQUk7SUFDZjtJQUNBLE9BQU9DLG9CQUFvQkMsS0FBSyxFQUFFQyxHQUFHLEVBQUU7UUFDbkMsSUFBSSxDQUFDRCxTQUFTLENBQUNDLElBQUlDLEtBQUssSUFBSSxDQUFDRCxJQUFJRSxLQUFLLElBQUksQ0FBQ0YsSUFBSUcsTUFBTSxFQUFFO1lBQ25E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QUN2QkssZ0JBQWdCO2FBRWhCQSxnQkFBZ0I7UUFDcEIsT0FBTztZQUNISjtZQUNBQztZQUNBQztZQUNBQyxxQkFBcUJOO1lBQ3JCTztRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcnRpbnN0YXJvc3RhL0RldmVsb3BtZW50L3ZpYmVzL2Rpdnl5L3BhY2thZ2VzL2NvcmUvZGlzdC9jYWxjdWxhdG9ycy9TY29yZUNhbGN1bGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2xhbXAgfSBmcm9tIFwiLi4vdXRpbHMvTWF0aFV0aWxzLmpzXCI7XG5pbXBvcnQgeyBEaXZpZGVuZFNjb3JlcyB9IGZyb20gXCIuLi9tb2RlbHMvRGl2aWRlbmRBbmFseXNpcy5qc1wiO1xuZXhwb3J0IGNsYXNzIFNjb3JlQ2FsY3VsYXRvciB7XG4gICAgc3RhdGljIGNhbGN1bGF0ZVBheW91dFNjb3JlKHBheW91dFJhdGlvKSB7XG4gICAgICAgIGlmICghaXNGaW5pdGUocGF5b3V0UmF0aW8pIHx8IHBheW91dFJhdGlvIDw9IDApXG4gICAgICAgICAgICByZXR1cm4gMTAwO1xuICAgICAgICBpZiAocGF5b3V0UmF0aW8gPD0gMC42KVxuICAgICAgICAgICAgcmV0dXJuIDEwMDtcbiAgICAgICAgaWYgKHBheW91dFJhdGlvID49IDEuMClcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICByZXR1cm4gKDEgLSAocGF5b3V0UmF0aW8gLSAwLjYpIC8gMC40KSAqIDEwMDtcbiAgICB9XG4gICAgc3RhdGljIGNhbGN1bGF0ZUZDRkNvdmVyYWdlU2NvcmUoY292ZXJhZ2UsIHBheW91dFJhdGlvID0gTmFOKSB7XG4gICAgICAgIGlmICghaXNGaW5pdGUoY292ZXJhZ2UpKSB7XG4gICAgICAgICAgICBpZiAoaXNGaW5pdGUocGF5b3V0UmF0aW8pICYmIHBheW91dFJhdGlvIDw9IDAuNikge1xuICAgICAgICAgICAgICAgIHJldHVybiA1MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb3ZlcmFnZSA+PSAyKVxuICAgICAgICAgICAgcmV0dXJuIDEwMDtcbiAgICAgICAgaWYgKGNvdmVyYWdlIDw9IDApXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgcmV0dXJuIGNsYW1wKGNvdmVyYWdlIC8gMiwgMCwgMSkgKiAxMDA7XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjdWxhdGVTdHJlYWtTY29yZShzdHJlYWspIHtcbiAgICAgICAgcmV0dXJuIGNsYW1wKHN0cmVhayAvIDIwLCAwLCAxKSAqIDEwMDtcbiAgICB9XG4gICAgc3RhdGljIGNhbGN1bGF0ZUdyb3d0aFNjb3JlKGdyb3d0aFJhdGUpIHtcbiAgICAgICAgY29uc3QgeCA9IGNsYW1wKChncm93dGhSYXRlIC0gKC0wLjEwKSkgLyAoMC4xMCAtICgtMC4xMCkpLCAwLCAxKTtcbiAgICAgICAgcmV0dXJuIHggKiAxMDA7XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjdWxhdGVUcmVuZFNjb3JlKHByaWNlLCBlbWEpIHtcbiAgICAgICAgaWYgKCFwcmljZSB8fCAhZW1hLmVtYTIwIHx8ICFlbWEuZW1hNTAgfHwgIWVtYS5lbWEyMDApIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzY29yZSA9IDA7XG4gICAgICAgIC8vIEVNQTIwMCBpcyB0aGUgbW9zdCBpbXBvcnRhbnQgLSBpZiBzdG9jayBpcyBwZXJzaXN0ZW50bHkgdW5kZXIgRU1BMjAwLCBcbiAgICAgICAgLy8gaXQgaW5kaWNhdGVzIG1hcmtldCBkb3VidHMgYWJvdXQgZnVuZGFtZW50YWxzXG4gICAgICAgIGlmIChwcmljZSA+IGVtYS5lbWEyMDApIHtcbiAgICAgICAgICAgIHNjb3JlICs9IDUwOyAvLyBJbmNyZWFzZWQgd2VpZ2h0IGZvciBFTUEyMDBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFN0b2NrIGlzIHVuZGVyIEVNQTIwMCAtIHNpZ25pZmljYW50IG5lZ2F0aXZlIHNpZ25hbFxuICAgICAgICAgICAgc2NvcmUgLT0gMjA7IC8vIFBlbmFsdHkgZm9yIGJlaW5nIHVuZGVyIEVNQTIwMFxuICAgICAgICB9XG4gICAgICAgIC8vIEVNQTUwIHByb3ZpZGVzIG1lZGl1bS10ZXJtIHRyZW5kIGNvbnRleHRcbiAgICAgICAgaWYgKHByaWNlID4gZW1hLmVtYTUwKSB7XG4gICAgICAgICAgICBzY29yZSArPSAzMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBFTUEyMCBwcm92aWRlcyBzaG9ydC10ZXJtIHRyZW5kIGNvbnRleHRcbiAgICAgICAgaWYgKHByaWNlID4gZW1hLmVtYTIwKSB7XG4gICAgICAgICAgICBzY29yZSArPSAyMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBFbnN1cmUgc2NvcmUgZG9lc24ndCBnbyBiZWxvdyAwXG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBzY29yZSk7XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjdWxhdGVNQUNEU2NvcmUobWFjZCkge1xuICAgICAgICAvLyBJZiBubyBNQUNEIGRhdGEgYXZhaWxhYmxlLCByZXR1cm4gbmV1dHJhbCBzY29yZVxuICAgICAgICBpZiAoIW1hY2QgfHwgbWFjZC5tYWNkTGluZSA9PT0gbnVsbCB8fCBtYWNkLnNpZ25hbExpbmUgPT09IG51bGwgfHwgbWFjZC5oaXN0b2dyYW0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiA1MDsgLy8gTmV1dHJhbCBzY29yZSB3aGVuIGRhdGEgdW5hdmFpbGFibGVcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2NvcmUgPSA1MDsgLy8gU3RhcnQgd2l0aCBuZXV0cmFsIHNjb3JlXG4gICAgICAgIC8vIE1BQ0QgTGluZSB2cyBTaWduYWwgTGluZSAocHJpbWFyeSBzaWduYWwpXG4gICAgICAgIGlmIChtYWNkLm1hY2RMaW5lID4gbWFjZC5zaWduYWxMaW5lKSB7XG4gICAgICAgICAgICAvLyBCdWxsaXNoIHNpZ25hbFxuICAgICAgICAgICAgY29uc3QgZGlmZiA9IG1hY2QubWFjZExpbmUgLSBtYWNkLnNpZ25hbExpbmU7XG4gICAgICAgICAgICBzY29yZSArPSBNYXRoLm1pbigzMCwgZGlmZiAqIDE1KTsgLy8gVXAgdG8gMzAgcG9pbnRzIGZvciBzdHJvbmcgYnVsbGlzaCBzaWduYWxcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEJlYXJpc2ggc2lnbmFsXG4gICAgICAgICAgICBjb25zdCBkaWZmID0gbWFjZC5zaWduYWxMaW5lIC0gbWFjZC5tYWNkTGluZTtcbiAgICAgICAgICAgIHNjb3JlIC09IE1hdGgubWluKDMwLCBkaWZmICogMTUpOyAvLyBEb3duIHRvIDMwIHBvaW50cyBmb3Igc3Ryb25nIGJlYXJpc2ggc2lnbmFsXG4gICAgICAgIH1cbiAgICAgICAgLy8gSGlzdG9ncmFtIGFuYWx5c2lzIChtb21lbnR1bSlcbiAgICAgICAgaWYgKG1hY2QuaGlzdG9ncmFtID4gMCkge1xuICAgICAgICAgICAgLy8gUG9zaXRpdmUgbW9tZW50dW1cbiAgICAgICAgICAgIHNjb3JlICs9IE1hdGgubWluKDIwLCBtYWNkLmhpc3RvZ3JhbSAqIDEwKTsgLy8gVXAgdG8gMjAgcG9pbnRzIGZvciBzdHJvbmcgcG9zaXRpdmUgbW9tZW50dW1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5lZ2F0aXZlIG1vbWVudHVtXG4gICAgICAgICAgICBzY29yZSAtPSBNYXRoLm1pbigyMCwgTWF0aC5hYnMobWFjZC5oaXN0b2dyYW0pICogMTApOyAvLyBEb3duIHRvIDIwIHBvaW50cyBmb3Igc3Ryb25nIG5lZ2F0aXZlIG1vbWVudHVtXG4gICAgICAgIH1cbiAgICAgICAgLy8gTUFDRCBsaW5lIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHplcm8gKHRyZW5kIHN0cmVuZ3RoKVxuICAgICAgICBpZiAobWFjZC5tYWNkTGluZSA+IDApIHtcbiAgICAgICAgICAgIC8vIEFib3ZlIHplcm8gbGluZSAtIGJ1bGxpc2ggdHJlbmRcbiAgICAgICAgICAgIHNjb3JlICs9IE1hdGgubWluKDEwLCBtYWNkLm1hY2RMaW5lICogNSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBCZWxvdyB6ZXJvIGxpbmUgLSBiZWFyaXNoIHRyZW5kICBcbiAgICAgICAgICAgIHNjb3JlIC09IE1hdGgubWluKDEwLCBNYXRoLmFicyhtYWNkLm1hY2RMaW5lKSAqIDUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuc3VyZSBzY29yZSBzdGF5cyB3aXRoaW4gMC0xMDAgcmFuZ2VcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgc2NvcmUpKTtcbiAgICB9XG4gICAgc3RhdGljIGNhbGN1bGF0ZVJTSVNjb3JlKHJzaSkge1xuICAgICAgICAvLyBJZiBubyBSU0kgZGF0YSBhdmFpbGFibGUsIHJldHVybiBuZXV0cmFsIHNjb3JlXG4gICAgICAgIGlmICghcnNpIHx8IHJzaS5yc2kgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiA1MDsgLy8gTmV1dHJhbCBzY29yZSB3aGVuIGRhdGEgdW5hdmFpbGFibGVcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByc2lWYWx1ZSA9IHJzaS5yc2k7XG4gICAgICAgIGxldCBzY29yZSA9IDUwOyAvLyBTdGFydCB3aXRoIG5ldXRyYWwgc2NvcmVcbiAgICAgICAgLy8gUlNJLWJhc2VkIHNjb3JpbmcgbG9naWMgZm9yIGRpdmlkZW5kIHN0b2Nrc1xuICAgICAgICAvLyBGb3IgZGl2aWRlbmQgc3RvY2tzLCB3ZSBwcmVmZXIgc3RvY2tzIHRoYXQgYXJlbid0IHNldmVyZWx5IG92ZXJib3VnaHQgb3Igb3ZlcnNvbGRcbiAgICAgICAgaWYgKHJzaVZhbHVlID49IDIwICYmIHJzaVZhbHVlIDw9IDgwKSB7XG4gICAgICAgICAgICAvLyBOb3JtYWwgcmFuZ2UgLSBnb29kIGZvciBkaXZpZGVuZCBzdG9ja3NcbiAgICAgICAgICAgIGlmIChyc2lWYWx1ZSA+PSA0MCAmJiByc2lWYWx1ZSA8PSA2MCkge1xuICAgICAgICAgICAgICAgIC8vIFN3ZWV0IHNwb3QgZm9yIGRpdmlkZW5kIGludmVzdGluZyAtIG5vdCBleHRyZW1lXG4gICAgICAgICAgICAgICAgc2NvcmUgPSAxMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyc2lWYWx1ZSA+PSAzMCAmJiByc2lWYWx1ZSA8PSA3MCkge1xuICAgICAgICAgICAgICAgIC8vIEdvb2QgcmFuZ2VcbiAgICAgICAgICAgICAgICBzY29yZSA9IDg1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU3RpbGwgYWNjZXB0YWJsZSBidXQgZ2V0dGluZyB0b3dhcmQgZXh0cmVtZXNcbiAgICAgICAgICAgICAgICBzY29yZSA9IDcwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJzaVZhbHVlID4gODApIHtcbiAgICAgICAgICAgIC8vIE92ZXJib3VnaHQgLSBwb3RlbnRpYWxseSByaXNreSBlbnRyeSBwb2ludCBmb3IgZGl2aWRlbmQgaW52ZXN0b3JzXG4gICAgICAgICAgICBpZiAocnNpVmFsdWUgPiA5MCkge1xuICAgICAgICAgICAgICAgIHNjb3JlID0gMTA7IC8vIEV4dHJlbWVseSBvdmVyYm91Z2h0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY29yZSA9IDMwOyAvLyBWZXJ5IG92ZXJib3VnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyc2lWYWx1ZSA8IDIwKSB7XG4gICAgICAgICAgICAvLyBPdmVyc29sZCAtIGNvdWxkIGJlIG9wcG9ydHVuaXR5IGJ1dCBhbHNvIHJpc2tcbiAgICAgICAgICAgIGlmIChyc2lWYWx1ZSA8IDEwKSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgPSAyMDsgLy8gRXh0cmVtZWx5IG92ZXJzb2xkIC0gaGlnaCByaXNrL3Jld2FyZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgPSA0MDsgLy8gT3ZlcnNvbGQgLSBwb3RlbnRpYWwgb3Bwb3J0dW5pdHlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBzY29yZSkpO1xuICAgIH1cbiAgICBzdGF0aWMgY2FsY3VsYXRlRGl2aWRlbmRTY29yZXMoZnVuZGFtZW50YWxzLCBzdHJlYWssIHNhZmVHcm93dGgsIHF1b3RlLCBlbWEsIG1hY2QsIHJzaSkge1xuICAgICAgICByZXR1cm4gbmV3IERpdmlkZW5kU2NvcmVzKHtcbiAgICAgICAgICAgIHBheW91dDogdGhpcy5jYWxjdWxhdGVQYXlvdXRTY29yZShmdW5kYW1lbnRhbHMuZXBzUGF5b3V0UmF0aW8pLFxuICAgICAgICAgICAgZmNmOiB0aGlzLmNhbGN1bGF0ZUZDRkNvdmVyYWdlU2NvcmUoZnVuZGFtZW50YWxzLmZjZkNvdmVyYWdlLCBmdW5kYW1lbnRhbHMuZXBzUGF5b3V0UmF0aW8pLFxuICAgICAgICAgICAgc3RyZWFrOiB0aGlzLmNhbGN1bGF0ZVN0cmVha1Njb3JlKHN0cmVhayksXG4gICAgICAgICAgICBncm93dGg6IHRoaXMuY2FsY3VsYXRlR3Jvd3RoU2NvcmUoc2FmZUdyb3d0aCksXG4gICAgICAgICAgICB0cmVuZDogdGhpcy5jYWxjdWxhdGVUcmVuZFNjb3JlKHF1b3RlLnByaWNlLCBlbWEpLFxuICAgICAgICAgICAgbWFjZDogdGhpcy5jYWxjdWxhdGVNQUNEU2NvcmUobWFjZCksXG4gICAgICAgICAgICByc2k6IHRoaXMuY2FsY3VsYXRlUlNJU2NvcmUocnNpKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGNhbGN1bGF0ZVRvdGFsU2NvcmUoc2NvcmVzKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKDAuMjUgKiBzY29yZXMucGF5b3V0ICtcbiAgICAgICAgICAgIDAuMjUgKiBzY29yZXMuZmNmICtcbiAgICAgICAgICAgIDAuMTcgKiBzY29yZXMuc3RyZWFrICtcbiAgICAgICAgICAgIDAuMTYgKiBzY29yZXMuZ3Jvd3RoICtcbiAgICAgICAgICAgIDAuMDcgKiBzY29yZXMudHJlbmQgK1xuICAgICAgICAgICAgMC4wNiAqIHNjb3Jlcy5tYWNkICtcbiAgICAgICAgICAgIDAuMDQgKiBzY29yZXMucnNpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW5hbHl6ZXMgRU1BIHRyZW5kcyB0byBkZXRlY3QgcG90ZW50aWFsIGZ1bmRhbWVudGFsIGNvbmNlcm5zXG4gICAgICovXG4gICAgc3RhdGljIGFuYWx5emVFTUFUcmVuZHMocHJpY2UsIGVtYSkge1xuICAgICAgICBjb25zdCBjb25jZXJucyA9IFtdO1xuICAgICAgICBsZXQgYmVhcmlzaFNpZ25hbHMgPSAwO1xuICAgICAgICBsZXQgYnVsbGlzaFNpZ25hbHMgPSAwO1xuICAgICAgICBpZiAoIXByaWNlIHx8ICFlbWEuZW1hMjAgfHwgIWVtYS5lbWE1MCB8fCAhZW1hLmVtYTIwMCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpc1VuZGVyRU1BMjAwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc1VuZGVyRU1BNTA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzVW5kZXJFTUEyMDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZnVuZGFtZW50YWxDb25jZXJuczogWydFTUEgZGF0YSB1bmF2YWlsYWJsZSddLFxuICAgICAgICAgICAgICAgIHRyZW5kU3RyZW5ndGg6ICduZXV0cmFsJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc1VuZGVyRU1BMjAwID0gcHJpY2UgPCBlbWEuZW1hMjAwO1xuICAgICAgICBjb25zdCBpc1VuZGVyRU1BNTAgPSBwcmljZSA8IGVtYS5lbWE1MDtcbiAgICAgICAgY29uc3QgaXNVbmRlckVNQTIwID0gcHJpY2UgPCBlbWEuZW1hMjA7XG4gICAgICAgIC8vIEVNQTIwMCBhbmFseXNpcyAtIG1vc3QgY3JpdGljYWwgZm9yIGZ1bmRhbWVudGFsc1xuICAgICAgICBpZiAoaXNVbmRlckVNQTIwMCkge1xuICAgICAgICAgICAgY29uY2VybnMucHVzaCgnU3RvY2sgdHJhZGluZyBiZWxvdyBFTUEyMDAgLSBtYXJrZXQgbWF5IGRvdWJ0IGZ1bmRhbWVudGFscycpO1xuICAgICAgICAgICAgYmVhcmlzaFNpZ25hbHMgKz0gMjsgLy8gU3Ryb25nIGJlYXJpc2ggc2lnbmFsXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBidWxsaXNoU2lnbmFscyArPSAyOyAvLyBTdHJvbmcgYnVsbGlzaCBzaWduYWxcbiAgICAgICAgfVxuICAgICAgICAvLyBFTUE1MCBhbmFseXNpc1xuICAgICAgICBpZiAoaXNVbmRlckVNQTUwKSB7XG4gICAgICAgICAgICBjb25jZXJucy5wdXNoKCdTdG9jayBiZWxvdyBFTUE1MCAtIG1lZGl1bS10ZXJtIHRyZW5kIGlzIGJlYXJpc2gnKTtcbiAgICAgICAgICAgIGJlYXJpc2hTaWduYWxzICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBidWxsaXNoU2lnbmFscyArPSAxO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVNQTIwIGFuYWx5c2lzXG4gICAgICAgIGlmIChpc1VuZGVyRU1BMjApIHtcbiAgICAgICAgICAgIGNvbmNlcm5zLnB1c2goJ1N0b2NrIGJlbG93IEVNQTIwIC0gc2hvcnQtdGVybSBtb21lbnR1bSBpcyBuZWdhdGl2ZScpO1xuICAgICAgICAgICAgYmVhcmlzaFNpZ25hbHMgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJ1bGxpc2hTaWduYWxzICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRyZW5kIHN0cmVuZ3RoXG4gICAgICAgIGxldCB0cmVuZFN0cmVuZ3RoO1xuICAgICAgICBpZiAoYmVhcmlzaFNpZ25hbHMgPj0gMylcbiAgICAgICAgICAgIHRyZW5kU3RyZW5ndGggPSAnc3Ryb25nX2JlYXJpc2gnO1xuICAgICAgICBlbHNlIGlmIChiZWFyaXNoU2lnbmFscyA+PSAyKVxuICAgICAgICAgICAgdHJlbmRTdHJlbmd0aCA9ICdiZWFyaXNoJztcbiAgICAgICAgZWxzZSBpZiAoYnVsbGlzaFNpZ25hbHMgPj0gMylcbiAgICAgICAgICAgIHRyZW5kU3RyZW5ndGggPSAnc3Ryb25nX2J1bGxpc2gnO1xuICAgICAgICBlbHNlIGlmIChidWxsaXNoU2lnbmFscyA+PSAyKVxuICAgICAgICAgICAgdHJlbmRTdHJlbmd0aCA9ICdidWxsaXNoJztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdHJlbmRTdHJlbmd0aCA9ICduZXV0cmFsJztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzVW5kZXJFTUEyMDAsXG4gICAgICAgICAgICBpc1VuZGVyRU1BNTAsXG4gICAgICAgICAgICBpc1VuZGVyRU1BMjAsXG4gICAgICAgICAgICBmdW5kYW1lbnRhbENvbmNlcm5zOiBjb25jZXJucyxcbiAgICAgICAgICAgIHRyZW5kU3RyZW5ndGhcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiY2xhbXAiLCJEaXZpZGVuZFNjb3JlcyIsIlNjb3JlQ2FsY3VsYXRvciIsImNhbGN1bGF0ZVBheW91dFNjb3JlIiwicGF5b3V0UmF0aW8iLCJpc0Zpbml0ZSIsImNhbGN1bGF0ZUZDRkNvdmVyYWdlU2NvcmUiLCJjb3ZlcmFnZSIsIk5hTiIsImNhbGN1bGF0ZVN0cmVha1Njb3JlIiwic3RyZWFrIiwiY2FsY3VsYXRlR3Jvd3RoU2NvcmUiLCJncm93dGhSYXRlIiwieCIsImNhbGN1bGF0ZVRyZW5kU2NvcmUiLCJwcmljZSIsImVtYSIsImVtYTIwIiwiZW1hNTAiLCJlbWEyMDAiLCJzY29yZSIsIk1hdGgiLCJtYXgiLCJjYWxjdWxhdGVNQUNEU2NvcmUiLCJtYWNkIiwibWFjZExpbmUiLCJzaWduYWxMaW5lIiwiaGlzdG9ncmFtIiwiZGlmZiIsIm1pbiIsImFicyIsImNhbGN1bGF0ZVJTSVNjb3JlIiwicnNpIiwicnNpVmFsdWUiLCJjYWxjdWxhdGVEaXZpZGVuZFNjb3JlcyIsImZ1bmRhbWVudGFscyIsInNhZmVHcm93dGgiLCJxdW90ZSIsInBheW91dCIsImVwc1BheW91dFJhdGlvIiwiZmNmIiwiZmNmQ292ZXJhZ2UiLCJncm93dGgiLCJ0cmVuZCIsImNhbGN1bGF0ZVRvdGFsU2NvcmUiLCJzY29yZXMiLCJyb3VuZCIsImFuYWx5emVFTUFUcmVuZHMiLCJjb25jZXJucyIsImJlYXJpc2hTaWduYWxzIiwiYnVsbGlzaFNpZ25hbHMiLCJpc1VuZGVyRU1BMjAwIiwiaXNVbmRlckVNQTUwIiwiaXNVbmRlckVNQTIwIiwiZnVuZGFtZW50YWxDb25jZXJucyIsInRyZW5kU3RyZW5ndGgiLCJwdXNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/calculators/ScoreCalculator.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/calculators/TechnicalIndicatorCalculator.js":
/*!****************************************************************************!*\
  !*** ../../packages/core/dist/calculators/TechnicalIndicatorCalculator.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TechnicalIndicatorCalculator: () => (/* binding */ TechnicalIndicatorCalculator)\n/* harmony export */ });\nclass TechnicalIndicatorCalculator {\n    static calculateEMA(data, period) {\n        if (data.length < period) {\n            return [];\n        }\n        const ema = new Array(data.length).fill(NaN);\n        let sum = 0;\n        // Calculate the initial SMA\n        for(let i = 0; i < period; i++){\n            sum += data[i];\n        }\n        ema[period - 1] = sum / period;\n        // Calculate the EMA for the rest of the data\n        const multiplier = 2 / (period + 1);\n        for(let i = period; i < data.length; i++){\n            ema[i] = (data[i] - ema[i - 1]) * multiplier + ema[i - 1];\n        }\n        return ema;\n    }\n    /**\n     * Calculate MACD (Moving Average Convergence Divergence)\n     * @param data Array of closing prices (in chronological order, oldest first)\n     * @param fastPeriod Fast EMA period (default: 12)\n     * @param slowPeriod Slow EMA period (default: 26)\n     * @param signalPeriod Signal line EMA period (default: 9)\n     * @returns MACD data with current values\n     */ static calculateMACD(data, fastPeriod = 12, slowPeriod = 26, signalPeriod = 9) {\n        // Need at least slowPeriod + signalPeriod data points for meaningful MACD\n        const minDataPoints = slowPeriod + signalPeriod;\n        if (data.length < minDataPoints) {\n            return {\n                macdLine: null,\n                signalLine: null,\n                histogram: null\n            };\n        }\n        // Calculate fast and slow EMAs\n        const fastEMA = this.calculateEMA(data, fastPeriod);\n        const slowEMA = this.calculateEMA(data, slowPeriod);\n        // Calculate MACD line (fast EMA - slow EMA)\n        const macdLine = [];\n        for(let i = slowPeriod - 1; i < data.length; i++){\n            if (!isNaN(fastEMA[i]) && !isNaN(slowEMA[i])) {\n                macdLine.push(fastEMA[i] - slowEMA[i]);\n            }\n        }\n        // Calculate signal line (EMA of MACD line)\n        const signalEMA = this.calculateEMA(macdLine, signalPeriod);\n        // Calculate histogram (MACD line - signal line)\n        const currentMacd = macdLine.length > 0 ? macdLine[macdLine.length - 1] : null;\n        const currentSignal = signalEMA.length > 0 ? signalEMA[signalEMA.length - 1] : null;\n        const currentHistogram = currentMacd !== null && currentSignal !== null && !isNaN(currentSignal) ? currentMacd - currentSignal : null;\n        return {\n            macdLine: currentMacd,\n            signalLine: currentSignal,\n            histogram: currentHistogram\n        };\n    }\n    /**\n     * Analyze MACD signals for trading insights\n     * @param macd Current MACD data\n     * @param previousMacd Previous MACD data (optional, for trend analysis)\n     * @returns MACD analysis with signals and trend strength\n     */ static analyzeMACD(macd, previousMacd) {\n        const fundamentalConcerns = [];\n        // If no MACD data available\n        if (macd.macdLine === null || macd.signalLine === null || macd.histogram === null) {\n            fundamentalConcerns.push('MACD data unavailable');\n            return {\n                signal: 'neutral',\n                strength: 'weak',\n                crossover: 'none',\n                fundamentalConcerns\n            };\n        }\n        // Determine signal based on MACD position relative to signal line\n        let signal = 'neutral';\n        if (macd.macdLine > macd.signalLine) {\n            signal = 'bullish';\n        } else if (macd.macdLine < macd.signalLine) {\n            signal = 'bearish';\n        }\n        // Determine crossover if previous data is available\n        let crossover = 'none';\n        if (previousMacd && previousMacd.macdLine !== null && previousMacd.signalLine !== null) {\n            const wasAbove = previousMacd.macdLine > previousMacd.signalLine;\n            const isAbove = macd.macdLine > macd.signalLine;\n            if (!wasAbove && isAbove) {\n                crossover = 'bullish_crossover';\n            } else if (wasAbove && !isAbove) {\n                crossover = 'bearish_crossover';\n            }\n        }\n        // Determine strength based on histogram magnitude and distance from zero\n        let strength = 'weak';\n        const histogramAbs = Math.abs(macd.histogram);\n        const macdAbs = Math.abs(macd.macdLine);\n        if (histogramAbs > 0.5 && macdAbs > 1.0) {\n            strength = 'strong';\n        } else if (histogramAbs > 0.2 && macdAbs > 0.5) {\n            strength = 'moderate';\n        }\n        // Add fundamental concerns based on MACD analysis\n        if (signal === 'bearish' && strength === 'strong') {\n            fundamentalConcerns.push('Strong bearish MACD signal may indicate fundamental weakness');\n        }\n        if (crossover === 'bearish_crossover') {\n            fundamentalConcerns.push('Recent bearish MACD crossover suggests potential trend reversal');\n        }\n        if (macd.histogram < -0.5) {\n            fundamentalConcerns.push('MACD histogram strongly negative - momentum deteriorating');\n        }\n        return {\n            signal,\n            strength,\n            crossover,\n            fundamentalConcerns\n        };\n    }\n    /**\n     * Calculate RSI (Relative Strength Index)\n     * @param data Array of closing prices (in chronological order, oldest first)\n     * @param period RSI period (default: 14)\n     * @returns RSI data with current value\n     */ static calculateRSI(data, period = 14) {\n        // Need at least period + 1 data points for RSI calculation\n        if (data.length < period + 1) {\n            return {\n                rsi: null,\n                period\n            };\n        }\n        const gains = [];\n        const losses = [];\n        // Calculate price changes\n        for(let i = 1; i < data.length; i++){\n            const change = data[i] - data[i - 1];\n            gains.push(change > 0 ? change : 0);\n            losses.push(change < 0 ? Math.abs(change) : 0);\n        }\n        // Calculate initial averages using SMA for first period\n        let avgGain = gains.slice(0, period).reduce((sum, gain)=>sum + gain, 0) / period;\n        let avgLoss = losses.slice(0, period).reduce((sum, loss)=>sum + loss, 0) / period;\n        // Calculate subsequent averages using Wilder's smoothing method\n        for(let i = period; i < gains.length; i++){\n            avgGain = (avgGain * (period - 1) + gains[i]) / period;\n            avgLoss = (avgLoss * (period - 1) + losses[i]) / period;\n        }\n        // Calculate RSI\n        if (avgLoss === 0) {\n            return {\n                rsi: 100,\n                period\n            }; // All gains, no losses\n        }\n        const rs = avgGain / avgLoss;\n        const rsi = 100 - 100 / (1 + rs);\n        return {\n            rsi: Math.round(rsi * 100) / 100,\n            period\n        };\n    }\n    /**\n     * Analyze RSI signals for trading insights\n     * @param rsiData Current RSI data\n     * @param previousRsi Previous RSI value (optional, for trend analysis)\n     * @returns RSI analysis with signals and conditions\n     */ static analyzeRSI(rsiData, previousRsi) {\n        const fundamentalConcerns = [];\n        // If no RSI data available\n        if (rsiData.rsi === null) {\n            fundamentalConcerns.push('RSI data unavailable');\n            return {\n                signal: 'neutral',\n                strength: 'weak',\n                condition: 'normal',\n                trend: 'stable',\n                fundamentalConcerns\n            };\n        }\n        const rsi = rsiData.rsi;\n        // Determine signal based on RSI thresholds\n        let signal = 'neutral';\n        let condition = 'normal';\n        if (rsi >= 70) {\n            signal = 'overbought';\n            if (rsi >= 80) {\n                condition = 'extreme_overbought';\n            }\n        } else if (rsi <= 30) {\n            signal = 'oversold';\n            if (rsi <= 20) {\n                condition = 'extreme_oversold';\n            }\n        }\n        // Determine strength based on how extreme the RSI is\n        let strength = 'weak';\n        if (rsi >= 80 || rsi <= 20) {\n            strength = 'strong';\n        } else if (rsi >= 70 || rsi <= 30) {\n            strength = 'moderate';\n        }\n        // Determine trend if previous RSI is available\n        let trend = 'stable';\n        if (previousRsi !== undefined) {\n            const rsiChange = rsi - previousRsi;\n            if (Math.abs(rsiChange) > 2) {\n                trend = rsiChange > 0 ? 'rising' : 'falling';\n            }\n        }\n        // Add fundamental concerns based on RSI analysis\n        if (condition === 'extreme_overbought') {\n            fundamentalConcerns.push('Stock severely overbought - potential price correction ahead');\n        } else if (signal === 'overbought' && strength === 'moderate') {\n            fundamentalConcerns.push('Stock overbought - momentum may be unsustainable');\n        }\n        if (condition === 'extreme_oversold') {\n            fundamentalConcerns.push('Stock severely oversold - may indicate fundamental issues or opportunity');\n        }\n        if (rsi > 70 && trend === 'rising') {\n            fundamentalConcerns.push('RSI rising into overbought territory - consider timing of entry');\n        }\n        return {\n            signal,\n            strength,\n            condition,\n            trend,\n            fundamentalConcerns\n        };\n    }\n    static extractClosePricesFromAlphaVantage(timeSeries) {\n        const dailyData = timeSeries[\"Time Series (Daily)\"];\n        if (!dailyData) {\n            return [];\n        }\n        const dates = Object.keys(dailyData).sort((a, b)=>new Date(a).getTime() - new Date(b).getTime());\n        return dates.map((date)=>parseFloat(dailyData[date][\"4. close\"]));\n    }\n    static extractClosePricesFromYahoo(historicalPrices) {\n        // Sort by date ascending to ensure correct EMA calculation\n        const sortedPrices = historicalPrices.sort((a, b)=>a.date.getTime() - b.date.getTime());\n        return sortedPrices.map((data)=>data.close);\n    }\n    // Unified method for extracting close prices from either source\n    static extractClosePrices(data) {\n        if (!data) {\n            return [];\n        }\n        if (this.isAlphaVantageData(data)) {\n            return this.extractClosePricesFromAlphaVantage(data);\n        } else {\n            return this.extractClosePricesFromYahoo(data);\n        }\n    }\n    static isAlphaVantageData(data) {\n        return data && typeof data === 'object' && 'Time Series (Daily)' in data;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L2NhbGN1bGF0b3JzL1RlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BO0lBQ1QsT0FBT0MsYUFBYUMsSUFBSSxFQUFFQyxNQUFNLEVBQUU7UUFDOUIsSUFBSUQsS0FBS0UsTUFBTSxHQUFHRCxRQUFRO1lBQ3RCLE9BQU8sRUFBRTtRQUNiO1FBQ0EsTUFBTUUsTUFBTSxJQUFJQyxNQUFNSixLQUFLRSxNQUFNLEVBQUVHLElBQUksQ0FBQ0M7UUFDeEMsSUFBSUMsTUFBTTtRQUNWLDRCQUE0QjtRQUM1QixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSVAsUUFBUU8sSUFBSztZQUM3QkQsT0FBT1AsSUFBSSxDQUFDUSxFQUFFO1FBQ2xCO1FBQ0FMLEdBQUcsQ0FBQ0YsU0FBUyxFQUFFLEdBQUdNLE1BQU1OO1FBQ3hCLDZDQUE2QztRQUM3QyxNQUFNUSxhQUFhLElBQUtSLENBQUFBLFNBQVM7UUFDakMsSUFBSyxJQUFJTyxJQUFJUCxRQUFRTyxJQUFJUixLQUFLRSxNQUFNLEVBQUVNLElBQUs7WUFDdkNMLEdBQUcsQ0FBQ0ssRUFBRSxHQUFHLENBQUNSLElBQUksQ0FBQ1EsRUFBRSxHQUFHTCxHQUFHLENBQUNLLElBQUksRUFBRSxJQUFJQyxhQUFhTixHQUFHLENBQUNLLElBQUksRUFBRTtRQUM3RDtRQUNBLE9BQU9MO0lBQ1g7SUFDQTs7Ozs7OztLQU9DLEdBQ0QsT0FBT08sY0FBY1YsSUFBSSxFQUFFVyxhQUFhLEVBQUUsRUFBRUMsYUFBYSxFQUFFLEVBQUVDLGVBQWUsQ0FBQyxFQUFFO1FBQzNFLDBFQUEwRTtRQUMxRSxNQUFNQyxnQkFBZ0JGLGFBQWFDO1FBQ25DLElBQUliLEtBQUtFLE1BQU0sR0FBR1ksZUFBZTtZQUM3QixPQUFPO2dCQUNIQyxVQUFVO2dCQUNWQyxZQUFZO2dCQUNaQyxXQUFXO1lBQ2Y7UUFDSjtRQUNBLCtCQUErQjtRQUMvQixNQUFN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QUNoRSxPQUFPQyxtQkFBbUI3RSxJQUFJLEVBQUU7UUFDNUIsSUFBSSxDQUFDQSxNQUFNO1lBQ1AsT0FBTyxFQUFFO1FBQ2I7UUFDQSxJQUFJLElBQUksQ0FBQzhFLGtCQUFrQixDQUFDOUUsT0FBTztZQUMvQixPQUFPLElBQUksQ0FBQzJELGtDQUFrQyxDQUFDM0Q7UUFDbkQsT0FDSztZQUNELE9BQU8sSUFBSSxDQUFDeUUsMkJBQTJCLENBQUN6RTtRQUM1QztJQUNKO0lBQ0EsT0FBTzhFLG1CQUFtQjlFLElBQUksRUFBRTtRQUM1QixPQUFPQSxRQUFRLE9BQU9BLFNBQVMsWUFBWSx5QkFBeUJBO0lBQ3hFO0FBQ0oiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXJ0aW5zdGFyb3N0YS9EZXZlbG9wbWVudC92aWJlcy9kaXZ5eS9wYWNrYWdlcy9jb3JlL2Rpc3QvY2FsY3VsYXRvcnMvVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvciB7XG4gICAgc3RhdGljIGNhbGN1bGF0ZUVNQShkYXRhLCBwZXJpb2QpIHtcbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoIDwgcGVyaW9kKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW1hID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKS5maWxsKE5hTik7XG4gICAgICAgIGxldCBzdW0gPSAwO1xuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGluaXRpYWwgU01BXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGVyaW9kOyBpKyspIHtcbiAgICAgICAgICAgIHN1bSArPSBkYXRhW2ldO1xuICAgICAgICB9XG4gICAgICAgIGVtYVtwZXJpb2QgLSAxXSA9IHN1bSAvIHBlcmlvZDtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBFTUEgZm9yIHRoZSByZXN0IG9mIHRoZSBkYXRhXG4gICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSAyIC8gKHBlcmlvZCArIDEpO1xuICAgICAgICBmb3IgKGxldCBpID0gcGVyaW9kOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZW1hW2ldID0gKGRhdGFbaV0gLSBlbWFbaSAtIDFdKSAqIG11bHRpcGxpZXIgKyBlbWFbaSAtIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbWE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBNQUNEIChNb3ZpbmcgQXZlcmFnZSBDb252ZXJnZW5jZSBEaXZlcmdlbmNlKVxuICAgICAqIEBwYXJhbSBkYXRhIEFycmF5IG9mIGNsb3NpbmcgcHJpY2VzIChpbiBjaHJvbm9sb2dpY2FsIG9yZGVyLCBvbGRlc3QgZmlyc3QpXG4gICAgICogQHBhcmFtIGZhc3RQZXJpb2QgRmFzdCBFTUEgcGVyaW9kIChkZWZhdWx0OiAxMilcbiAgICAgKiBAcGFyYW0gc2xvd1BlcmlvZCBTbG93IEVNQSBwZXJpb2QgKGRlZmF1bHQ6IDI2KVxuICAgICAqIEBwYXJhbSBzaWduYWxQZXJpb2QgU2lnbmFsIGxpbmUgRU1BIHBlcmlvZCAoZGVmYXVsdDogOSlcbiAgICAgKiBAcmV0dXJucyBNQUNEIGRhdGEgd2l0aCBjdXJyZW50IHZhbHVlc1xuICAgICAqL1xuICAgIHN0YXRpYyBjYWxjdWxhdGVNQUNEKGRhdGEsIGZhc3RQZXJpb2QgPSAxMiwgc2xvd1BlcmlvZCA9IDI2LCBzaWduYWxQZXJpb2QgPSA5KSB7XG4gICAgICAgIC8vIE5lZWQgYXQgbGVhc3Qgc2xvd1BlcmlvZCArIHNpZ25hbFBlcmlvZCBkYXRhIHBvaW50cyBmb3IgbWVhbmluZ2Z1bCBNQUNEXG4gICAgICAgIGNvbnN0IG1pbkRhdGFQb2ludHMgPSBzbG93UGVyaW9kICsgc2lnbmFsUGVyaW9kO1xuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPCBtaW5EYXRhUG9pbnRzKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1hY2RMaW5lOiBudWxsLFxuICAgICAgICAgICAgICAgIHNpZ25hbExpbmU6IG51bGwsXG4gICAgICAgICAgICAgICAgaGlzdG9ncmFtOiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIENhbGN1bGF0ZSBmYXN0IGFuZCBzbG93IEVNQXNcbiAgICAgICAgY29uc3QgZmFzdEVNQSA9IHRoaXMuY2FsY3VsYXRlRU1BKGRhdGEsIGZhc3RQZXJpb2QpO1xuICAgICAgICBjb25zdCBzbG93RU1BID0gdGhpcy5jYWxjdWxhdGVFTUEoZGF0YSwgc2xvd1BlcmlvZCk7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBNQUNEIGxpbmUgKGZhc3QgRU1BIC0gc2xvdyBFTUEpXG4gICAgICAgIGNvbnN0IG1hY2RMaW5lID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSBzbG93UGVyaW9kIC0gMTsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4oZmFzdEVNQVtpXSkgJiYgIWlzTmFOKHNsb3dFTUFbaV0pKSB7XG4gICAgICAgICAgICAgICAgbWFjZExpbmUucHVzaChmYXN0RU1BW2ldIC0gc2xvd0VNQVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHNpZ25hbCBsaW5lIChFTUEgb2YgTUFDRCBsaW5lKVxuICAgICAgICBjb25zdCBzaWduYWxFTUEgPSB0aGlzLmNhbGN1bGF0ZUVNQShtYWNkTGluZSwgc2lnbmFsUGVyaW9kKTtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGhpc3RvZ3JhbSAoTUFDRCBsaW5lIC0gc2lnbmFsIGxpbmUpXG4gICAgICAgIGNvbnN0IGN1cnJlbnRNYWNkID0gbWFjZExpbmUubGVuZ3RoID4gMCA/IG1hY2RMaW5lW21hY2RMaW5lLmxlbmd0aCAtIDFdIDogbnVsbDtcbiAgICAgICAgY29uc3QgY3VycmVudFNpZ25hbCA9IHNpZ25hbEVNQS5sZW5ndGggPiAwID8gc2lnbmFsRU1BW3NpZ25hbEVNQS5sZW5ndGggLSAxXSA6IG51bGw7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRIaXN0b2dyYW0gPSAoY3VycmVudE1hY2QgIT09IG51bGwgJiYgY3VycmVudFNpZ25hbCAhPT0gbnVsbCAmJiAhaXNOYU4oY3VycmVudFNpZ25hbCkpXG4gICAgICAgICAgICA/IGN1cnJlbnRNYWNkIC0gY3VycmVudFNpZ25hbFxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWFjZExpbmU6IGN1cnJlbnRNYWNkLFxuICAgICAgICAgICAgc2lnbmFsTGluZTogY3VycmVudFNpZ25hbCxcbiAgICAgICAgICAgIGhpc3RvZ3JhbTogY3VycmVudEhpc3RvZ3JhbVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbmFseXplIE1BQ0Qgc2lnbmFscyBmb3IgdHJhZGluZyBpbnNpZ2h0c1xuICAgICAqIEBwYXJhbSBtYWNkIEN1cnJlbnQgTUFDRCBkYXRhXG4gICAgICogQHBhcmFtIHByZXZpb3VzTWFjZCBQcmV2aW91cyBNQUNEIGRhdGEgKG9wdGlvbmFsLCBmb3IgdHJlbmQgYW5hbHlzaXMpXG4gICAgICogQHJldHVybnMgTUFDRCBhbmFseXNpcyB3aXRoIHNpZ25hbHMgYW5kIHRyZW5kIHN0cmVuZ3RoXG4gICAgICovXG4gICAgc3RhdGljIGFuYWx5emVNQUNEKG1hY2QsIHByZXZpb3VzTWFjZCkge1xuICAgICAgICBjb25zdCBmdW5kYW1lbnRhbENvbmNlcm5zID0gW107XG4gICAgICAgIC8vIElmIG5vIE1BQ0QgZGF0YSBhdmFpbGFibGVcbiAgICAgICAgaWYgKG1hY2QubWFjZExpbmUgPT09IG51bGwgfHwgbWFjZC5zaWduYWxMaW5lID09PSBudWxsIHx8IG1hY2QuaGlzdG9ncmFtID09PSBudWxsKSB7XG4gICAgICAgICAgICBmdW5kYW1lbnRhbENvbmNlcm5zLnB1c2goJ01BQ0QgZGF0YSB1bmF2YWlsYWJsZScpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzaWduYWw6ICduZXV0cmFsJyxcbiAgICAgICAgICAgICAgICBzdHJlbmd0aDogJ3dlYWsnLFxuICAgICAgICAgICAgICAgIGNyb3Nzb3ZlcjogJ25vbmUnLFxuICAgICAgICAgICAgICAgIGZ1bmRhbWVudGFsQ29uY2VybnNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHNpZ25hbCBiYXNlZCBvbiBNQUNEIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHNpZ25hbCBsaW5lXG4gICAgICAgIGxldCBzaWduYWwgPSAnbmV1dHJhbCc7XG4gICAgICAgIGlmIChtYWNkLm1hY2RMaW5lID4gbWFjZC5zaWduYWxMaW5lKSB7XG4gICAgICAgICAgICBzaWduYWwgPSAnYnVsbGlzaCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWFjZC5tYWNkTGluZSA8IG1hY2Quc2lnbmFsTGluZSkge1xuICAgICAgICAgICAgc2lnbmFsID0gJ2JlYXJpc2gnO1xuICAgICAgICB9XG4gICAgICAgIC8vIERldGVybWluZSBjcm9zc292ZXIgaWYgcHJldmlvdXMgZGF0YSBpcyBhdmFpbGFibGVcbiAgICAgICAgbGV0IGNyb3Nzb3ZlciA9ICdub25lJztcbiAgICAgICAgaWYgKHByZXZpb3VzTWFjZCAmJiBwcmV2aW91c01hY2QubWFjZExpbmUgIT09IG51bGwgJiYgcHJldmlvdXNNYWNkLnNpZ25hbExpbmUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHdhc0Fib3ZlID0gcHJldmlvdXNNYWNkLm1hY2RMaW5lID4gcHJldmlvdXNNYWNkLnNpZ25hbExpbmU7XG4gICAgICAgICAgICBjb25zdCBpc0Fib3ZlID0gbWFjZC5tYWNkTGluZSA+IG1hY2Quc2lnbmFsTGluZTtcbiAgICAgICAgICAgIGlmICghd2FzQWJvdmUgJiYgaXNBYm92ZSkge1xuICAgICAgICAgICAgICAgIGNyb3Nzb3ZlciA9ICdidWxsaXNoX2Nyb3Nzb3Zlcic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh3YXNBYm92ZSAmJiAhaXNBYm92ZSkge1xuICAgICAgICAgICAgICAgIGNyb3Nzb3ZlciA9ICdiZWFyaXNoX2Nyb3Nzb3Zlcic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHN0cmVuZ3RoIGJhc2VkIG9uIGhpc3RvZ3JhbSBtYWduaXR1ZGUgYW5kIGRpc3RhbmNlIGZyb20gemVyb1xuICAgICAgICBsZXQgc3RyZW5ndGggPSAnd2Vhayc7XG4gICAgICAgIGNvbnN0IGhpc3RvZ3JhbUFicyA9IE1hdGguYWJzKG1hY2QuaGlzdG9ncmFtKTtcbiAgICAgICAgY29uc3QgbWFjZEFicyA9IE1hdGguYWJzKG1hY2QubWFjZExpbmUpO1xuICAgICAgICBpZiAoaGlzdG9ncmFtQWJzID4gMC41ICYmIG1hY2RBYnMgPiAxLjApIHtcbiAgICAgICAgICAgIHN0cmVuZ3RoID0gJ3N0cm9uZyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGlzdG9ncmFtQWJzID4gMC4yICYmIG1hY2RBYnMgPiAwLjUpIHtcbiAgICAgICAgICAgIHN0cmVuZ3RoID0gJ21vZGVyYXRlJztcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgZnVuZGFtZW50YWwgY29uY2VybnMgYmFzZWQgb24gTUFDRCBhbmFseXNpc1xuICAgICAgICBpZiAoc2lnbmFsID09PSAnYmVhcmlzaCcgJiYgc3RyZW5ndGggPT09ICdzdHJvbmcnKSB7XG4gICAgICAgICAgICBmdW5kYW1lbnRhbENvbmNlcm5zLnB1c2goJ1N0cm9uZyBiZWFyaXNoIE1BQ0Qgc2lnbmFsIG1heSBpbmRpY2F0ZSBmdW5kYW1lbnRhbCB3ZWFrbmVzcycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjcm9zc292ZXIgPT09ICdiZWFyaXNoX2Nyb3Nzb3ZlcicpIHtcbiAgICAgICAgICAgIGZ1bmRhbWVudGFsQ29uY2VybnMucHVzaCgnUmVjZW50IGJlYXJpc2ggTUFDRCBjcm9zc292ZXIgc3VnZ2VzdHMgcG90ZW50aWFsIHRyZW5kIHJldmVyc2FsJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hY2QuaGlzdG9ncmFtIDwgLTAuNSkge1xuICAgICAgICAgICAgZnVuZGFtZW50YWxDb25jZXJucy5wdXNoKCdNQUNEIGhpc3RvZ3JhbSBzdHJvbmdseSBuZWdhdGl2ZSAtIG1vbWVudHVtIGRldGVyaW9yYXRpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICAgICAgc3RyZW5ndGgsXG4gICAgICAgICAgICBjcm9zc292ZXIsXG4gICAgICAgICAgICBmdW5kYW1lbnRhbENvbmNlcm5zXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBSU0kgKFJlbGF0aXZlIFN0cmVuZ3RoIEluZGV4KVxuICAgICAqIEBwYXJhbSBkYXRhIEFycmF5IG9mIGNsb3NpbmcgcHJpY2VzIChpbiBjaHJvbm9sb2dpY2FsIG9yZGVyLCBvbGRlc3QgZmlyc3QpXG4gICAgICogQHBhcmFtIHBlcmlvZCBSU0kgcGVyaW9kIChkZWZhdWx0OiAxNClcbiAgICAgKiBAcmV0dXJucyBSU0kgZGF0YSB3aXRoIGN1cnJlbnQgdmFsdWVcbiAgICAgKi9cbiAgICBzdGF0aWMgY2FsY3VsYXRlUlNJKGRhdGEsIHBlcmlvZCA9IDE0KSB7XG4gICAgICAgIC8vIE5lZWQgYXQgbGVhc3QgcGVyaW9kICsgMSBkYXRhIHBvaW50cyBmb3IgUlNJIGNhbGN1bGF0aW9uXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCA8IHBlcmlvZCArIDEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcnNpOiBudWxsLFxuICAgICAgICAgICAgICAgIHBlcmlvZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBnYWlucyA9IFtdO1xuICAgICAgICBjb25zdCBsb3NzZXMgPSBbXTtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHByaWNlIGNoYW5nZXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFuZ2UgPSBkYXRhW2ldIC0gZGF0YVtpIC0gMV07XG4gICAgICAgICAgICBnYWlucy5wdXNoKGNoYW5nZSA+IDAgPyBjaGFuZ2UgOiAwKTtcbiAgICAgICAgICAgIGxvc3Nlcy5wdXNoKGNoYW5nZSA8IDAgPyBNYXRoLmFicyhjaGFuZ2UpIDogMCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2FsY3VsYXRlIGluaXRpYWwgYXZlcmFnZXMgdXNpbmcgU01BIGZvciBmaXJzdCBwZXJpb2RcbiAgICAgICAgbGV0IGF2Z0dhaW4gPSBnYWlucy5zbGljZSgwLCBwZXJpb2QpLnJlZHVjZSgoc3VtLCBnYWluKSA9PiBzdW0gKyBnYWluLCAwKSAvIHBlcmlvZDtcbiAgICAgICAgbGV0IGF2Z0xvc3MgPSBsb3NzZXMuc2xpY2UoMCwgcGVyaW9kKS5yZWR1Y2UoKHN1bSwgbG9zcykgPT4gc3VtICsgbG9zcywgMCkgLyBwZXJpb2Q7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBzdWJzZXF1ZW50IGF2ZXJhZ2VzIHVzaW5nIFdpbGRlcidzIHNtb290aGluZyBtZXRob2RcbiAgICAgICAgZm9yIChsZXQgaSA9IHBlcmlvZDsgaSA8IGdhaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhdmdHYWluID0gKChhdmdHYWluICogKHBlcmlvZCAtIDEpKSArIGdhaW5zW2ldKSAvIHBlcmlvZDtcbiAgICAgICAgICAgIGF2Z0xvc3MgPSAoKGF2Z0xvc3MgKiAocGVyaW9kIC0gMSkpICsgbG9zc2VzW2ldKSAvIHBlcmlvZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYWxjdWxhdGUgUlNJXG4gICAgICAgIGlmIChhdmdMb3NzID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4geyByc2k6IDEwMCwgcGVyaW9kIH07IC8vIEFsbCBnYWlucywgbm8gbG9zc2VzXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnMgPSBhdmdHYWluIC8gYXZnTG9zcztcbiAgICAgICAgY29uc3QgcnNpID0gMTAwIC0gKDEwMCAvICgxICsgcnMpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJzaTogTWF0aC5yb3VuZChyc2kgKiAxMDApIC8gMTAwLCAvLyBSb3VuZCB0byAyIGRlY2ltYWwgcGxhY2VzXG4gICAgICAgICAgICBwZXJpb2RcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW5hbHl6ZSBSU0kgc2lnbmFscyBmb3IgdHJhZGluZyBpbnNpZ2h0c1xuICAgICAqIEBwYXJhbSByc2lEYXRhIEN1cnJlbnQgUlNJIGRhdGFcbiAgICAgKiBAcGFyYW0gcHJldmlvdXNSc2kgUHJldmlvdXMgUlNJIHZhbHVlIChvcHRpb25hbCwgZm9yIHRyZW5kIGFuYWx5c2lzKVxuICAgICAqIEByZXR1cm5zIFJTSSBhbmFseXNpcyB3aXRoIHNpZ25hbHMgYW5kIGNvbmRpdGlvbnNcbiAgICAgKi9cbiAgICBzdGF0aWMgYW5hbHl6ZVJTSShyc2lEYXRhLCBwcmV2aW91c1JzaSkge1xuICAgICAgICBjb25zdCBmdW5kYW1lbnRhbENvbmNlcm5zID0gW107XG4gICAgICAgIC8vIElmIG5vIFJTSSBkYXRhIGF2YWlsYWJsZVxuICAgICAgICBpZiAocnNpRGF0YS5yc2kgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGZ1bmRhbWVudGFsQ29uY2VybnMucHVzaCgnUlNJIGRhdGEgdW5hdmFpbGFibGUnKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc2lnbmFsOiAnbmV1dHJhbCcsXG4gICAgICAgICAgICAgICAgc3RyZW5ndGg6ICd3ZWFrJyxcbiAgICAgICAgICAgICAgICBjb25kaXRpb246ICdub3JtYWwnLFxuICAgICAgICAgICAgICAgIHRyZW5kOiAnc3RhYmxlJyxcbiAgICAgICAgICAgICAgICBmdW5kYW1lbnRhbENvbmNlcm5zXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJzaSA9IHJzaURhdGEucnNpO1xuICAgICAgICAvLyBEZXRlcm1pbmUgc2lnbmFsIGJhc2VkIG9uIFJTSSB0aHJlc2hvbGRzXG4gICAgICAgIGxldCBzaWduYWwgPSAnbmV1dHJhbCc7XG4gICAgICAgIGxldCBjb25kaXRpb24gPSAnbm9ybWFsJztcbiAgICAgICAgaWYgKHJzaSA+PSA3MCkge1xuICAgICAgICAgICAgc2lnbmFsID0gJ292ZXJib3VnaHQnO1xuICAgICAgICAgICAgaWYgKHJzaSA+PSA4MCkge1xuICAgICAgICAgICAgICAgIGNvbmRpdGlvbiA9ICdleHRyZW1lX292ZXJib3VnaHQnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJzaSA8PSAzMCkge1xuICAgICAgICAgICAgc2lnbmFsID0gJ292ZXJzb2xkJztcbiAgICAgICAgICAgIGlmIChyc2kgPD0gMjApIHtcbiAgICAgICAgICAgICAgICBjb25kaXRpb24gPSAnZXh0cmVtZV9vdmVyc29sZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHN0cmVuZ3RoIGJhc2VkIG9uIGhvdyBleHRyZW1lIHRoZSBSU0kgaXNcbiAgICAgICAgbGV0IHN0cmVuZ3RoID0gJ3dlYWsnO1xuICAgICAgICBpZiAocnNpID49IDgwIHx8IHJzaSA8PSAyMCkge1xuICAgICAgICAgICAgc3RyZW5ndGggPSAnc3Ryb25nJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyc2kgPj0gNzAgfHwgcnNpIDw9IDMwKSB7XG4gICAgICAgICAgICBzdHJlbmd0aCA9ICdtb2RlcmF0ZSc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRyZW5kIGlmIHByZXZpb3VzIFJTSSBpcyBhdmFpbGFibGVcbiAgICAgICAgbGV0IHRyZW5kID0gJ3N0YWJsZSc7XG4gICAgICAgIGlmIChwcmV2aW91c1JzaSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCByc2lDaGFuZ2UgPSByc2kgLSBwcmV2aW91c1JzaTtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhyc2lDaGFuZ2UpID4gMikgeyAvLyBTaWduaWZpY2FudCBjaGFuZ2UgdGhyZXNob2xkXG4gICAgICAgICAgICAgICAgdHJlbmQgPSByc2lDaGFuZ2UgPiAwID8gJ3Jpc2luZycgOiAnZmFsbGluZyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIGZ1bmRhbWVudGFsIGNvbmNlcm5zIGJhc2VkIG9uIFJTSSBhbmFseXNpc1xuICAgICAgICBpZiAoY29uZGl0aW9uID09PSAnZXh0cmVtZV9vdmVyYm91Z2h0Jykge1xuICAgICAgICAgICAgZnVuZGFtZW50YWxDb25jZXJucy5wdXNoKCdTdG9jayBzZXZlcmVseSBvdmVyYm91Z2h0IC0gcG90ZW50aWFsIHByaWNlIGNvcnJlY3Rpb24gYWhlYWQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaWduYWwgPT09ICdvdmVyYm91Z2h0JyAmJiBzdHJlbmd0aCA9PT0gJ21vZGVyYXRlJykge1xuICAgICAgICAgICAgZnVuZGFtZW50YWxDb25jZXJucy5wdXNoKCdTdG9jayBvdmVyYm91Z2h0IC0gbW9tZW50dW0gbWF5IGJlIHVuc3VzdGFpbmFibGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZGl0aW9uID09PSAnZXh0cmVtZV9vdmVyc29sZCcpIHtcbiAgICAgICAgICAgIGZ1bmRhbWVudGFsQ29uY2VybnMucHVzaCgnU3RvY2sgc2V2ZXJlbHkgb3ZlcnNvbGQgLSBtYXkgaW5kaWNhdGUgZnVuZGFtZW50YWwgaXNzdWVzIG9yIG9wcG9ydHVuaXR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJzaSA+IDcwICYmIHRyZW5kID09PSAncmlzaW5nJykge1xuICAgICAgICAgICAgZnVuZGFtZW50YWxDb25jZXJucy5wdXNoKCdSU0kgcmlzaW5nIGludG8gb3ZlcmJvdWdodCB0ZXJyaXRvcnkgLSBjb25zaWRlciB0aW1pbmcgb2YgZW50cnknKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICAgICAgc3RyZW5ndGgsXG4gICAgICAgICAgICBjb25kaXRpb24sXG4gICAgICAgICAgICB0cmVuZCxcbiAgICAgICAgICAgIGZ1bmRhbWVudGFsQ29uY2VybnNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIGV4dHJhY3RDbG9zZVByaWNlc0Zyb21BbHBoYVZhbnRhZ2UodGltZVNlcmllcykge1xuICAgICAgICBjb25zdCBkYWlseURhdGEgPSB0aW1lU2VyaWVzW1wiVGltZSBTZXJpZXMgKERhaWx5KVwiXTtcbiAgICAgICAgaWYgKCFkYWlseURhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRlcyA9IE9iamVjdC5rZXlzKGRhaWx5RGF0YSkuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYikuZ2V0VGltZSgpKTtcbiAgICAgICAgcmV0dXJuIGRhdGVzLm1hcChkYXRlID0+IHBhcnNlRmxvYXQoZGFpbHlEYXRhW2RhdGVdW1wiNC4gY2xvc2VcIl0pKTtcbiAgICB9XG4gICAgc3RhdGljIGV4dHJhY3RDbG9zZVByaWNlc0Zyb21ZYWhvbyhoaXN0b3JpY2FsUHJpY2VzKSB7XG4gICAgICAgIC8vIFNvcnQgYnkgZGF0ZSBhc2NlbmRpbmcgdG8gZW5zdXJlIGNvcnJlY3QgRU1BIGNhbGN1bGF0aW9uXG4gICAgICAgIGNvbnN0IHNvcnRlZFByaWNlcyA9IGhpc3RvcmljYWxQcmljZXMuc29ydCgoYSwgYikgPT4gYS5kYXRlLmdldFRpbWUoKSAtIGIuZGF0ZS5nZXRUaW1lKCkpO1xuICAgICAgICByZXR1cm4gc29ydGVkUHJpY2VzLm1hcChkYXRhID0+IGRhdGEuY2xvc2UpO1xuICAgIH1cbiAgICAvLyBVbmlmaWVkIG1ldGhvZCBmb3IgZXh0cmFjdGluZyBjbG9zZSBwcmljZXMgZnJvbSBlaXRoZXIgc291cmNlXG4gICAgc3RhdGljIGV4dHJhY3RDbG9zZVByaWNlcyhkYXRhKSB7XG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzQWxwaGFWYW50YWdlRGF0YShkYXRhKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdENsb3NlUHJpY2VzRnJvbUFscGhhVmFudGFnZShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RDbG9zZVByaWNlc0Zyb21ZYWhvbyhkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgaXNBbHBoYVZhbnRhZ2VEYXRhKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmICdUaW1lIFNlcmllcyAoRGFpbHkpJyBpbiBkYXRhO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJUZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yIiwiY2FsY3VsYXRlRU1BIiwiZGF0YSIsInBlcmlvZCIsImxlbmd0aCIsImVtYSIsIkFycmF5IiwiZmlsbCIsIk5hTiIsInN1bSIsImkiLCJtdWx0aXBsaWVyIiwiY2FsY3VsYXRlTUFDRCIsImZhc3RQZXJpb2QiLCJzbG93UGVyaW9kIiwic2lnbmFsUGVyaW9kIiwibWluRGF0YVBvaW50cyIsIm1hY2RMaW5lIiwic2lnbmFsTGluZSIsImhpc3RvZ3JhbSIsImZhc3RFTUEiLCJzbG93RU1BIiwiaXNOYU4iLCJwdXNoIiwic2lnbmFsRU1BIiwiY3VycmVudE1hY2QiLCJjdXJyZW50U2lnbmFsIiwiY3VycmVudEhpc3RvZ3JhbSIsImFuYWx5emVNQUNEIiwibWFjZCIsInByZXZpb3VzTWFjZCIsImZ1bmRhbWVudGFsQ29uY2VybnMiLCJzaWduYWwiLCJzdHJlbmd0aCIsImNyb3Nzb3ZlciIsIndhc0Fib3ZlIiwiaXNBYm92ZSIsImhpc3RvZ3JhbUFicyIsIk1hdGgiLCJhYnMiLCJtYWNkQWJzIiwiY2FsY3VsYXRlUlNJIiwicnNpIiwiZ2FpbnMiLCJsb3NzZXMiLCJjaGFuZ2UiLCJhdmdHYWluIiwic2xpY2UiLCJyZWR1Y2UiLCJnYWluIiwiYXZnTG9zcyIsImxvc3MiLCJycyIsInJvdW5kIiwiYW5hbHl6ZVJTSSIsInJzaURhdGEiLCJwcmV2aW91c1JzaSIsImNvbmRpdGlvbiIsInRyZW5kIiwidW5kZWZpbmVkIiwicnNpQ2hhbmdlIiwiZXh0cmFjdENsb3NlUHJpY2VzRnJvbUFscGhhVmFudGFnZSIsInRpbWVTZXJpZXMiLCJkYWlseURhdGEiLCJkYXRlcyIsIk9iamVjdCIsImtleXMiLCJzb3J0IiwiYSIsImIiLCJEYXRlIiwiZ2V0VGltZSIsIm1hcCIsImRhdGUiLCJwYXJzZUZsb2F0IiwiZXh0cmFjdENsb3NlUHJpY2VzRnJvbVlhaG9vIiwiaGlzdG9yaWNhbFByaWNlcyIsInNvcnRlZFByaWNlcyIsImNsb3NlIiwiZXh0cmFjdENsb3NlUHJpY2VzIiwiaXNBbHBoYVZhbnRhZ2VEYXRhIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/calculators/TechnicalIndicatorCalculator.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/cli/DivvyCliApp.js":
/*!***************************************************!*\
  !*** ../../packages/core/dist/cli/DivvyCliApp.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DivvyCliApp: () => (/* binding */ DivvyCliApp)\n/* harmony export */ });\n/* harmony import */ var commander__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! commander */ \"(rsc)/../../node_modules/commander/esm.mjs\");\n/* harmony import */ var _services_DividendAnalysisService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/DividendAnalysisService.js */ \"(rsc)/../../packages/core/dist/services/DividendAnalysisService.js\");\n/* harmony import */ var _calculators_DividendCalculator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../calculators/DividendCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/DividendCalculator.js\");\n/* harmony import */ var _formatters_OutputFormatter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../formatters/OutputFormatter.js */ \"(rsc)/../../packages/core/dist/formatters/OutputFormatter.js\");\n/* harmony import */ var _formatters_ErrorFormatter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../formatters/ErrorFormatter.js */ \"(rsc)/../../packages/core/dist/formatters/ErrorFormatter.js\");\n/* harmony import */ var _validation_InputValidator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../validation/InputValidator.js */ \"(rsc)/../../packages/core/dist/validation/InputValidator.js\");\n/* harmony import */ var _services_FallbackDataProvider_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/FallbackDataProvider.js */ \"(rsc)/../../packages/core/dist/services/FallbackDataProvider.js\");\n/* harmony import */ var _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../errors/DivvyErrors.js */ \"(rsc)/../../packages/core/dist/errors/DivvyErrors.js\");\n\n\n\n\n\n\n\n\nclass DivvyCliApp {\n    constructor(){\n        this.analysisService = new _services_DividendAnalysisService_js__WEBPACK_IMPORTED_MODULE_1__.DividendAnalysisService();\n        this.program = new commander__WEBPACK_IMPORTED_MODULE_0__.Command();\n        this.setupCommander();\n    }\n    setupCommander() {\n        this.program.name(\"divvy\").description(\"Estimate dividend yield potential for a stock (free data). Results are automatically saved to database.\").argument(\"<ticker>\", \"Stock ticker symbol, e.g. AAPL\").option(\"-y, --years <n>\", \"Years of dividend history to fetch\", \"15\").option(\"--r <pct>\", \"Required return for optional DDM output (e.g. 0.09)\", \"0.09\").option(\"--provider <name>\", \"Data provider: yahoo, av, or auto\", \"yahoo\").option(\"--no-save\", \"Skip saving analysis results to database\").option(\"--force-fresh\", \"Force fresh analysis, bypass 24h cache\").option(\"--verbose\", \"Show detailed data quality information\").option(\"--no-warnings\", \"Suppress warning messages\").version(\"1.0.0\").helpOption(\"-h, --help\", \"Display help for command\");\n    }\n    parseArguments() {\n        this.program.parse(process.argv);\n        const options = this.program.opts();\n        // Validate arguments exist\n        if (this.program.args.length === 0) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_7__.ValidationError('Ticker symbol is required. Usage: divvy <TICKER>', 'ticker');\n        }\n        // Validate ticker\n        const ticker = _validation_InputValidator_js__WEBPACK_IMPORTED_MODULE_5__.InputValidator.validateTicker(this.program.args[0]);\n        // Validate years\n        const years = _validation_InputValidator_js__WEBPACK_IMPORTED_MODULE_5__.InputValidator.validateYears(options.years);\n        // Validate required return\n        const requiredReturn = _validation_InputValidator_js__WEBPACK_IMPORTED_MODULE_5__.InputValidator.validateRequiredReturn(options.r);\n        // Validate provider\n        const provider = _validation_InputValidator_js__WEBPACK_IMPORTED_MODULE_5__.InputValidator.validateProvider(options.provider);\n        // Validate all options together\n        _validation_InputValidator_js__WEBPACK_IMPORTED_MODULE_5__.InputValidator.validateCommanderOptions(options);\n        return {\n            ticker,\n            years,\n            requiredReturn,\n            provider\n        };\n    }\n    async run() {\n        try {\n            // Health check (optional)\n            if (true) {\n                const healthCheck = await this.analysisService.healthCheck();\n                if (!healthCheck.available && healthCheck.error) {\n                    console.warn(`  Data source warning: ${healthCheck.error}`);\n                    console.warn('   Analysis will proceed but may have limited data.\\n');\n                }\n            }\n            const { ticker, years, requiredReturn, provider } = this.parseArguments();\n            const options = this.program.opts();\n            // Show progress for long operations\n            if (!options.quiet) {\n                console.log(` Analyzing ${ticker}... (${years} years of data)`);\n            }\n            const analysis = await this.analysisService.analyze(ticker, years, requiredReturn, options.save !== false, options.forceFresh, provider);\n            // Show data quality warnings if enabled\n            if (!options.noWarnings) {\n                const warnings = await this.gatherWarnings(analysis);\n                if (warnings.length > 0) {\n                    console.log(_formatters_ErrorFormatter_js__WEBPACK_IMPORTED_MODULE_4__.ErrorFormatter.formatWarnings(warnings));\n                }\n            }\n            // Show verbose data quality information\n            if (options.verbose) {\n                const qualityReport = _services_FallbackDataProvider_js__WEBPACK_IMPORTED_MODULE_6__.FallbackDataProvider.assessDataQuality(true, analysis.annualDividends.length, this.countFundamentalFields(analysis.fundamentals), 5 // total fundamental fields\n                );\n                console.log(_formatters_ErrorFormatter_js__WEBPACK_IMPORTED_MODULE_4__.ErrorFormatter.formatDataQualityReport(qualityReport.score, qualityReport.level, qualityReport.recommendations));\n            }\n            // Display main analysis\n            _formatters_OutputFormatter_js__WEBPACK_IMPORTED_MODULE_3__.OutputFormatter.formatDividendAnalysis(analysis, requiredReturn);\n            // Display Gordon Growth Model if applicable\n            const ddmPrice = _calculators_DividendCalculator_js__WEBPACK_IMPORTED_MODULE_2__.DividendCalculator.calculateGordonGrowthModel(analysis.forwardDividend, analysis.quote.price, requiredReturn, analysis.safeGrowth);\n            if (ddmPrice) {\n                _formatters_OutputFormatter_js__WEBPACK_IMPORTED_MODULE_3__.OutputFormatter.formatGordonGrowthModel(ddmPrice, analysis.quote.price, requiredReturn, analysis.safeGrowth);\n            }\n            _formatters_OutputFormatter_js__WEBPACK_IMPORTED_MODULE_3__.OutputFormatter.formatFooter();\n            // Exit successfully\n            process.exit(0);\n        } catch (error) {\n            await this.handleError(error);\n        }\n    }\n    async handleError(error) {\n        const err = error instanceof Error ? error : new Error('Unknown error occurred');\n        // Format and display the error\n        const formattedError = _formatters_ErrorFormatter_js__WEBPACK_IMPORTED_MODULE_4__.ErrorFormatter.formatError(err);\n        console.error(formattedError);\n        // For debugging in development\n        if ( true && err.stack) {\n            console.error('\\nStack Trace:', err.stack);\n        }\n        // Set appropriate exit code\n        let exitCode = 1;\n        if (err instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_7__.ValidationError) {\n            exitCode = 2; // Invalid input\n        } else if (err instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_7__.DivvyError && !err.isRetryable) {\n            exitCode = 3; // Permanent failure\n        }\n        // Network/retry errors use default exit code 1\n        process.exit(exitCode);\n    }\n    async gatherWarnings(analysis) {\n        const warnings = [];\n        // Check for data completeness\n        if (analysis.annualDividends.length < 5) {\n            warnings.push('Limited dividend history may affect accuracy');\n        }\n        if (!isFinite(analysis.fundamentals.epsPayoutRatio)) {\n            warnings.push('EPS payout ratio unavailable - using estimates');\n        }\n        if (!isFinite(analysis.fundamentals.fcfCoverage)) {\n            warnings.push('Free cash flow data unavailable - using estimates');\n        }\n        // Check for unusual values\n        if (analysis.streak === 0 && analysis.ttmDividends > 0) {\n            warnings.push('Recent dividend cut detected');\n        }\n        if (analysis.totalScore < 30) {\n            warnings.push('Low dividend sustainability score - exercise caution');\n        }\n        // Check EMA trends for fundamental concerns\n        if (analysis.ema && analysis.ema.ema200 && analysis.quote.price) {\n            const { ScoreCalculator } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../calculators/ScoreCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/ScoreCalculator.js\"));\n            const emaAnalysis = ScoreCalculator.analyzeEMATrends(analysis.quote.price, analysis.ema);\n            if (emaAnalysis.isUnderEMA200) {\n                warnings.push('Stock trading below EMA200 - market may doubt fundamentals');\n            }\n            if (emaAnalysis.trendStrength === 'strong_bearish' || emaAnalysis.trendStrength === 'bearish') {\n                warnings.push(`Bearish technical trend detected (${emaAnalysis.trendStrength})`);\n            }\n        }\n        // Check MACD signals for fundamental concerns\n        if (analysis.macd && (analysis.macd.macdLine !== null || analysis.macd.signalLine !== null)) {\n            const { TechnicalIndicatorCalculator } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../calculators/TechnicalIndicatorCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/TechnicalIndicatorCalculator.js\"));\n            const macdAnalysis = TechnicalIndicatorCalculator.analyzeMACD(analysis.macd);\n            // Add MACD-specific warnings\n            macdAnalysis.fundamentalConcerns.forEach((concern)=>{\n                if (concern !== 'MACD data unavailable') {\n                    warnings.push(concern);\n                }\n            });\n        }\n        // Check RSI signals for fundamental concerns\n        if (analysis.rsi && analysis.rsi.rsi !== null) {\n            const { TechnicalIndicatorCalculator } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../calculators/TechnicalIndicatorCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/TechnicalIndicatorCalculator.js\"));\n            const rsiAnalysis = TechnicalIndicatorCalculator.analyzeRSI(analysis.rsi);\n            // Add RSI-specific warnings\n            rsiAnalysis.fundamentalConcerns.forEach((concern)=>{\n                if (concern !== 'RSI data unavailable') {\n                    warnings.push(concern);\n                }\n            });\n        }\n        return warnings;\n    }\n    countFundamentalFields(fundamentals) {\n        let count = 0;\n        if (isFinite(fundamentals.operatingCashFlow)) count++;\n        if (isFinite(fundamentals.capitalExpenditure)) count++;\n        if (isFinite(fundamentals.cashDividendsPaid)) count++;\n        if (isFinite(fundamentals.netIncome)) count++;\n        if (isFinite(fundamentals.epsPayoutRatio)) count++;\n        return count;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L2NsaS9EaXZ2eUNsaUFwcC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBb0M7QUFDNkM7QUFDUDtBQUNQO0FBQ0Y7QUFDQTtBQUNVO0FBQ0o7QUFDaEUsTUFBTVM7SUFHVCxhQUFjO1FBQ1YsSUFBSSxDQUFDQyxlQUFlLEdBQUcsSUFBSVQseUZBQXVCQTtRQUNsRCxJQUFJLENBQUNVLE9BQU8sR0FBRyxJQUFJWCw4Q0FBT0E7UUFDMUIsSUFBSSxDQUFDWSxjQUFjO0lBQ3ZCO0lBQ0FBLGlCQUFpQjtRQUNiLElBQUksQ0FBQ0QsT0FBTyxDQUNQRSxJQUFJLENBQUMsU0FDTEMsV0FBVyxDQUFDLDJHQUNaQyxRQUFRLENBQUMsWUFBWSxrQ0FDckJDLE1BQU0sQ0FBQyxtQkFBbUIsc0NBQXNDLE1BQ2hFQSxNQUFNLENBQUMsYUFBYSx1REFBdUQsUUFDM0VBLE1BQU0sQ0FBQyxxQkFBcUIscUNBQXFDLFNBQ2pFQSxNQUFNLENBQUMsYUFBYSw0Q0FDcEJBLE1BQU0sQ0FBQyxpQkFBaUIsMENBQ3hCQSxNQUFNLENBQUMsYUFBYSwwQ0FDcEJBLE1BQU0sQ0FBQyxpQkFBaUIsNkJBQ3hCQyxPQUFPLENBQUMsU0FDUkMsVUFBVSxDQUFDLGNBQWM7SUFDbEM7SUFDQUMsaUJBQWlCO1FBQ2IsSUFBSSxDQUFDUixPQUFPLENBQUNTLEtBQUssQ0FBQ0MsUUFBUUMsSUFBSTtRQUMvQixNQUFNQyxVQUFVLElBQUksQ0FBQ1osT0FBTyxDQUFDYSxJQUFJO1FBQ2pDLDJCQUEyQjtRQUMzQixJQUFJLElBQUksQ0FBQ2IsT0FBTyxDQUFDYyxJQUFJLENBQUNDLE1BQU0sS0FBSyxHQUFHO1lBQ2hDLE1BQU0sSUFBSWxCLG1FQUFlQSxDQUFDLG9EQUFvRDtRQUNsRjtRQUNBLGtCQUFrQjtRQUNsQixNQUFNbUIsU0FBU3RCLHlFQUFjQSxDQUFDdUIsY0FBYyxDQUFDLElBQUksQ0FBQ2pCLE9BQU8sQ0FBQ2MsSUFBSSxDQUFDLEVB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QVMyRCxHQUFHLElBQUkzRCxTQUFTMkQsR0FBRyxDQUFDQSxHQUFHLEtBQUssTUFBTTtZQUMzQyxNQUFNLEVBQUVOLDRCQUE0QixFQUFFLEdBQUcsTUFBTSx3TkFBd0Q7WUFDdkcsTUFBTU8sY0FBY1AsNkJBQTZCUSxVQUFVLENBQUM3RCxTQUFTMkQsR0FBRztZQUN4RSw0QkFBNEI7WUFDNUJDLFlBQVlKLG1CQUFtQixDQUFDQyxPQUFPLENBQUNDLENBQUFBO2dCQUNwQyxJQUFJQSxZQUFZLHdCQUF3QjtvQkFDcENyRCxTQUFTK0IsSUFBSSxDQUFDc0I7Z0JBQ2xCO1lBQ0o7UUFDSjtRQUNBLE9BQU9yRDtJQUNYO0lBQ0FPLHVCQUF1QkMsWUFBWSxFQUFFO1FBQ2pDLElBQUlpRCxRQUFRO1FBQ1osSUFBSXpCLFNBQVN4QixhQUFha0QsaUJBQWlCLEdBQ3ZDRDtRQUNKLElBQUl6QixTQUFTeEIsYUFBYW1ELGtCQUFrQixHQUN4Q0Y7UUFDSixJQUFJekIsU0FBU3hCLGFBQWFvRCxpQkFBaUIsR0FDdkNIO1FBQ0osSUFBSXpCLFNBQVN4QixhQUFhcUQsU0FBUyxHQUMvQko7UUFDSixJQUFJekIsU0FBU3hCLGFBQWF5QixjQUFjLEdBQ3BDd0I7UUFDSixPQUFPQTtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXJ0aW5zdGFyb3N0YS9EZXZlbG9wbWVudC92aWJlcy9kaXZ5eS9wYWNrYWdlcy9jb3JlL2Rpc3QvY2xpL0RpdnZ5Q2xpQXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiY29tbWFuZGVyXCI7XG5pbXBvcnQgeyBEaXZpZGVuZEFuYWx5c2lzU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9EaXZpZGVuZEFuYWx5c2lzU2VydmljZS5qc1wiO1xuaW1wb3J0IHsgRGl2aWRlbmRDYWxjdWxhdG9yIH0gZnJvbSBcIi4uL2NhbGN1bGF0b3JzL0RpdmlkZW5kQ2FsY3VsYXRvci5qc1wiO1xuaW1wb3J0IHsgT3V0cHV0Rm9ybWF0dGVyIH0gZnJvbSBcIi4uL2Zvcm1hdHRlcnMvT3V0cHV0Rm9ybWF0dGVyLmpzXCI7XG5pbXBvcnQgeyBFcnJvckZvcm1hdHRlciB9IGZyb20gXCIuLi9mb3JtYXR0ZXJzL0Vycm9yRm9ybWF0dGVyLmpzXCI7XG5pbXBvcnQgeyBJbnB1dFZhbGlkYXRvciB9IGZyb20gXCIuLi92YWxpZGF0aW9uL0lucHV0VmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBGYWxsYmFja0RhdGFQcm92aWRlciB9IGZyb20gXCIuLi9zZXJ2aWNlcy9GYWxsYmFja0RhdGFQcm92aWRlci5qc1wiO1xuaW1wb3J0IHsgRGl2dnlFcnJvciwgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy9EaXZ2eUVycm9ycy5qc1wiO1xuZXhwb3J0IGNsYXNzIERpdnZ5Q2xpQXBwIHtcbiAgICBhbmFseXNpc1NlcnZpY2U7XG4gICAgcHJvZ3JhbTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hbmFseXNpc1NlcnZpY2UgPSBuZXcgRGl2aWRlbmRBbmFseXNpc1NlcnZpY2UoKTtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gbmV3IENvbW1hbmQoKTtcbiAgICAgICAgdGhpcy5zZXR1cENvbW1hbmRlcigpO1xuICAgIH1cbiAgICBzZXR1cENvbW1hbmRlcigpIHtcbiAgICAgICAgdGhpcy5wcm9ncmFtXG4gICAgICAgICAgICAubmFtZShcImRpdnZ5XCIpXG4gICAgICAgICAgICAuZGVzY3JpcHRpb24oXCJFc3RpbWF0ZSBkaXZpZGVuZCB5aWVsZCBwb3RlbnRpYWwgZm9yIGEgc3RvY2sgKGZyZWUgZGF0YSkuIFJlc3VsdHMgYXJlIGF1dG9tYXRpY2FsbHkgc2F2ZWQgdG8gZGF0YWJhc2UuXCIpXG4gICAgICAgICAgICAuYXJndW1lbnQoXCI8dGlja2VyPlwiLCBcIlN0b2NrIHRpY2tlciBzeW1ib2wsIGUuZy4gQUFQTFwiKVxuICAgICAgICAgICAgLm9wdGlvbihcIi15LCAtLXllYXJzIDxuPlwiLCBcIlllYXJzIG9mIGRpdmlkZW5kIGhpc3RvcnkgdG8gZmV0Y2hcIiwgXCIxNVwiKVxuICAgICAgICAgICAgLm9wdGlvbihcIi0tciA8cGN0PlwiLCBcIlJlcXVpcmVkIHJldHVybiBmb3Igb3B0aW9uYWwgRERNIG91dHB1dCAoZS5nLiAwLjA5KVwiLCBcIjAuMDlcIilcbiAgICAgICAgICAgIC5vcHRpb24oXCItLXByb3ZpZGVyIDxuYW1lPlwiLCBcIkRhdGEgcHJvdmlkZXI6IHlhaG9vLCBhdiwgb3IgYXV0b1wiLCBcInlhaG9vXCIpXG4gICAgICAgICAgICAub3B0aW9uKFwiLS1uby1zYXZlXCIsIFwiU2tpcCBzYXZpbmcgYW5hbHlzaXMgcmVzdWx0cyB0byBkYXRhYmFzZVwiKVxuICAgICAgICAgICAgLm9wdGlvbihcIi0tZm9yY2UtZnJlc2hcIiwgXCJGb3JjZSBmcmVzaCBhbmFseXNpcywgYnlwYXNzIDI0aCBjYWNoZVwiKVxuICAgICAgICAgICAgLm9wdGlvbihcIi0tdmVyYm9zZVwiLCBcIlNob3cgZGV0YWlsZWQgZGF0YSBxdWFsaXR5IGluZm9ybWF0aW9uXCIpXG4gICAgICAgICAgICAub3B0aW9uKFwiLS1uby13YXJuaW5nc1wiLCBcIlN1cHByZXNzIHdhcm5pbmcgbWVzc2FnZXNcIilcbiAgICAgICAgICAgIC52ZXJzaW9uKFwiMS4wLjBcIilcbiAgICAgICAgICAgIC5oZWxwT3B0aW9uKFwiLWgsIC0taGVscFwiLCBcIkRpc3BsYXkgaGVscCBmb3IgY29tbWFuZFwiKTtcbiAgICB9XG4gICAgcGFyc2VBcmd1bWVudHMoKSB7XG4gICAgICAgIHRoaXMucHJvZ3JhbS5wYXJzZShwcm9jZXNzLmFyZ3YpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5wcm9ncmFtLm9wdHMoKTtcbiAgICAgICAgLy8gVmFsaWRhdGUgYXJndW1lbnRzIGV4aXN0XG4gICAgICAgIGlmICh0aGlzLnByb2dyYW0uYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1RpY2tlciBzeW1ib2wgaXMgcmVxdWlyZWQuIFVzYWdlOiBkaXZ2eSA8VElDS0VSPicsICd0aWNrZXInKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSB0aWNrZXJcbiAgICAgICAgY29uc3QgdGlja2VyID0gSW5wdXRWYWxpZGF0b3IudmFsaWRhdGVUaWNrZXIodGhpcy5wcm9ncmFtLmFyZ3NbMF0pO1xuICAgICAgICAvLyBWYWxpZGF0ZSB5ZWFyc1xuICAgICAgICBjb25zdCB5ZWFycyA9IElucHV0VmFsaWRhdG9yLnZhbGlkYXRlWWVhcnMob3B0aW9ucy55ZWFycyk7XG4gICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIHJldHVyblxuICAgICAgICBjb25zdCByZXF1aXJlZFJldHVybiA9IElucHV0VmFsaWRhdG9yLnZhbGlkYXRlUmVxdWlyZWRSZXR1cm4ob3B0aW9ucy5yKTtcbiAgICAgICAgLy8gVmFsaWRhdGUgcHJvdmlkZXJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBJbnB1dFZhbGlkYXRvci52YWxpZGF0ZVByb3ZpZGVyKG9wdGlvbnMucHJvdmlkZXIpO1xuICAgICAgICAvLyBWYWxpZGF0ZSBhbGwgb3B0aW9ucyB0b2dldGhlclxuICAgICAgICBJbnB1dFZhbGlkYXRvci52YWxpZGF0ZUNvbW1hbmRlck9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB7IHRpY2tlciwgeWVhcnMsIHJlcXVpcmVkUmV0dXJuLCBwcm92aWRlciB9O1xuICAgIH1cbiAgICBhc3luYyBydW4oKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBIZWFsdGggY2hlY2sgKG9wdGlvbmFsKVxuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFsdGhDaGVjayA9IGF3YWl0IHRoaXMuYW5hbHlzaXNTZXJ2aWNlLmhlYWx0aENoZWNrKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoZWFsdGhDaGVjay5hdmFpbGFibGUgJiYgaGVhbHRoQ2hlY2suZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gIERhdGEgc291cmNlIHdhcm5pbmc6ICR7aGVhbHRoQ2hlY2suZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignICAgQW5hbHlzaXMgd2lsbCBwcm9jZWVkIGJ1dCBtYXkgaGF2ZSBsaW1pdGVkIGRhdGEuXFxuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyB0aWNrZXIsIHllYXJzLCByZXF1aXJlZFJldHVybiwgcHJvdmlkZXIgfSA9IHRoaXMucGFyc2VBcmd1bWVudHMoKTtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnByb2dyYW0ub3B0cygpO1xuICAgICAgICAgICAgLy8gU2hvdyBwcm9ncmVzcyBmb3IgbG9uZyBvcGVyYXRpb25zXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMucXVpZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBBbmFseXppbmcgJHt0aWNrZXJ9Li4uICgke3llYXJzfSB5ZWFycyBvZiBkYXRhKWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCB0aGlzLmFuYWx5c2lzU2VydmljZS5hbmFseXplKHRpY2tlciwgeWVhcnMsIHJlcXVpcmVkUmV0dXJuLCBvcHRpb25zLnNhdmUgIT09IGZhbHNlLCBvcHRpb25zLmZvcmNlRnJlc2gsIHByb3ZpZGVyKTtcbiAgICAgICAgICAgIC8vIFNob3cgZGF0YSBxdWFsaXR5IHdhcm5pbmdzIGlmIGVuYWJsZWRcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5ub1dhcm5pbmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2FybmluZ3MgPSBhd2FpdCB0aGlzLmdhdGhlcldhcm5pbmdzKGFuYWx5c2lzKTtcbiAgICAgICAgICAgICAgICBpZiAod2FybmluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhFcnJvckZvcm1hdHRlci5mb3JtYXRXYXJuaW5ncyh3YXJuaW5ncykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNob3cgdmVyYm9zZSBkYXRhIHF1YWxpdHkgaW5mb3JtYXRpb25cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBxdWFsaXR5UmVwb3J0ID0gRmFsbGJhY2tEYXRhUHJvdmlkZXIuYXNzZXNzRGF0YVF1YWxpdHkodHJ1ZSwgLy8gaGFzIHByaWNlICh3ZSBnb3QgdGhpcyBmYXIpXG4gICAgICAgICAgICAgICAgYW5hbHlzaXMuYW5udWFsRGl2aWRlbmRzLmxlbmd0aCwgdGhpcy5jb3VudEZ1bmRhbWVudGFsRmllbGRzKGFuYWx5c2lzLmZ1bmRhbWVudGFscyksIDUgLy8gdG90YWwgZnVuZGFtZW50YWwgZmllbGRzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhFcnJvckZvcm1hdHRlci5mb3JtYXREYXRhUXVhbGl0eVJlcG9ydChxdWFsaXR5UmVwb3J0LnNjb3JlLCBxdWFsaXR5UmVwb3J0LmxldmVsLCBxdWFsaXR5UmVwb3J0LnJlY29tbWVuZGF0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGlzcGxheSBtYWluIGFuYWx5c2lzXG4gICAgICAgICAgICBPdXRwdXRGb3JtYXR0ZXIuZm9ybWF0RGl2aWRlbmRBbmFseXNpcyhhbmFseXNpcywgcmVxdWlyZWRSZXR1cm4pO1xuICAgICAgICAgICAgLy8gRGlzcGxheSBHb3Jkb24gR3Jvd3RoIE1vZGVsIGlmIGFwcGxpY2FibGVcbiAgICAgICAgICAgIGNvbnN0IGRkbVByaWNlID0gRGl2aWRlbmRDYWxjdWxhdG9yLmNhbGN1bGF0ZUdvcmRvbkdyb3d0aE1vZGVsKGFuYWx5c2lzLmZvcndhcmREaXZpZGVuZCwgYW5hbHlzaXMucXVvdGUucHJpY2UsIHJlcXVpcmVkUmV0dXJuLCBhbmFseXNpcy5zYWZlR3Jvd3RoKTtcbiAgICAgICAgICAgIGlmIChkZG1QcmljZSkge1xuICAgICAgICAgICAgICAgIE91dHB1dEZvcm1hdHRlci5mb3JtYXRHb3Jkb25Hcm93dGhNb2RlbChkZG1QcmljZSwgYW5hbHlzaXMucXVvdGUucHJpY2UsIHJlcXVpcmVkUmV0dXJuLCBhbmFseXNpcy5zYWZlR3Jvd3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE91dHB1dEZvcm1hdHRlci5mb3JtYXRGb290ZXIoKTtcbiAgICAgICAgICAgIC8vIEV4aXQgc3VjY2Vzc2Z1bGx5XG4gICAgICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBoYW5kbGVFcnJvcihlcnJvcikge1xuICAgICAgICBjb25zdCBlcnIgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnKTtcbiAgICAgICAgLy8gRm9ybWF0IGFuZCBkaXNwbGF5IHRoZSBlcnJvclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRFcnJvciA9IEVycm9yRm9ybWF0dGVyLmZvcm1hdEVycm9yKGVycik7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZm9ybWF0dGVkRXJyb3IpO1xuICAgICAgICAvLyBGb3IgZGVidWdnaW5nIGluIGRldmVsb3BtZW50XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiBlcnIuc3RhY2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1xcblN0YWNrIFRyYWNlOicsIGVyci5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IGFwcHJvcHJpYXRlIGV4aXQgY29kZVxuICAgICAgICBsZXQgZXhpdENvZGUgPSAxO1xuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgICAgICBleGl0Q29kZSA9IDI7IC8vIEludmFsaWQgaW5wdXRcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlcnIgaW5zdGFuY2VvZiBEaXZ2eUVycm9yICYmICFlcnIuaXNSZXRyeWFibGUpIHtcbiAgICAgICAgICAgIGV4aXRDb2RlID0gMzsgLy8gUGVybWFuZW50IGZhaWx1cmVcbiAgICAgICAgfVxuICAgICAgICAvLyBOZXR3b3JrL3JldHJ5IGVycm9ycyB1c2UgZGVmYXVsdCBleGl0IGNvZGUgMVxuICAgICAgICBwcm9jZXNzLmV4aXQoZXhpdENvZGUpO1xuICAgIH1cbiAgICBhc3luYyBnYXRoZXJXYXJuaW5ncyhhbmFseXNpcykge1xuICAgICAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgICAgICAvLyBDaGVjayBmb3IgZGF0YSBjb21wbGV0ZW5lc3NcbiAgICAgICAgaWYgKGFuYWx5c2lzLmFubnVhbERpdmlkZW5kcy5sZW5ndGggPCA1KSB7XG4gICAgICAgICAgICB3YXJuaW5ncy5wdXNoKCdMaW1pdGVkIGRpdmlkZW5kIGhpc3RvcnkgbWF5IGFmZmVjdCBhY2N1cmFjeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNGaW5pdGUoYW5hbHlzaXMuZnVuZGFtZW50YWxzLmVwc1BheW91dFJhdGlvKSkge1xuICAgICAgICAgICAgd2FybmluZ3MucHVzaCgnRVBTIHBheW91dCByYXRpbyB1bmF2YWlsYWJsZSAtIHVzaW5nIGVzdGltYXRlcycpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNGaW5pdGUoYW5hbHlzaXMuZnVuZGFtZW50YWxzLmZjZkNvdmVyYWdlKSkge1xuICAgICAgICAgICAgd2FybmluZ3MucHVzaCgnRnJlZSBjYXNoIGZsb3cgZGF0YSB1bmF2YWlsYWJsZSAtIHVzaW5nIGVzdGltYXRlcycpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGZvciB1bnVzdWFsIHZhbHVlc1xuICAgICAgICBpZiAoYW5hbHlzaXMuc3RyZWFrID09PSAwICYmIGFuYWx5c2lzLnR0bURpdmlkZW5kcyA+IDApIHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goJ1JlY2VudCBkaXZpZGVuZCBjdXQgZGV0ZWN0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5hbHlzaXMudG90YWxTY29yZSA8IDMwKSB7XG4gICAgICAgICAgICB3YXJuaW5ncy5wdXNoKCdMb3cgZGl2aWRlbmQgc3VzdGFpbmFiaWxpdHkgc2NvcmUgLSBleGVyY2lzZSBjYXV0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgRU1BIHRyZW5kcyBmb3IgZnVuZGFtZW50YWwgY29uY2VybnNcbiAgICAgICAgaWYgKGFuYWx5c2lzLmVtYSAmJiBhbmFseXNpcy5lbWEuZW1hMjAwICYmIGFuYWx5c2lzLnF1b3RlLnByaWNlKSB7XG4gICAgICAgICAgICBjb25zdCB7IFNjb3JlQ2FsY3VsYXRvciB9ID0gYXdhaXQgaW1wb3J0KCcuLi9jYWxjdWxhdG9ycy9TY29yZUNhbGN1bGF0b3IuanMnKTtcbiAgICAgICAgICAgIGNvbnN0IGVtYUFuYWx5c2lzID0gU2NvcmVDYWxjdWxhdG9yLmFuYWx5emVFTUFUcmVuZHMoYW5hbHlzaXMucXVvdGUucHJpY2UsIGFuYWx5c2lzLmVtYSk7XG4gICAgICAgICAgICBpZiAoZW1hQW5hbHlzaXMuaXNVbmRlckVNQTIwMCkge1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goJ1N0b2NrIHRyYWRpbmcgYmVsb3cgRU1BMjAwIC0gbWFya2V0IG1heSBkb3VidCBmdW5kYW1lbnRhbHMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbWFBbmFseXNpcy50cmVuZFN0cmVuZ3RoID09PSAnc3Ryb25nX2JlYXJpc2gnIHx8IGVtYUFuYWx5c2lzLnRyZW5kU3RyZW5ndGggPT09ICdiZWFyaXNoJykge1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goYEJlYXJpc2ggdGVjaG5pY2FsIHRyZW5kIGRldGVjdGVkICgke2VtYUFuYWx5c2lzLnRyZW5kU3RyZW5ndGh9KWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIE1BQ0Qgc2lnbmFscyBmb3IgZnVuZGFtZW50YWwgY29uY2VybnNcbiAgICAgICAgaWYgKGFuYWx5c2lzLm1hY2QgJiYgKGFuYWx5c2lzLm1hY2QubWFjZExpbmUgIT09IG51bGwgfHwgYW5hbHlzaXMubWFjZC5zaWduYWxMaW5lICE9PSBudWxsKSkge1xuICAgICAgICAgICAgY29uc3QgeyBUZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yIH0gPSBhd2FpdCBpbXBvcnQoJy4uL2NhbGN1bGF0b3JzL1RlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IuanMnKTtcbiAgICAgICAgICAgIGNvbnN0IG1hY2RBbmFseXNpcyA9IFRlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IuYW5hbHl6ZU1BQ0QoYW5hbHlzaXMubWFjZCk7XG4gICAgICAgICAgICAvLyBBZGQgTUFDRC1zcGVjaWZpYyB3YXJuaW5nc1xuICAgICAgICAgICAgbWFjZEFuYWx5c2lzLmZ1bmRhbWVudGFsQ29uY2VybnMuZm9yRWFjaChjb25jZXJuID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29uY2VybiAhPT0gJ01BQ0QgZGF0YSB1bmF2YWlsYWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaChjb25jZXJuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayBSU0kgc2lnbmFscyBmb3IgZnVuZGFtZW50YWwgY29uY2VybnNcbiAgICAgICAgaWYgKGFuYWx5c2lzLnJzaSAmJiBhbmFseXNpcy5yc2kucnNpICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB7IFRlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IgfSA9IGF3YWl0IGltcG9ydCgnLi4vY2FsY3VsYXRvcnMvVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvci5qcycpO1xuICAgICAgICAgICAgY29uc3QgcnNpQW5hbHlzaXMgPSBUZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yLmFuYWx5emVSU0koYW5hbHlzaXMucnNpKTtcbiAgICAgICAgICAgIC8vIEFkZCBSU0ktc3BlY2lmaWMgd2FybmluZ3NcbiAgICAgICAgICAgIHJzaUFuYWx5c2lzLmZ1bmRhbWVudGFsQ29uY2VybnMuZm9yRWFjaChjb25jZXJuID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29uY2VybiAhPT0gJ1JTSSBkYXRhIHVuYXZhaWxhYmxlJykge1xuICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKGNvbmNlcm4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3YXJuaW5ncztcbiAgICB9XG4gICAgY291bnRGdW5kYW1lbnRhbEZpZWxkcyhmdW5kYW1lbnRhbHMpIHtcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgaWYgKGlzRmluaXRlKGZ1bmRhbWVudGFscy5vcGVyYXRpbmdDYXNoRmxvdykpXG4gICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICBpZiAoaXNGaW5pdGUoZnVuZGFtZW50YWxzLmNhcGl0YWxFeHBlbmRpdHVyZSkpXG4gICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICBpZiAoaXNGaW5pdGUoZnVuZGFtZW50YWxzLmNhc2hEaXZpZGVuZHNQYWlkKSlcbiAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgIGlmIChpc0Zpbml0ZShmdW5kYW1lbnRhbHMubmV0SW5jb21lKSlcbiAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgIGlmIChpc0Zpbml0ZShmdW5kYW1lbnRhbHMuZXBzUGF5b3V0UmF0aW8pKVxuICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJDb21tYW5kIiwiRGl2aWRlbmRBbmFseXNpc1NlcnZpY2UiLCJEaXZpZGVuZENhbGN1bGF0b3IiLCJPdXRwdXRGb3JtYXR0ZXIiLCJFcnJvckZvcm1hdHRlciIsIklucHV0VmFsaWRhdG9yIiwiRmFsbGJhY2tEYXRhUHJvdmlkZXIiLCJEaXZ2eUVycm9yIiwiVmFsaWRhdGlvbkVycm9yIiwiRGl2dnlDbGlBcHAiLCJhbmFseXNpc1NlcnZpY2UiLCJwcm9ncmFtIiwic2V0dXBDb21tYW5kZXIiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJhcmd1bWVudCIsIm9wdGlvbiIsInZlcnNpb24iLCJoZWxwT3B0aW9uIiwicGFyc2VBcmd1bWVudHMiLCJwYXJzZSIsInByb2Nlc3MiLCJhcmd2Iiwib3B0aW9ucyIsIm9wdHMiLCJhcmdzIiwibGVuZ3RoIiwidGlja2VyIiwidmFsaWRhdGVUaWNrZXIiLCJ5ZWFycyIsInZhbGlkYXRlWWVhcnMiLCJyZXF1aXJlZFJldHVybiIsInZhbGlkYXRlUmVxdWlyZWRSZXR1cm4iLCJyIiwicHJvdmlkZXIiLCJ2YWxpZGF0ZVByb3ZpZGVyIiwidmFsaWRhdGVDb21tYW5kZXJPcHRpb25zIiwicnVuIiwiaGVhbHRoQ2hlY2siLCJhdmFpbGFibGUiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwicXVpZXQiLCJsb2ciLCJhbmFseXNpcyIsImFuYWx5emUiLCJzYXZlIiwiZm9yY2VGcmVzaCIsIm5vV2FybmluZ3MiLCJ3YXJuaW5ncyIsImdhdGhlcldhcm5pbmdzIiwiZm9ybWF0V2FybmluZ3MiLCJ2ZXJib3NlIiwicXVhbGl0eVJlcG9ydCIsImFzc2Vzc0RhdGFRdWFsaXR5IiwiYW5udWFsRGl2aWRlbmRzIiwiY291bnRGdW5kYW1lbnRhbEZpZWxkcyIsImZ1bmRhbWVudGFscyIsImZvcm1hdERhdGFRdWFsaXR5UmVwb3J0Iiwic2NvcmUiLCJsZXZlbCIsInJlY29tbWVuZGF0aW9ucyIsImZvcm1hdERpdmlkZW5kQW5hbHlzaXMiLCJkZG1QcmljZSIsImNhbGN1bGF0ZUdvcmRvbkdyb3d0aE1vZGVsIiwiZm9yd2FyZERpdmlkZW5kIiwicXVvdGUiLCJwcmljZSIsInNhZmVHcm93dGgiLCJmb3JtYXRHb3Jkb25Hcm93dGhNb2RlbCIsImZvcm1hdEZvb3RlciIsImV4aXQiLCJoYW5kbGVFcnJvciIsImVyciIsIkVycm9yIiwiZm9ybWF0dGVkRXJyb3IiLCJmb3JtYXRFcnJvciIsInN0YWNrIiwiZXhpdENvZGUiLCJpc1JldHJ5YWJsZSIsInB1c2giLCJpc0Zpbml0ZSIsImVwc1BheW91dFJhdGlvIiwiZmNmQ292ZXJhZ2UiLCJzdHJlYWsiLCJ0dG1EaXZpZGVuZHMiLCJ0b3RhbFNjb3JlIiwiZW1hIiwiZW1hMjAwIiwiU2NvcmVDYWxjdWxhdG9yIiwiZW1hQW5hbHlzaXMiLCJhbmFseXplRU1BVHJlbmRzIiwiaXNVbmRlckVNQTIwMCIsInRyZW5kU3RyZW5ndGgiLCJtYWNkIiwibWFjZExpbmUiLCJzaWduYWxMaW5lIiwiVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvciIsIm1hY2RBbmFseXNpcyIsImFuYWx5emVNQUNEIiwiZnVuZGFtZW50YWxDb25jZXJucyIsImZvckVhY2giLCJjb25jZXJuIiwicnNpIiwicnNpQW5hbHlzaXMiLCJhbmFseXplUlNJIiwiY291bnQiLCJvcGVyYXRpbmdDYXNoRmxvdyIsImNhcGl0YWxFeHBlbmRpdHVyZSIsImNhc2hEaXZpZGVuZHNQYWlkIiwibmV0SW5jb21lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/cli/DivvyCliApp.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/data/DividendAristocrats.js":
/*!************************************************************!*\
  !*** ../../packages/core/dist/data/DividendAristocrats.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DIVIDEND_ARISTOCRATS: () => (/* binding */ DIVIDEND_ARISTOCRATS),\n/* harmony export */   DIVIDEND_KINGS: () => (/* binding */ DIVIDEND_KINGS),\n/* harmony export */   DividendEliteDetector: () => (/* binding */ DividendEliteDetector)\n/* harmony export */ });\n/**\n * Known dividend aristocrats and kings for data quality validation\n * Sources: S&P Dividend Aristocrats list, Dividend Kings lists\n */ const DIVIDEND_KINGS = [\n    {\n        ticker: 'KO',\n        name: 'Coca-Cola',\n        yearsOfIncreases: 61,\n        category: 'king'\n    },\n    {\n        ticker: 'JNJ',\n        name: 'Johnson & Johnson',\n        yearsOfIncreases: 61,\n        category: 'king'\n    },\n    {\n        ticker: 'PG',\n        name: 'Procter & Gamble',\n        yearsOfIncreases: 67,\n        category: 'king'\n    },\n    {\n        ticker: 'MMM',\n        name: '3M Company',\n        yearsOfIncreases: 65,\n        category: 'king'\n    },\n    {\n        ticker: 'CL',\n        name: 'Colgate-Palmolive',\n        yearsOfIncreases: 60,\n        category: 'king'\n    },\n    {\n        ticker: 'KMB',\n        name: 'Kimberly-Clark',\n        yearsOfIncreases: 51,\n        category: 'king'\n    },\n    {\n        ticker: 'SYY',\n        name: 'Sysco Corporation',\n        yearsOfIncreases: 53,\n        category: 'king'\n    },\n    {\n        ticker: 'HRL',\n        name: 'Hormel Foods',\n        yearsOfIncreases: 57,\n        category: 'king'\n    },\n    {\n        ticker: 'WMT',\n        name: 'Walmart',\n        yearsOfIncreases: 49,\n        category: 'king'\n    },\n    {\n        ticker: 'PEP',\n        name: 'PepsiCo',\n        yearsOfIncreases: 51,\n        category: 'king'\n    },\n    {\n        ticker: 'MDT',\n        name: 'Medtronic',\n        yearsOfIncreases: 46,\n        category: 'king'\n    },\n    {\n        ticker: 'CVX',\n        name: 'Chevron',\n        yearsOfIncreases: 36,\n        category: 'king'\n    },\n    {\n        ticker: 'XOM',\n        name: 'Exxon Mobil',\n        yearsOfIncreases: 40,\n        category: 'king'\n    },\n    {\n        ticker: 'ED',\n        name: 'Consolidated Edison',\n        yearsOfIncreases: 49,\n        category: 'king'\n    },\n    {\n        ticker: 'SO',\n        name: 'Southern Company',\n        yearsOfIncreases: 42,\n        category: 'king'\n    }\n];\nconst DIVIDEND_ARISTOCRATS = [\n    {\n        ticker: 'ABBV',\n        name: 'AbbVie',\n        yearsOfIncreases: 51,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'ADM',\n        name: 'Archer-Daniels-Midland',\n        yearsOfIncreases: 48,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'AFL',\n        name: 'Aflac',\n        yearsOfIncreases: 40,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'ALB',\n        name: 'Albemarle Corporation',\n        yearsOfIncreases: 29,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'APD',\n        name: 'Air Products and Chemicals',\n        yearsOfIncreases: 41,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'ATO',\n        name: 'Atmos Energy',\n        yearsOfIncreases: 39,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'BDX',\n        name: 'Becton Dickinson',\n        yearsOfIncreases: 51,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'BF.B',\n        name: 'Brown-Forman',\n        yearsOfIncreases: 39,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'CAT',\n        name: 'Caterpillar',\n        yearsOfIncreases: 29,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'CHD',\n        name: 'Church & Dwight',\n        yearsOfIncreases: 27,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'CTAS',\n        name: 'Cintas Corporation',\n        yearsOfIncreases: 39,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'ECL',\n        name: 'Ecolab',\n        yearsOfIncreases: 31,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'EMR',\n        name: 'Emerson Electric',\n        yearsOfIncreases: 66,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'ESS',\n        name: 'Essex Property Trust',\n        yearsOfIncreases: 29,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'EXPD',\n        name: 'Expeditors International',\n        yearsOfIncreases: 28,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'GPC',\n        name: 'Genuine Parts',\n        yearsOfIncreases: 67,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'ITW',\n        name: 'Illinois Tool Works',\n        yearsOfIncreases: 60,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'LOW',\n        name: 'Lowe\\'s Companies',\n        yearsOfIncreases: 60,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'MCD',\n        name: 'McDonald\\'s Corporation',\n        yearsOfIncreases: 46,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'MKC',\n        name: 'McCormick & Company',\n        yearsOfIncreases: 37,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'NDSN',\n        name: 'Nordson Corporation',\n        yearsOfIncreases: 60,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'NUE',\n        name: 'Nucor Corporation',\n        yearsOfIncreases: 50,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'O',\n        name: 'Realty Income',\n        yearsOfIncreases: 28,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'PNR',\n        name: 'Pentair plc',\n        yearsOfIncreases: 47,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'PPG',\n        name: 'PPG Industries',\n        yearsOfIncreases: 51,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'SHW',\n        name: 'Sherwin-Williams',\n        yearsOfIncreases: 44,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'SPGI',\n        name: 'S&P Global',\n        yearsOfIncreases: 50,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'SWK',\n        name: 'Stanley Black & Decker',\n        yearsOfIncreases: 55,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'TGT',\n        name: 'Target Corporation',\n        yearsOfIncreases: 55,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'TROW',\n        name: 'T. Rowe Price',\n        yearsOfIncreases: 37,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'WBA',\n        name: 'Walgreens Boots Alliance',\n        yearsOfIncreases: 47,\n        category: 'aristocrat'\n    },\n    {\n        ticker: 'WST',\n        name: 'West Pharmaceutical Services',\n        yearsOfIncreases: 30,\n        category: 'aristocrat'\n    }\n];\nclass DividendEliteDetector {\n    static{\n        this.ALL_ELITE = [\n            ...DIVIDEND_KINGS,\n            ...DIVIDEND_ARISTOCRATS\n        ];\n    }\n    /**\n     * Check if a ticker is a known dividend elite stock\n     */ static isKnownElite(ticker) {\n        return this.ALL_ELITE.find((stock)=>stock.ticker === ticker) || null;\n    }\n    /**\n     * Get expected dividend streak for known elite stocks\n     */ static getExpectedStreak(ticker) {\n        const stock = this.isKnownElite(ticker);\n        return stock ? stock.yearsOfIncreases : null;\n    }\n    /**\n     * Validate calculated streak against known data\n     */ static validateStreak(ticker, calculatedStreak) {\n        const expectedStreak = this.getExpectedStreak(ticker);\n        if (!expectedStreak) {\n            // Not a known elite stock\n            return {\n                isValid: true,\n                confidence: 'high'\n            };\n        }\n        // For known elite stocks, check if calculated streak is reasonable\n        const ratio = calculatedStreak / expectedStreak;\n        if (ratio >= 0.8) {\n            // Within 20% of expected - likely good data\n            return {\n                isValid: true,\n                expectedStreak,\n                confidence: 'high'\n            };\n        } else if (ratio >= 0.5) {\n            // 50-80% of expected - some data issues\n            return {\n                isValid: true,\n                expectedStreak,\n                confidence: 'medium',\n                warning: `Calculated streak (${calculatedStreak}) lower than expected (${expectedStreak}) due to data quality issues`\n            };\n        } else if (calculatedStreak >= 10) {\n            // At least 10 years but much lower than expected\n            return {\n                isValid: true,\n                expectedStreak,\n                confidence: 'low',\n                warning: `Significant data quality issues detected. Expected ${expectedStreak} years, calculated ${calculatedStreak}`\n            };\n        } else {\n            // Very low streak for known elite stock - major data problems\n            return {\n                isValid: false,\n                expectedStreak,\n                confidence: 'low',\n                warning: `Major data quality issues. Known ${this.isKnownElite(ticker)?.category} with ${expectedStreak} years, but calculated only ${calculatedStreak}`\n            };\n        }\n    }\n    /**\n     * Get all tickers by category\n     */ static getKings() {\n        return DIVIDEND_KINGS.map((stock)=>stock.ticker);\n    }\n    static getAristocrats() {\n        return DIVIDEND_ARISTOCRATS.map((stock)=>stock.ticker);\n    }\n    /**\n     * Suggest adjusted streak based on known status\n     */ static getAdjustedStreak(ticker, calculatedStreak) {\n        const validation = this.validateStreak(ticker, calculatedStreak);\n        if (!validation.expectedStreak || validation.confidence === 'high') {\n            return {\n                adjustedStreak: calculatedStreak,\n                adjustment: 'none',\n                rationale: undefined\n            };\n        }\n        if (validation.confidence === 'medium') {\n            // Minor adjustment - use calculated but note the issue\n            return {\n                adjustedStreak: calculatedStreak,\n                adjustment: 'minor',\n                rationale: validation.warning\n            };\n        }\n        // Major adjustment - use a conservative estimate\n        const conservativeEstimate = Math.max(calculatedStreak, Math.min(validation.expectedStreak * 0.7, 25));\n        return {\n            adjustedStreak: Math.round(conservativeEstimate),\n            adjustment: 'major',\n            rationale: `Adjusted for known ${this.isKnownElite(ticker)?.category} status with data quality issues`\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L2RhdGEvRGl2aWRlbmRBcmlzdG9jcmF0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7O0NBR0MsR0FDTSxNQUFNQSxpQkFBaUI7SUFDMUI7UUFBRUMsUUFBUTtRQUFNQyxNQUFNO1FBQWFDLGtCQUFrQjtRQUFJQyxVQUFVO0lBQU87SUFDMUU7UUFBRUgsUUFBUTtRQUFPQyxNQUFNO1FBQXFCQyxrQkFBa0I7UUFBSUMsVUFBVTtJQUFPO0lBQ25GO1FBQUVILFFBQVE7UUFBTUMsTUFBTTtRQUFvQkMsa0JBQWtCO1FBQUlDLFVBQVU7SUFBTztJQUNqRjtRQUFFSCxRQUFRO1FBQU9DLE1BQU07UUFBY0Msa0JBQWtCO1FBQUlDLFVBQVU7SUFBTztJQUM1RTtRQUFFSCxRQUFRO1FBQU1DLE1BQU07UUFBcUJDLGtCQUFrQjtRQUFJQyxVQUFVO0lBQU87SUFDbEY7UUFBRUgsUUFBUTtRQUFPQyxNQUFNO1FBQWtCQyxrQkFBa0I7UUFBSUMsVUFBVTtJQUFPO0lBQ2hGO1FBQUVILFFBQVE7UUFBT0MsTUFBTTtRQUFxQkMsa0JBQWtCO1FBQUlDLFVBQVU7SUFBTztJQUNuRjtRQUFFSCxRQUFRO1FBQU9DLE1BQU07UUFBZ0JDLGtCQUFrQjtRQUFJQyxVQUFVO0lBQU87SUFDOUU7UUFBRUgsUUFBUTtRQUFPQyxNQUFNO1FBQVdDLGtCQUFrQjtRQUFJQyxVQUFVO0lBQU87SUFDekU7UUFBRUgsUUFBUTtRQUFPQyxNQUFNO1FBQVdDLGtCQUFrQjtRQUFJQyxVQUFVO0lBQU87SUFDekU7UUFBRUgsUUFBUTtRQUFPQyxNQUFNO1FBQWFDLGtCQUFrQjtRQUFJQyxVQUFVO0lBQU87SUFDM0U7UUFBRUgsUUFBUTtRQUFPQyxNQUFNO1FBQVdDLGtCQUFrQjtRQUFJQyxVQUFVO0lBQU87SUFDekU7UUFBRUgsUUFBUTtRQUFPQyxNQUFNO1FBQWVDLGtCQUFrQjtRQUFJQyxVQUFVO0lBQU87SUFDN0U7UUFBRUgsUUFBUTtRQUFNQyxN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Z0IsS0FBS0UsR0FBRyxDQUFDUixXQUFXVCxjQUFjLEdBQUcsS0FBSztRQUNsRyxPQUFPO1lBQ0hVLGdCQUFnQkssS0FBS0csS0FBSyxDQUFDSjtZQUMzQkgsWUFBWTtZQUNaQyxXQUFXLENBQUMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDbEIsWUFBWSxDQUFDUCxTQUFTRyxTQUFTLGdDQUFnQyxDQUFDO1FBQzFHO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcnRpbnN0YXJvc3RhL0RldmVsb3BtZW50L3ZpYmVzL2Rpdnl5L3BhY2thZ2VzL2NvcmUvZGlzdC9kYXRhL0RpdmlkZW5kQXJpc3RvY3JhdHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBLbm93biBkaXZpZGVuZCBhcmlzdG9jcmF0cyBhbmQga2luZ3MgZm9yIGRhdGEgcXVhbGl0eSB2YWxpZGF0aW9uXG4gKiBTb3VyY2VzOiBTJlAgRGl2aWRlbmQgQXJpc3RvY3JhdHMgbGlzdCwgRGl2aWRlbmQgS2luZ3MgbGlzdHNcbiAqL1xuZXhwb3J0IGNvbnN0IERJVklERU5EX0tJTkdTID0gW1xuICAgIHsgdGlja2VyOiAnS08nLCBuYW1lOiAnQ29jYS1Db2xhJywgeWVhcnNPZkluY3JlYXNlczogNjEsIGNhdGVnb3J5OiAna2luZycgfSxcbiAgICB7IHRpY2tlcjogJ0pOSicsIG5hbWU6ICdKb2huc29uICYgSm9obnNvbicsIHllYXJzT2ZJbmNyZWFzZXM6IDYxLCBjYXRlZ29yeTogJ2tpbmcnIH0sXG4gICAgeyB0aWNrZXI6ICdQRycsIG5hbWU6ICdQcm9jdGVyICYgR2FtYmxlJywgeWVhcnNPZkluY3JlYXNlczogNjcsIGNhdGVnb3J5OiAna2luZycgfSxcbiAgICB7IHRpY2tlcjogJ01NTScsIG5hbWU6ICczTSBDb21wYW55JywgeWVhcnNPZkluY3JlYXNlczogNjUsIGNhdGVnb3J5OiAna2luZycgfSxcbiAgICB7IHRpY2tlcjogJ0NMJywgbmFtZTogJ0NvbGdhdGUtUGFsbW9saXZlJywgeWVhcnNPZkluY3JlYXNlczogNjAsIGNhdGVnb3J5OiAna2luZycgfSxcbiAgICB7IHRpY2tlcjogJ0tNQicsIG5hbWU6ICdLaW1iZXJseS1DbGFyaycsIHllYXJzT2ZJbmNyZWFzZXM6IDUxLCBjYXRlZ29yeTogJ2tpbmcnIH0sXG4gICAgeyB0aWNrZXI6ICdTWVknLCBuYW1lOiAnU3lzY28gQ29ycG9yYXRpb24nLCB5ZWFyc09mSW5jcmVhc2VzOiA1MywgY2F0ZWdvcnk6ICdraW5nJyB9LFxuICAgIHsgdGlja2VyOiAnSFJMJywgbmFtZTogJ0hvcm1lbCBGb29kcycsIHllYXJzT2ZJbmNyZWFzZXM6IDU3LCBjYXRlZ29yeTogJ2tpbmcnIH0sXG4gICAgeyB0aWNrZXI6ICdXTVQnLCBuYW1lOiAnV2FsbWFydCcsIHllYXJzT2ZJbmNyZWFzZXM6IDQ5LCBjYXRlZ29yeTogJ2tpbmcnIH0sXG4gICAgeyB0aWNrZXI6ICdQRVAnLCBuYW1lOiAnUGVwc2lDbycsIHllYXJzT2ZJbmNyZWFzZXM6IDUxLCBjYXRlZ29yeTogJ2tpbmcnIH0sXG4gICAgeyB0aWNrZXI6ICdNRFQnLCBuYW1lOiAnTWVkdHJvbmljJywgeWVhcnNPZkluY3JlYXNlczogNDYsIGNhdGVnb3J5OiAna2luZycgfSxcbiAgICB7IHRpY2tlcjogJ0NWWCcsIG5hbWU6ICdDaGV2cm9uJywgeWVhcnNPZkluY3JlYXNlczogMzYsIGNhdGVnb3J5OiAna2luZycgfSxcbiAgICB7IHRpY2tlcjogJ1hPTScsIG5hbWU6ICdFeHhvbiBNb2JpbCcsIHllYXJzT2ZJbmNyZWFzZXM6IDQwLCBjYXRlZ29yeTogJ2tpbmcnIH0sXG4gICAgeyB0aWNrZXI6ICdFRCcsIG5hbWU6ICdDb25zb2xpZGF0ZWQgRWRpc29uJywgeWVhcnNPZkluY3JlYXNlczogNDksIGNhdGVnb3J5OiAna2luZycgfSxcbiAgICB7IHRpY2tlcjogJ1NPJywgbmFtZTogJ1NvdXRoZXJuIENvbXBhbnknLCB5ZWFyc09mSW5jcmVhc2VzOiA0MiwgY2F0ZWdvcnk6ICdraW5nJyB9LFxuXTtcbmV4cG9ydCBjb25zdCBESVZJREVORF9BUklTVE9DUkFUUyA9IFtcbiAgICB7IHRpY2tlcjogJ0FCQlYnLCBuYW1lOiAnQWJiVmllJywgeWVhcnNPZkluY3JlYXNlczogNTEsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0FETScsIG5hbWU6ICdBcmNoZXItRGFuaWVscy1NaWRsYW5kJywgeWVhcnNPZkluY3JlYXNlczogNDgsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0FGTCcsIG5hbWU6ICdBZmxhYycsIHllYXJzT2ZJbmNyZWFzZXM6IDQwLCBjYXRlZ29yeTogJ2FyaXN0b2NyYXQnIH0sXG4gICAgeyB0aWNrZXI6ICdBTEInLCBuYW1lOiAnQWxiZW1hcmxlIENvcnBvcmF0aW9uJywgeWVhcnNPZkluY3JlYXNlczogMjksIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0FQRCcsIG5hbWU6ICdBaXIgUHJvZHVjdHMgYW5kIENoZW1pY2FscycsIHllYXJzT2ZJbmNyZWFzZXM6IDQxLCBjYXRlZ29yeTogJ2FyaXN0b2NyYXQnIH0sXG4gICAgeyB0aWNrZXI6ICdBVE8nLCBuYW1lOiAnQXRtb3MgRW5lcmd5JywgeWVhcnNPZkluY3JlYXNlczogMzksIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0JEWCcsIG5hbWU6ICdCZWN0b24gRGlja2luc29uJywgeWVhcnNPZkluY3JlYXNlczogNTEsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0JGLkInLCBuYW1lOiAnQnJvd24tRm9ybWFuJywgeWVhcnNPZkluY3JlYXNlczogMzksIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0NBVCcsIG5hbWU6ICdDYXRlcnBpbGxhcicsIHllYXJzT2ZJbmNyZWFzZXM6IDI5LCBjYXRlZ29yeTogJ2FyaXN0b2NyYXQnIH0sXG4gICAgeyB0aWNrZXI6ICdDSEQnLCBuYW1lOiAnQ2h1cmNoICYgRHdpZ2h0JywgeWVhcnNPZkluY3JlYXNlczogMjcsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0NUQVMnLCBuYW1lOiAnQ2ludGFzIENvcnBvcmF0aW9uJywgeWVhcnNPZkluY3JlYXNlczogMzksIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0VDTCcsIG5hbWU6ICdFY29sYWInLCB5ZWFyc09mSW5jcmVhc2VzOiAzMSwgY2F0ZWdvcnk6ICdhcmlzdG9jcmF0JyB9LFxuICAgIHsgdGlja2VyOiAnRU1SJywgbmFtZTogJ0VtZXJzb24gRWxlY3RyaWMnLCB5ZWFyc09mSW5jcmVhc2VzOiA2NiwgY2F0ZWdvcnk6ICdhcmlzdG9jcmF0JyB9LFxuICAgIHsgdGlja2VyOiAnRVNTJywgbmFtZTogJ0Vzc2V4IFByb3BlcnR5IFRydXN0JywgeWVhcnNPZkluY3JlYXNlczogMjksIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0VYUEQnLCBuYW1lOiAnRXhwZWRpdG9ycyBJbnRlcm5hdGlvbmFsJywgeWVhcnNPZkluY3JlYXNlczogMjgsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0dQQycsIG5hbWU6ICdHZW51aW5lIFBhcnRzJywgeWVhcnNPZkluY3JlYXNlczogNjcsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0lUVycsIG5hbWU6ICdJbGxpbm9pcyBUb29sIFdvcmtzJywgeWVhcnNPZkluY3JlYXNlczogNjAsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ0xPVycsIG5hbWU6ICdMb3dlXFwncyBDb21wYW5pZXMnLCB5ZWFyc09mSW5jcmVhc2VzOiA2MCwgY2F0ZWdvcnk6ICdhcmlzdG9jcmF0JyB9LFxuICAgIHsgdGlja2VyOiAnTUNEJywgbmFtZTogJ01jRG9uYWxkXFwncyBDb3Jwb3JhdGlvbicsIHllYXJzT2ZJbmNyZWFzZXM6IDQ2LCBjYXRlZ29yeTogJ2FyaXN0b2NyYXQnIH0sXG4gICAgeyB0aWNrZXI6ICdNS0MnLCBuYW1lOiAnTWNDb3JtaWNrICYgQ29tcGFueScsIHllYXJzT2ZJbmNyZWFzZXM6IDM3LCBjYXRlZ29yeTogJ2FyaXN0b2NyYXQnIH0sXG4gICAgeyB0aWNrZXI6ICdORFNOJywgbmFtZTogJ05vcmRzb24gQ29ycG9yYXRpb24nLCB5ZWFyc09mSW5jcmVhc2VzOiA2MCwgY2F0ZWdvcnk6ICdhcmlzdG9jcmF0JyB9LFxuICAgIHsgdGlja2VyOiAnTlVFJywgbmFtZTogJ051Y29yIENvcnBvcmF0aW9uJywgeWVhcnNPZkluY3JlYXNlczogNTAsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ08nLCBuYW1lOiAnUmVhbHR5IEluY29tZScsIHllYXJzT2ZJbmNyZWFzZXM6IDI4LCBjYXRlZ29yeTogJ2FyaXN0b2NyYXQnIH0sXG4gICAgeyB0aWNrZXI6ICdQTlInLCBuYW1lOiAnUGVudGFpciBwbGMnLCB5ZWFyc09mSW5jcmVhc2VzOiA0NywgY2F0ZWdvcnk6ICdhcmlzdG9jcmF0JyB9LFxuICAgIHsgdGlja2VyOiAnUFBHJywgbmFtZTogJ1BQRyBJbmR1c3RyaWVzJywgeWVhcnNPZkluY3JlYXNlczogNTEsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ1NIVycsIG5hbWU6ICdTaGVyd2luLVdpbGxpYW1zJywgeWVhcnNPZkluY3JlYXNlczogNDQsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ1NQR0knLCBuYW1lOiAnUyZQIEdsb2JhbCcsIHllYXJzT2ZJbmNyZWFzZXM6IDUwLCBjYXRlZ29yeTogJ2FyaXN0b2NyYXQnIH0sXG4gICAgeyB0aWNrZXI6ICdTV0snLCBuYW1lOiAnU3RhbmxleSBCbGFjayAmIERlY2tlcicsIHllYXJzT2ZJbmNyZWFzZXM6IDU1LCBjYXRlZ29yeTogJ2FyaXN0b2NyYXQnIH0sXG4gICAgeyB0aWNrZXI6ICdUR1QnLCBuYW1lOiAnVGFyZ2V0IENvcnBvcmF0aW9uJywgeWVhcnNPZkluY3JlYXNlczogNTUsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ1RST1cnLCBuYW1lOiAnVC4gUm93ZSBQcmljZScsIHllYXJzT2ZJbmNyZWFzZXM6IDM3LCBjYXRlZ29yeTogJ2FyaXN0b2NyYXQnIH0sXG4gICAgeyB0aWNrZXI6ICdXQkEnLCBuYW1lOiAnV2FsZ3JlZW5zIEJvb3RzIEFsbGlhbmNlJywgeWVhcnNPZkluY3JlYXNlczogNDcsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbiAgICB7IHRpY2tlcjogJ1dTVCcsIG5hbWU6ICdXZXN0IFBoYXJtYWNldXRpY2FsIFNlcnZpY2VzJywgeWVhcnNPZkluY3JlYXNlczogMzAsIGNhdGVnb3J5OiAnYXJpc3RvY3JhdCcgfSxcbl07XG5leHBvcnQgY2xhc3MgRGl2aWRlbmRFbGl0ZURldGVjdG9yIHtcbiAgICBzdGF0aWMgQUxMX0VMSVRFID0gWy4uLkRJVklERU5EX0tJTkdTLCAuLi5ESVZJREVORF9BUklTVE9DUkFUU107XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSB0aWNrZXIgaXMgYSBrbm93biBkaXZpZGVuZCBlbGl0ZSBzdG9ja1xuICAgICAqL1xuICAgIHN0YXRpYyBpc0tub3duRWxpdGUodGlja2VyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkFMTF9FTElURS5maW5kKHN0b2NrID0+IHN0b2NrLnRpY2tlciA9PT0gdGlja2VyKSB8fCBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgZXhwZWN0ZWQgZGl2aWRlbmQgc3RyZWFrIGZvciBrbm93biBlbGl0ZSBzdG9ja3NcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0RXhwZWN0ZWRTdHJlYWsodGlja2VyKSB7XG4gICAgICAgIGNvbnN0IHN0b2NrID0gdGhpcy5pc0tub3duRWxpdGUodGlja2VyKTtcbiAgICAgICAgcmV0dXJuIHN0b2NrID8gc3RvY2sueWVhcnNPZkluY3JlYXNlcyA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIGNhbGN1bGF0ZWQgc3RyZWFrIGFnYWluc3Qga25vd24gZGF0YVxuICAgICAqL1xuICAgIHN0YXRpYyB2YWxpZGF0ZVN0cmVhayh0aWNrZXIsIGNhbGN1bGF0ZWRTdHJlYWspIHtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRTdHJlYWsgPSB0aGlzLmdldEV4cGVjdGVkU3RyZWFrKHRpY2tlcik7XG4gICAgICAgIGlmICghZXhwZWN0ZWRTdHJlYWspIHtcbiAgICAgICAgICAgIC8vIE5vdCBhIGtub3duIGVsaXRlIHN0b2NrXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlkZW5jZTogJ2hpZ2gnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIEZvciBrbm93biBlbGl0ZSBzdG9ja3MsIGNoZWNrIGlmIGNhbGN1bGF0ZWQgc3RyZWFrIGlzIHJlYXNvbmFibGVcbiAgICAgICAgY29uc3QgcmF0aW8gPSBjYWxjdWxhdGVkU3RyZWFrIC8gZXhwZWN0ZWRTdHJlYWs7XG4gICAgICAgIGlmIChyYXRpbyA+PSAwLjgpIHtcbiAgICAgICAgICAgIC8vIFdpdGhpbiAyMCUgb2YgZXhwZWN0ZWQgLSBsaWtlbHkgZ29vZCBkYXRhXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWRTdHJlYWssXG4gICAgICAgICAgICAgICAgY29uZmlkZW5jZTogJ2hpZ2gnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJhdGlvID49IDAuNSkge1xuICAgICAgICAgICAgLy8gNTAtODAlIG9mIGV4cGVjdGVkIC0gc29tZSBkYXRhIGlzc3Vlc1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkU3RyZWFrLFxuICAgICAgICAgICAgICAgIGNvbmZpZGVuY2U6ICdtZWRpdW0nLFxuICAgICAgICAgICAgICAgIHdhcm5pbmc6IGBDYWxjdWxhdGVkIHN0cmVhayAoJHtjYWxjdWxhdGVkU3RyZWFrfSkgbG93ZXIgdGhhbiBleHBlY3RlZCAoJHtleHBlY3RlZFN0cmVha30pIGR1ZSB0byBkYXRhIHF1YWxpdHkgaXNzdWVzYFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYWxjdWxhdGVkU3RyZWFrID49IDEwKSB7XG4gICAgICAgICAgICAvLyBBdCBsZWFzdCAxMCB5ZWFycyBidXQgbXVjaCBsb3dlciB0aGFuIGV4cGVjdGVkXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWRTdHJlYWssXG4gICAgICAgICAgICAgICAgY29uZmlkZW5jZTogJ2xvdycsXG4gICAgICAgICAgICAgICAgd2FybmluZzogYFNpZ25pZmljYW50IGRhdGEgcXVhbGl0eSBpc3N1ZXMgZGV0ZWN0ZWQuIEV4cGVjdGVkICR7ZXhwZWN0ZWRTdHJlYWt9IHllYXJzLCBjYWxjdWxhdGVkICR7Y2FsY3VsYXRlZFN0cmVha31gXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gVmVyeSBsb3cgc3RyZWFrIGZvciBrbm93biBlbGl0ZSBzdG9jayAtIG1ham9yIGRhdGEgcHJvYmxlbXNcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWRTdHJlYWssXG4gICAgICAgICAgICAgICAgY29uZmlkZW5jZTogJ2xvdycsXG4gICAgICAgICAgICAgICAgd2FybmluZzogYE1ham9yIGRhdGEgcXVhbGl0eSBpc3N1ZXMuIEtub3duICR7dGhpcy5pc0tub3duRWxpdGUodGlja2VyKT8uY2F0ZWdvcnl9IHdpdGggJHtleHBlY3RlZFN0cmVha30geWVhcnMsIGJ1dCBjYWxjdWxhdGVkIG9ubHkgJHtjYWxjdWxhdGVkU3RyZWFrfWBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCB0aWNrZXJzIGJ5IGNhdGVnb3J5XG4gICAgICovXG4gICAgc3RhdGljIGdldEtpbmdzKCkge1xuICAgICAgICByZXR1cm4gRElWSURFTkRfS0lOR1MubWFwKHN0b2NrID0+IHN0b2NrLnRpY2tlcik7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRBcmlzdG9jcmF0cygpIHtcbiAgICAgICAgcmV0dXJuIERJVklERU5EX0FSSVNUT0NSQVRTLm1hcChzdG9jayA9PiBzdG9jay50aWNrZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdWdnZXN0IGFkanVzdGVkIHN0cmVhayBiYXNlZCBvbiBrbm93biBzdGF0dXNcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0QWRqdXN0ZWRTdHJlYWsodGlja2VyLCBjYWxjdWxhdGVkU3RyZWFrKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLnZhbGlkYXRlU3RyZWFrKHRpY2tlciwgY2FsY3VsYXRlZFN0cmVhayk7XG4gICAgICAgIGlmICghdmFsaWRhdGlvbi5leHBlY3RlZFN0cmVhayB8fCB2YWxpZGF0aW9uLmNvbmZpZGVuY2UgPT09ICdoaWdoJykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhZGp1c3RlZFN0cmVhazogY2FsY3VsYXRlZFN0cmVhayxcbiAgICAgICAgICAgICAgICBhZGp1c3RtZW50OiAnbm9uZScsXG4gICAgICAgICAgICAgICAgcmF0aW9uYWxlOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbGlkYXRpb24uY29uZmlkZW5jZSA9PT0gJ21lZGl1bScpIHtcbiAgICAgICAgICAgIC8vIE1pbm9yIGFkanVzdG1lbnQgLSB1c2UgY2FsY3VsYXRlZCBidXQgbm90ZSB0aGUgaXNzdWVcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYWRqdXN0ZWRTdHJlYWs6IGNhbGN1bGF0ZWRTdHJlYWssXG4gICAgICAgICAgICAgICAgYWRqdXN0bWVudDogJ21pbm9yJyxcbiAgICAgICAgICAgICAgICByYXRpb25hbGU6IHZhbGlkYXRpb24ud2FybmluZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBNYWpvciBhZGp1c3RtZW50IC0gdXNlIGEgY29uc2VydmF0aXZlIGVzdGltYXRlXG4gICAgICAgIGNvbnN0IGNvbnNlcnZhdGl2ZUVzdGltYXRlID0gTWF0aC5tYXgoY2FsY3VsYXRlZFN0cmVhaywgTWF0aC5taW4odmFsaWRhdGlvbi5leHBlY3RlZFN0cmVhayAqIDAuNywgMjUpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFkanVzdGVkU3RyZWFrOiBNYXRoLnJvdW5kKGNvbnNlcnZhdGl2ZUVzdGltYXRlKSxcbiAgICAgICAgICAgIGFkanVzdG1lbnQ6ICdtYWpvcicsXG4gICAgICAgICAgICByYXRpb25hbGU6IGBBZGp1c3RlZCBmb3Iga25vd24gJHt0aGlzLmlzS25vd25FbGl0ZSh0aWNrZXIpPy5jYXRlZ29yeX0gc3RhdHVzIHdpdGggZGF0YSBxdWFsaXR5IGlzc3Vlc2BcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiRElWSURFTkRfS0lOR1MiLCJ0aWNrZXIiLCJuYW1lIiwieWVhcnNPZkluY3JlYXNlcyIsImNhdGVnb3J5IiwiRElWSURFTkRfQVJJU1RPQ1JBVFMiLCJEaXZpZGVuZEVsaXRlRGV0ZWN0b3IiLCJBTExfRUxJVEUiLCJpc0tub3duRWxpdGUiLCJmaW5kIiwic3RvY2siLCJnZXRFeHBlY3RlZFN0cmVhayIsInZhbGlkYXRlU3RyZWFrIiwiY2FsY3VsYXRlZFN0cmVhayIsImV4cGVjdGVkU3RyZWFrIiwiaXNWYWxpZCIsImNvbmZpZGVuY2UiLCJyYXRpbyIsIndhcm5pbmciLCJnZXRLaW5ncyIsIm1hcCIsImdldEFyaXN0b2NyYXRzIiwiZ2V0QWRqdXN0ZWRTdHJlYWsiLCJ2YWxpZGF0aW9uIiwiYWRqdXN0ZWRTdHJlYWsiLCJhZGp1c3RtZW50IiwicmF0aW9uYWxlIiwidW5kZWZpbmVkIiwiY29uc2VydmF0aXZlRXN0aW1hdGUiLCJNYXRoIiwibWF4IiwibWluIiwicm91bmQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/data/DividendAristocrats.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/errors/DivvyErrors.js":
/*!******************************************************!*\
  !*** ../../packages/core/dist/errors/DivvyErrors.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConfigurationError: () => (/* binding */ ConfigurationError),\n/* harmony export */   DataQualityError: () => (/* binding */ DataQualityError),\n/* harmony export */   DataSourceError: () => (/* binding */ DataSourceError),\n/* harmony export */   DivvyError: () => (/* binding */ DivvyError),\n/* harmony export */   InsufficientDataError: () => (/* binding */ InsufficientDataError),\n/* harmony export */   NetworkError: () => (/* binding */ NetworkError),\n/* harmony export */   RateLimitError: () => (/* binding */ RateLimitError),\n/* harmony export */   TickerNotFoundError: () => (/* binding */ TickerNotFoundError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError)\n/* harmony export */ });\nclass DivvyError extends Error {\n    constructor(message, code, isRetryable = false){\n        super(message);\n        this.name = this.constructor.name;\n        this.code = code;\n        this.isRetryable = isRetryable;\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\nclass ValidationError extends DivvyError {\n    constructor(message, field){\n        const code = field ? `VALIDATION_${field.toUpperCase()}` : 'VALIDATION_ERROR';\n        super(message, code, false);\n    }\n}\nclass DataSourceError extends DivvyError {\n    constructor(message, source, isRetryable = true){\n        super(message, `DATA_SOURCE_${source.toUpperCase()}`, isRetryable);\n        this.source = source;\n    }\n}\nclass NetworkError extends DivvyError {\n    constructor(message, statusCode){\n        super(message, 'NETWORK_ERROR', true);\n        this.statusCode = statusCode;\n    }\n}\nclass DataQualityError extends DivvyError {\n    constructor(message, dataType){\n        super(message, `DATA_QUALITY_${dataType.toUpperCase()}`, false);\n        this.dataType = dataType;\n    }\n}\nclass ConfigurationError extends DivvyError {\n    constructor(message){\n        super(message, 'CONFIGURATION_ERROR', false);\n    }\n}\nclass TickerNotFoundError extends DivvyError {\n    constructor(ticker){\n        super(`Ticker symbol '${ticker}' not found or invalid`, 'TICKER_NOT_FOUND', false);\n        this.ticker = ticker;\n    }\n}\nclass InsufficientDataError extends DivvyError {\n    constructor(missingData){\n        const dataList = missingData.join(', ');\n        super(`Insufficient data for analysis. Missing: ${dataList}`, 'INSUFFICIENT_DATA', false);\n        this.missingData = missingData;\n    }\n}\nclass RateLimitError extends DivvyError {\n    constructor(message, retryAfter){\n        super(message, 'RATE_LIMIT', true);\n        this.retryAfter = retryAfter;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L2Vycm9ycy9EaXZ2eUVycm9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBTyxNQUFNQSxtQkFBbUJDO0lBRzVCLFlBQVlDLE9BQU8sRUFBRUMsSUFBSSxFQUFFQyxjQUFjLEtBQUssQ0FBRTtRQUM1QyxLQUFLLENBQUNGO1FBQ04sSUFBSSxDQUFDRyxJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQ0EsSUFBSTtRQUNqQyxJQUFJLENBQUNGLElBQUksR0FBR0E7UUFDWixJQUFJLENBQUNDLFdBQVcsR0FBR0E7UUFDbkJILE1BQU1LLGlCQUFpQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsV0FBVztJQUNsRDtBQUNKO0FBQ08sTUFBTUMsd0JBQXdCUDtJQUNqQyxZQUFZRSxPQUFPLEVBQUVNLEtBQUssQ0FBRTtRQUN4QixNQUFNTCxPQUFPSyxRQUFRLENBQUMsV0FBVyxFQUFFQSxNQUFNQyxXQUFXLElBQUksR0FBRztRQUMzRCxLQUFLLENBQUNQLFNBQVNDLE1BQU07SUFDekI7QUFDSjtBQUNPLE1BQU1PLHdCQUF3QlY7SUFFakMsWUFBWUUsT0FBTyxFQUFFUyxNQUFNLEVBQUVQLGNBQWMsSUFBSSxDQUFFO1FBQzdDLEtBQUssQ0FBQ0YsU0FBUyxDQUFDLFlBQVksRUFBRVMsT0FBT0YsV0FBVyxJQUFJLEVBQUVMO1FBQ3RELElBQUksQ0FBQ08sTUFBTSxHQUFHQTtJQUNsQjtBQUNKO0FBQ08sTUFBTUMscUJBQXFCWjtJQUU5QixZQUFZRSxPQUFPLEVBQUVXLFVBQVUsQ0FBRTtRQUM3QixLQUFLLENBQUNYLFNBQVMsaUJBQWlCO1FBQ2hDLElBQUksQ0FBQ1csVUFBVSxHQUFHQTtJQUN0QjtBQUNKO0FBQ08sTUFBTUMseUJBQXlCZDtJQUVsQyxZQUFZRSxPQUFPLEVBQUVhLFFBQVEsQ0FBRTtRQUMzQixLQUFLLENBQUNiLFNBQVMsQ0FBQyxhQUFhLEVBQUVhLFNBQVNOLFdBQVcsSUFBSSxFQUFFO1FBQ3pELElBQUksQ0FBQ00sUUFBUSxHQUFHQTtJQUNwQjtBQUNKO0FBQ08sTUFBTUMsMkJBQTJCaEI7SUFDcEMsWUFBWUUsT0FBTyxDQUFFO1FBQ2pCLEtBQUssQ0FBQ0EsU0FBUyx1QkFBdUI7SUFDMUM7QUFDSjtBQUNPLE1BQU1lLDRCQUE0QmpCO0lBRXJDLFlBQVlrQixNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDLENBQUMsZUFBZSxFQUFFQSxPQUFPLHNCQUFzQixDQUFDLEVBQUUsb0JBQW9CO1FBQzVFLElBQUksQ0FBQ0EsTUFBTSxHQUFHQTtJQUNsQjtBQUNKO0FBQ08sTUFBTUMsOEJBQThCbkI7SUFFdkMsWUFBWW9CLFdBQVcsQ0FBRTtRQUNyQixNQUFNQyxXQUFXRCxZQUFZRSxJQUFJLENBQUM7UUFDbEMsS0FBSyxDQUFDLENBQUMseUNBQXlDLEVBQUVELFVBQVUsRUFBRSxxQkFBcUI7UUFDbkYsSUFBSSxDQUFDRCxXQUFXLEdBQUdBO0lBQ3ZCO0FBQ0o7QUFDTyxNQUFNRyx1QkFBdUJ2QjtJQUVoQyxZQUFZRSxPQUFPLEVBQUVzQixVQUFVLENBQUU7UUFDN0IsS0FBSyxDQUFDdEIsU0FBUyxjQUFjO1FBQzdCLElBQUksQ0FBQ3NCLFVBQVUsR0FBR0E7SUFDdEI7QUFDSiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcnRpbnN0YXJvc3RhL0RldmVsb3BtZW50L3ZpYmVzL2Rpdnl5L3BhY2thZ2VzL2NvcmUvZGlzdC9lcnJvcnMvRGl2dnlFcnJvcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIERpdnZ5RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29kZTtcbiAgICBpc1JldHJ5YWJsZTtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjb2RlLCBpc1JldHJ5YWJsZSA9IGZhbHNlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIHRoaXMuaXNSZXRyeWFibGUgPSBpc1JldHJ5YWJsZTtcbiAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIERpdnZ5RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGZpZWxkKSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBmaWVsZCA/IGBWQUxJREFUSU9OXyR7ZmllbGQudG9VcHBlckNhc2UoKX1gIDogJ1ZBTElEQVRJT05fRVJST1InO1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBjb2RlLCBmYWxzZSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIERhdGFTb3VyY2VFcnJvciBleHRlbmRzIERpdnZ5RXJyb3Ige1xuICAgIHNvdXJjZTtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzb3VyY2UsIGlzUmV0cnlhYmxlID0gdHJ1ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBgREFUQV9TT1VSQ0VfJHtzb3VyY2UudG9VcHBlckNhc2UoKX1gLCBpc1JldHJ5YWJsZSk7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBOZXR3b3JrRXJyb3IgZXh0ZW5kcyBEaXZ2eUVycm9yIHtcbiAgICBzdGF0dXNDb2RlO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXR1c0NvZGUpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgJ05FVFdPUktfRVJST1InLCB0cnVlKTtcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgRGF0YVF1YWxpdHlFcnJvciBleHRlbmRzIERpdnZ5RXJyb3Ige1xuICAgIGRhdGFUeXBlO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGRhdGFUeXBlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIGBEQVRBX1FVQUxJVFlfJHtkYXRhVHlwZS50b1VwcGVyQ2FzZSgpfWAsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5kYXRhVHlwZSA9IGRhdGFUeXBlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb25maWd1cmF0aW9uRXJyb3IgZXh0ZW5kcyBEaXZ2eUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdDT05GSUdVUkFUSU9OX0VSUk9SJywgZmFsc2UpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBUaWNrZXJOb3RGb3VuZEVycm9yIGV4dGVuZHMgRGl2dnlFcnJvciB7XG4gICAgdGlja2VyO1xuICAgIGNvbnN0cnVjdG9yKHRpY2tlcikge1xuICAgICAgICBzdXBlcihgVGlja2VyIHN5bWJvbCAnJHt0aWNrZXJ9JyBub3QgZm91bmQgb3IgaW52YWxpZGAsICdUSUNLRVJfTk9UX0ZPVU5EJywgZmFsc2UpO1xuICAgICAgICB0aGlzLnRpY2tlciA9IHRpY2tlcjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSW5zdWZmaWNpZW50RGF0YUVycm9yIGV4dGVuZHMgRGl2dnlFcnJvciB7XG4gICAgbWlzc2luZ0RhdGE7XG4gICAgY29uc3RydWN0b3IobWlzc2luZ0RhdGEpIHtcbiAgICAgICAgY29uc3QgZGF0YUxpc3QgPSBtaXNzaW5nRGF0YS5qb2luKCcsICcpO1xuICAgICAgICBzdXBlcihgSW5zdWZmaWNpZW50IGRhdGEgZm9yIGFuYWx5c2lzLiBNaXNzaW5nOiAke2RhdGFMaXN0fWAsICdJTlNVRkZJQ0lFTlRfREFUQScsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5taXNzaW5nRGF0YSA9IG1pc3NpbmdEYXRhO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRFcnJvciBleHRlbmRzIERpdnZ5RXJyb3Ige1xuICAgIHJldHJ5QWZ0ZXI7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmV0cnlBZnRlcikge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCAnUkFURV9MSU1JVCcsIHRydWUpO1xuICAgICAgICB0aGlzLnJldHJ5QWZ0ZXIgPSByZXRyeUFmdGVyO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJEaXZ2eUVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsImlzUmV0cnlhYmxlIiwibmFtZSIsImNhcHR1cmVTdGFja1RyYWNlIiwiVmFsaWRhdGlvbkVycm9yIiwiZmllbGQiLCJ0b1VwcGVyQ2FzZSIsIkRhdGFTb3VyY2VFcnJvciIsInNvdXJjZSIsIk5ldHdvcmtFcnJvciIsInN0YXR1c0NvZGUiLCJEYXRhUXVhbGl0eUVycm9yIiwiZGF0YVR5cGUiLCJDb25maWd1cmF0aW9uRXJyb3IiLCJUaWNrZXJOb3RGb3VuZEVycm9yIiwidGlja2VyIiwiSW5zdWZmaWNpZW50RGF0YUVycm9yIiwibWlzc2luZ0RhdGEiLCJkYXRhTGlzdCIsImpvaW4iLCJSYXRlTGltaXRFcnJvciIsInJldHJ5QWZ0ZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/errors/DivvyErrors.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/formatters/ErrorFormatter.js":
/*!*************************************************************!*\
  !*** ../../packages/core/dist/formatters/ErrorFormatter.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorFormatter: () => (/* binding */ ErrorFormatter)\n/* harmony export */ });\n/* harmony import */ var _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/DivvyErrors.js */ \"(rsc)/../../packages/core/dist/errors/DivvyErrors.js\");\n\nclass ErrorFormatter {\n    static formatError(error) {\n        if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.TickerNotFoundError) {\n            return this.formatTickerNotFoundError(error);\n        }\n        if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError) {\n            return this.formatValidationError(error);\n        }\n        if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.InsufficientDataError) {\n            return this.formatInsufficientDataError(error);\n        }\n        if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.NetworkError) {\n            return this.formatNetworkError(error);\n        }\n        if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.RateLimitError) {\n            return this.formatRateLimitError(error);\n        }\n        if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.DataSourceError) {\n            return this.formatDataSourceError(error);\n        }\n        if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.DivvyError) {\n            return this.formatGenericDivvyError(error);\n        }\n        return this.formatGenericError(error);\n    }\n    static formatTickerNotFoundError(error) {\n        return [\n            ` Ticker Symbol Not Found: '${error.ticker}'`,\n            '',\n            ' Suggestions:',\n            '    Check the spelling of the ticker symbol',\n            '    Verify the ticker is listed on a major exchange',\n            '    Try using the full company name to search for the correct ticker',\n            '    Some international stocks may require exchange suffixes (e.g., \"BMW.DE\")',\n            '',\n            ' Example: divvy AAPL'\n        ].join('\\n');\n    }\n    static formatValidationError(error) {\n        return [\n            ` Invalid Input: ${error.message}`,\n            '',\n            ' Tips:',\n            '    Ticker symbols should be 1-10 characters',\n            '    Use only letters, numbers, dots, and hyphens',\n            '    Years should be between 1-50',\n            '    Required return should be between 0.1%-100%',\n            '',\n            ' Example: divvy MSFT --years 10 --r 0.08'\n        ].join('\\n');\n    }\n    static formatInsufficientDataError(error) {\n        return [\n            ' Insufficient Data for Analysis',\n            '',\n            `Missing data: ${error.missingData.join(', ')}`,\n            '',\n            ' This could happen because:',\n            '    The company is too new or recently went public',\n            '    The stock has limited trading history',\n            '    The company doesn\\'t pay dividends',\n            '    Data provider temporarily unavailable',\n            '',\n            ' Try again later or check if the ticker symbol is correct.'\n        ].join('\\n');\n    }\n    static formatNetworkError(error) {\n        const parts = [\n            ' Network Connection Issue',\n            '',\n            `Details: ${error.message}`\n        ];\n        if (error.statusCode) {\n            parts.push(`Status Code: ${error.statusCode}`);\n        }\n        parts.push('', ' Troubleshooting:', '    Check your internet connection', '    Try again in a few moments', '    Verify you can access other websites', '    Check if you\\'re behind a corporate firewall', '');\n        if (error.isRetryable) {\n            parts.push(' This error is usually temporary. The request will be retried automatically.');\n        }\n        return parts.join('\\n');\n    }\n    static formatRateLimitError(error) {\n        const parts = [\n            ' Rate Limit Exceeded',\n            '',\n            'You\\'ve made too many requests in a short time period.',\n            ''\n        ];\n        if (error.retryAfter) {\n            const minutes = Math.ceil(error.retryAfter / 60000);\n            parts.push(` Please wait ${minutes} minute(s) before trying again.`);\n        } else {\n            parts.push(' Please wait a few minutes before trying again.');\n        }\n        parts.push('', ' To avoid rate limits:', '    Reduce the frequency of requests', '    Avoid running multiple divvy commands simultaneously', '    Consider using fewer years of historical data (--years 5)');\n        return parts.join('\\n');\n    }\n    static formatDataSourceError(error) {\n        return [\n            ` Data Source Error (${error.source})`,\n            '',\n            `Details: ${error.message}`,\n            '',\n            ' This could be due to:',\n            '    Temporary service outage',\n            '    Changes in the data provider\\'s API',\n            '    Invalid or delisted ticker symbol',\n            '',\n            error.isRetryable ? ' This error is usually temporary. Please try again later.' : '  This appears to be a permanent issue. Please verify the ticker symbol.'\n        ].join('\\n');\n    }\n    static formatGenericDivvyError(error) {\n        return [\n            ` Error (${error.code})`,\n            '',\n            error.message,\n            '',\n            error.isRetryable ? ' You can try this request again.' : '  Please check your input and try again.'\n        ].join('\\n');\n    }\n    static formatGenericError(error) {\n        return [\n            ' Unexpected Error',\n            '',\n            error.message,\n            '',\n            ' If this error persists:',\n            '    Try a different ticker symbol',\n            '    Reduce the years of historical data requested',\n            '    Check for any special characters in your command',\n            '    Report this issue if the problem continues',\n            '',\n            ' Error Details:',\n            `   Name: ${error.name}`,\n            `   Stack: ${error.stack?.split('\\n')[1]?.trim() || 'Not available'}`\n        ].join('\\n');\n    }\n    static formatWarnings(warnings) {\n        if (warnings.length === 0) return '';\n        const parts = [\n            '  Data Quality Warnings:',\n            ''\n        ];\n        warnings.forEach((warning)=>{\n            parts.push(`    ${warning}`);\n        });\n        parts.push('', ' These warnings indicate potential data quality issues.', '   The analysis will continue with estimates where possible.', '');\n        return parts.join('\\n');\n    }\n    static formatDataQualityReport(score, level, recommendations) {\n        const emoji = this.getQualityEmoji(level);\n        const parts = [\n            `${emoji} Data Quality: ${level.toUpperCase()} (${score}/100)`,\n            ''\n        ];\n        if (recommendations.length > 0) {\n            parts.push(' Recommendations:');\n            recommendations.forEach((rec)=>{\n                parts.push(`    ${rec}`);\n            });\n            parts.push('');\n        }\n        return parts.join('\\n');\n    }\n    static getQualityEmoji(level) {\n        switch(level.toLowerCase()){\n            case 'excellent':\n                return '';\n            case 'good':\n                return '';\n            case 'fair':\n                return '';\n            case 'poor':\n                return '';\n            default:\n                return '';\n        }\n    }\n    static formatRetryInfo(attempts, totalDelayMs) {\n        if (attempts <= 1) return '';\n        const seconds = (totalDelayMs / 1000).toFixed(1);\n        return ` Request completed after ${attempts} attempts (${seconds}s delay)`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L2Zvcm1hdHRlcnMvRXJyb3JGb3JtYXR0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0s7QUFDM0osTUFBTU87SUFDVCxPQUFPQyxZQUFZQyxLQUFLLEVBQUU7UUFDdEIsSUFBSUEsaUJBQWlCTCx1RUFBbUJBLEVBQUU7WUFDdEMsT0FBTyxJQUFJLENBQUNNLHlCQUF5QixDQUFDRDtRQUMxQztRQUNBLElBQUlBLGlCQUFpQlIsbUVBQWVBLEVBQUU7WUFDbEMsT0FBTyxJQUFJLENBQUNVLHFCQUFxQixDQUFDRjtRQUN0QztRQUNBLElBQUlBLGlCQUFpQkoseUVBQXFCQSxFQUFFO1lBQ3hDLE9BQU8sSUFBSSxDQUFDTywyQkFBMkIsQ0FBQ0g7UUFDNUM7UUFDQSxJQUFJQSxpQkFBaUJQLGdFQUFZQSxFQUFFO1lBQy9CLE9BQU8sSUFBSSxDQUFDVyxrQkFBa0IsQ0FBQ0o7UUFDbkM7UUFDQSxJQUFJQSxpQkFBaUJILGtFQUFjQSxFQUFFO1lBQ2pDLE9BQU8sSUFBSSxDQUFDUSxvQkFBb0IsQ0FBQ0w7UUFDckM7UUFDQSxJQUFJQSxpQkFBaUJOLG1FQUFlQSxFQUFFO1lBQ2xDLE9BQU8sSUFBSSxDQUFDWSxxQkFBcUIsQ0FBQ047UUFDdEM7UUFDQSxJQUFJQSxpQkFBaUJULDhEQUFVQSxFQUFFO1lBQzdCLE9BQU8sSUFBSSxDQUFDZ0IsdUJBQXVCLENBQUNQO1FBQ3hDO1FBQ0EsT0FBTyxJQUFJLENBQUNRLGtCQUFrQixDQUFDUjtJQUNuQztJQUNBLE9BQU9DLDBCQUEwQkQsS0FBSyxFQUFFO1FBQ3BDLE9BQU87WUFDSCxDQUFDLDRCQUE0QixFQUFFQSxNQUFNUyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzlDO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDSCxDQUFDQyxJQUFJLENBQUM7SUFDWDtJQUNBLE9BQU9SLHNCQUFzQkYsS0FBSyxFQUFFO1FBQ2hDLE9BQU87WUFDSCxDQUFDLGlC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SSxPQUFPRixNQUFNSCxJQUFJLENBQUM7SUFDdEI7SUFDQSxPQUFPc0Isd0JBQXdCQyxLQUFLLEVBQUVDLEtBQUssRUFBRUMsZUFBZSxFQUFFO1FBQzFELE1BQU1DLFFBQVEsSUFBSSxDQUFDQyxlQUFlLENBQUNIO1FBQ25DLE1BQU1yQixRQUFRO1lBQ1YsR0FBR3VCLE1BQU0sZUFBZSxFQUFFRixNQUFNSSxXQUFXLEdBQUcsRUFBRSxFQUFFTCxNQUFNLEtBQUssQ0FBQztZQUM5RDtTQUNIO1FBQ0QsSUFBSUUsZ0JBQWdCTixNQUFNLEdBQUcsR0FBRztZQUM1QmhCLE1BQU1FLElBQUksQ0FBQztZQUNYb0IsZ0JBQWdCTCxPQUFPLENBQUNTLENBQUFBO2dCQUNwQjFCLE1BQU1FLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRXdCLEtBQUs7WUFDNUI7WUFDQTFCLE1BQU1FLElBQUksQ0FBQztRQUNmO1FBQ0EsT0FBT0YsTUFBTUgsSUFBSSxDQUFDO0lBQ3RCO0lBQ0EsT0FBTzJCLGdCQUFnQkgsS0FBSyxFQUFFO1FBQzFCLE9BQVFBLE1BQU1NLFdBQVc7WUFDckIsS0FBSztnQkFBYSxPQUFPO1lBQ3pCLEtBQUs7Z0JBQVEsT0FBTztZQUNwQixLQUFLO2dCQUFRLE9BQU87WUFDcEIsS0FBSztnQkFBUSxPQUFPO1lBQ3BCO2dCQUFTLE9BQU87UUFDcEI7SUFDSjtJQUNBLE9BQU9DLGdCQUFnQkMsUUFBUSxFQUFFQyxZQUFZLEVBQUU7UUFDM0MsSUFBSUQsWUFBWSxHQUNaLE9BQU87UUFDWCxNQUFNRSxVQUFVLENBQUNELGVBQWUsSUFBRyxFQUFHRSxPQUFPLENBQUM7UUFDOUMsT0FBTyxDQUFDLDJCQUEyQixFQUFFSCxTQUFTLFdBQVcsRUFBRUUsUUFBUSxRQUFRLENBQUM7SUFDaEY7QUFDSiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcnRpbnN0YXJvc3RhL0RldmVsb3BtZW50L3ZpYmVzL2Rpdnl5L3BhY2thZ2VzL2NvcmUvZGlzdC9mb3JtYXR0ZXJzL0Vycm9yRm9ybWF0dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpdnZ5RXJyb3IsIFZhbGlkYXRpb25FcnJvciwgTmV0d29ya0Vycm9yLCBEYXRhU291cmNlRXJyb3IsIFRpY2tlck5vdEZvdW5kRXJyb3IsIEluc3VmZmljaWVudERhdGFFcnJvciwgUmF0ZUxpbWl0RXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvRGl2dnlFcnJvcnMuanMnO1xuZXhwb3J0IGNsYXNzIEVycm9yRm9ybWF0dGVyIHtcbiAgICBzdGF0aWMgZm9ybWF0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVGlja2VyTm90Rm91bmRFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VGlja2VyTm90Rm91bmRFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRWYWxpZGF0aW9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEluc3VmZmljaWVudERhdGFFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0SW5zdWZmaWNpZW50RGF0YUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOZXR3b3JrRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdE5ldHdvcmtFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUmF0ZUxpbWl0RXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFJhdGVMaW1pdEVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBEYXRhU291cmNlRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdERhdGFTb3VyY2VFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRGl2dnlFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0R2VuZXJpY0RpdnZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdEdlbmVyaWNFcnJvcihlcnJvcik7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JtYXRUaWNrZXJOb3RGb3VuZEVycm9yKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBg4p2MIFRpY2tlciBTeW1ib2wgTm90IEZvdW5kOiAnJHtlcnJvci50aWNrZXJ9J2AsXG4gICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICfwn5KhIFN1Z2dlc3Rpb25zOicsXG4gICAgICAgICAgICAnICAg4oCiIENoZWNrIHRoZSBzcGVsbGluZyBvZiB0aGUgdGlja2VyIHN5bWJvbCcsXG4gICAgICAgICAgICAnICAg4oCiIFZlcmlmeSB0aGUgdGlja2VyIGlzIGxpc3RlZCBvbiBhIG1ham9yIGV4Y2hhbmdlJyxcbiAgICAgICAgICAgICcgICDigKIgVHJ5IHVzaW5nIHRoZSBmdWxsIGNvbXBhbnkgbmFtZSB0byBzZWFyY2ggZm9yIHRoZSBjb3JyZWN0IHRpY2tlcicsXG4gICAgICAgICAgICAnICAg4oCiIFNvbWUgaW50ZXJuYXRpb25hbCBzdG9ja3MgbWF5IHJlcXVpcmUgZXhjaGFuZ2Ugc3VmZml4ZXMgKGUuZy4sIFwiQk1XLkRFXCIpJyxcbiAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgJ/Cfk50gRXhhbXBsZTogZGl2dnkgQUFQTCdcbiAgICAgICAgXS5qb2luKCdcXG4nKTtcbiAgICB9XG4gICAgc3RhdGljIGZvcm1hdFZhbGlkYXRpb25FcnJvcihlcnJvcikge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgYOKdjCBJbnZhbGlkIElucHV0OiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgJ/CfkqEgVGlwczonLFxuICAgICAgICAgICAgJyAgIOKAoiBUaWNrZXIgc3ltYm9scyBzaG91bGQgYmUgMS0xMCBjaGFyYWN0ZXJzJyxcbiAgICAgICAgICAgICcgICDigKIgVXNlIG9ubHkgbGV0dGVycywgbnVtYmVycywgZG90cywgYW5kIGh5cGhlbnMnLFxuICAgICAgICAgICAgJyAgIOKAoiBZZWFycyBzaG91bGQgYmUgYmV0d2VlbiAxLTUwJyxcbiAgICAgICAgICAgICcgICDigKIgUmVxdWlyZWQgcmV0dXJuIHNob3VsZCBiZSBiZXR3ZWVuIDAuMSUtMTAwJScsXG4gICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICfwn5OdIEV4YW1wbGU6IGRpdnZ5IE1TRlQgLS15ZWFycyAxMCAtLXIgMC4wOCdcbiAgICAgICAgXS5qb2luKCdcXG4nKTtcbiAgICB9XG4gICAgc3RhdGljIGZvcm1hdEluc3VmZmljaWVudERhdGFFcnJvcihlcnJvcikge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgJ+KdjCBJbnN1ZmZpY2llbnQgRGF0YSBmb3IgQW5hbHlzaXMnLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICBgTWlzc2luZyBkYXRhOiAke2Vycm9yLm1pc3NpbmdEYXRhLmpvaW4oJywgJyl9YCxcbiAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgJ/CfkqEgVGhpcyBjb3VsZCBoYXBwZW4gYmVjYXVzZTonLFxuICAgICAgICAgICAgJyAgIOKAoiBUaGUgY29tcGFueSBpcyB0b28gbmV3IG9yIHJlY2VudGx5IHdlbnQgcHVibGljJyxcbiAgICAgICAgICAgICcgICDigKIgVGhlIHN0b2NrIGhhcyBsaW1pdGVkIHRyYWRpbmcgaGlzdG9yeScsXG4gICAgICAgICAgICAnICAg4oCiIFRoZSBjb21wYW55IGRvZXNuXFwndCBwYXkgZGl2aWRlbmRzJyxcbiAgICAgICAgICAgICcgICDigKIgRGF0YSBwcm92aWRlciB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZScsXG4gICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICfwn5SEIFRyeSBhZ2FpbiBsYXRlciBvciBjaGVjayBpZiB0aGUgdGlja2VyIHN5bWJvbCBpcyBjb3JyZWN0LidcbiAgICAgICAgXS5qb2luKCdcXG4nKTtcbiAgICB9XG4gICAgc3RhdGljIGZvcm1hdE5ldHdvcmtFcnJvcihlcnJvcikge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IFtcbiAgICAgICAgICAgICfinYwgTmV0d29yayBDb25uZWN0aW9uIElzc3VlJyxcbiAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgYERldGFpbHM6ICR7ZXJyb3IubWVzc2FnZX1gXG4gICAgICAgIF07XG4gICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlKSB7XG4gICAgICAgICAgICBwYXJ0cy5wdXNoKGBTdGF0dXMgQ29kZTogJHtlcnJvci5zdGF0dXNDb2RlfWApO1xuICAgICAgICB9XG4gICAgICAgIHBhcnRzLnB1c2goJycsICfwn5KhIFRyb3VibGVzaG9vdGluZzonLCAnICAg4oCiIENoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbicsICcgICDigKIgVHJ5IGFnYWluIGluIGEgZmV3IG1vbWVudHMnLCAnICAg4oCiIFZlcmlmeSB5b3UgY2FuIGFjY2VzcyBvdGhlciB3ZWJzaXRlcycsICcgICDigKIgQ2hlY2sgaWYgeW91XFwncmUgYmVoaW5kIGEgY29ycG9yYXRlIGZpcmV3YWxsJywgJycpO1xuICAgICAgICBpZiAoZXJyb3IuaXNSZXRyeWFibGUpIHtcbiAgICAgICAgICAgIHBhcnRzLnB1c2goJ/CflIQgVGhpcyBlcnJvciBpcyB1c3VhbGx5IHRlbXBvcmFyeS4gVGhlIHJlcXVlc3Qgd2lsbCBiZSByZXRyaWVkIGF1dG9tYXRpY2FsbHkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oJ1xcbicpO1xuICAgIH1cbiAgICBzdGF0aWMgZm9ybWF0UmF0ZUxpbWl0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBbXG4gICAgICAgICAgICAn4p2MIFJhdGUgTGltaXQgRXhjZWVkZWQnLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAnWW91XFwndmUgbWFkZSB0b28gbWFueSByZXF1ZXN0cyBpbiBhIHNob3J0IHRpbWUgcGVyaW9kLicsXG4gICAgICAgICAgICAnJ1xuICAgICAgICBdO1xuICAgICAgICBpZiAoZXJyb3IucmV0cnlBZnRlcikge1xuICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguY2VpbChlcnJvci5yZXRyeUFmdGVyIC8gNjAwMDApO1xuICAgICAgICAgICAgcGFydHMucHVzaChg4o+zIFBsZWFzZSB3YWl0ICR7bWludXRlc30gbWludXRlKHMpIGJlZm9yZSB0cnlpbmcgYWdhaW4uYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJ0cy5wdXNoKCfij7MgUGxlYXNlIHdhaXQgYSBmZXcgbWludXRlcyBiZWZvcmUgdHJ5aW5nIGFnYWluLicpO1xuICAgICAgICB9XG4gICAgICAgIHBhcnRzLnB1c2goJycsICfwn5KhIFRvIGF2b2lkIHJhdGUgbGltaXRzOicsICcgICDigKIgUmVkdWNlIHRoZSBmcmVxdWVuY3kgb2YgcmVxdWVzdHMnLCAnICAg4oCiIEF2b2lkIHJ1bm5pbmcgbXVsdGlwbGUgZGl2dnkgY29tbWFuZHMgc2ltdWx0YW5lb3VzbHknLCAnICAg4oCiIENvbnNpZGVyIHVzaW5nIGZld2VyIHllYXJzIG9mIGhpc3RvcmljYWwgZGF0YSAoLS15ZWFycyA1KScpO1xuICAgICAgICByZXR1cm4gcGFydHMuam9pbignXFxuJyk7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JtYXREYXRhU291cmNlRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGDinYwgRGF0YSBTb3VyY2UgRXJyb3IgKCR7ZXJyb3Iuc291cmNlfSlgLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICBgRGV0YWlsczogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICfwn5KhIFRoaXMgY291bGQgYmUgZHVlIHRvOicsXG4gICAgICAgICAgICAnICAg4oCiIFRlbXBvcmFyeSBzZXJ2aWNlIG91dGFnZScsXG4gICAgICAgICAgICAnICAg4oCiIENoYW5nZXMgaW4gdGhlIGRhdGEgcHJvdmlkZXJcXCdzIEFQSScsXG4gICAgICAgICAgICAnICAg4oCiIEludmFsaWQgb3IgZGVsaXN0ZWQgdGlja2VyIHN5bWJvbCcsXG4gICAgICAgICAgICAnJyxcbiAgICAgICAgICAgIGVycm9yLmlzUmV0cnlhYmxlXG4gICAgICAgICAgICAgICAgPyAn8J+UhCBUaGlzIGVycm9yIGlzIHVzdWFsbHkgdGVtcG9yYXJ5LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLidcbiAgICAgICAgICAgICAgICA6ICfimqDvuI8gIFRoaXMgYXBwZWFycyB0byBiZSBhIHBlcm1hbmVudCBpc3N1ZS4gUGxlYXNlIHZlcmlmeSB0aGUgdGlja2VyIHN5bWJvbC4nXG4gICAgICAgIF0uam9pbignXFxuJyk7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JtYXRHZW5lcmljRGl2dnlFcnJvcihlcnJvcikge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgYOKdjCBFcnJvciAoJHtlcnJvci5jb2RlfSlgLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICBlcnJvci5pc1JldHJ5YWJsZVxuICAgICAgICAgICAgICAgID8gJ/CflIQgWW91IGNhbiB0cnkgdGhpcyByZXF1ZXN0IGFnYWluLidcbiAgICAgICAgICAgICAgICA6ICfimqDvuI8gIFBsZWFzZSBjaGVjayB5b3VyIGlucHV0IGFuZCB0cnkgYWdhaW4uJ1xuICAgICAgICBdLmpvaW4oJ1xcbicpO1xuICAgIH1cbiAgICBzdGF0aWMgZm9ybWF0R2VuZXJpY0Vycm9yKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAn4p2MIFVuZXhwZWN0ZWQgRXJyb3InLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAn8J+SoSBJZiB0aGlzIGVycm9yIHBlcnNpc3RzOicsXG4gICAgICAgICAgICAnICAg4oCiIFRyeSBhIGRpZmZlcmVudCB0aWNrZXIgc3ltYm9sJyxcbiAgICAgICAgICAgICcgICDigKIgUmVkdWNlIHRoZSB5ZWFycyBvZiBoaXN0b3JpY2FsIGRhdGEgcmVxdWVzdGVkJyxcbiAgICAgICAgICAgICcgICDigKIgQ2hlY2sgZm9yIGFueSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4geW91ciBjb21tYW5kJyxcbiAgICAgICAgICAgICcgICDigKIgUmVwb3J0IHRoaXMgaXNzdWUgaWYgdGhlIHByb2JsZW0gY29udGludWVzJyxcbiAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgJ/CfkJsgRXJyb3IgRGV0YWlsczonLFxuICAgICAgICAgICAgYCAgIE5hbWU6ICR7ZXJyb3IubmFtZX1gLFxuICAgICAgICAgICAgYCAgIFN0YWNrOiAke2Vycm9yLnN0YWNrPy5zcGxpdCgnXFxuJylbMV0/LnRyaW0oKSB8fCAnTm90IGF2YWlsYWJsZSd9YFxuICAgICAgICBdLmpvaW4oJ1xcbicpO1xuICAgIH1cbiAgICBzdGF0aWMgZm9ybWF0V2FybmluZ3Mod2FybmluZ3MpIHtcbiAgICAgICAgaWYgKHdhcm5pbmdzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgY29uc3QgcGFydHMgPSBbXG4gICAgICAgICAgICAn4pqg77iPICBEYXRhIFF1YWxpdHkgV2FybmluZ3M6JyxcbiAgICAgICAgICAgICcnXG4gICAgICAgIF07XG4gICAgICAgIHdhcm5pbmdzLmZvckVhY2god2FybmluZyA9PiB7XG4gICAgICAgICAgICBwYXJ0cy5wdXNoKGAgICDigKIgJHt3YXJuaW5nfWApO1xuICAgICAgICB9KTtcbiAgICAgICAgcGFydHMucHVzaCgnJywgJ/CfkqEgVGhlc2Ugd2FybmluZ3MgaW5kaWNhdGUgcG90ZW50aWFsIGRhdGEgcXVhbGl0eSBpc3N1ZXMuJywgJyAgIFRoZSBhbmFseXNpcyB3aWxsIGNvbnRpbnVlIHdpdGggZXN0aW1hdGVzIHdoZXJlIHBvc3NpYmxlLicsICcnKTtcbiAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oJ1xcbicpO1xuICAgIH1cbiAgICBzdGF0aWMgZm9ybWF0RGF0YVF1YWxpdHlSZXBvcnQoc2NvcmUsIGxldmVsLCByZWNvbW1lbmRhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZW1vamkgPSB0aGlzLmdldFF1YWxpdHlFbW9qaShsZXZlbCk7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gW1xuICAgICAgICAgICAgYCR7ZW1vaml9IERhdGEgUXVhbGl0eTogJHtsZXZlbC50b1VwcGVyQ2FzZSgpfSAoJHtzY29yZX0vMTAwKWAsXG4gICAgICAgICAgICAnJ1xuICAgICAgICBdO1xuICAgICAgICBpZiAocmVjb21tZW5kYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHBhcnRzLnB1c2goJ/Cfk4sgUmVjb21tZW5kYXRpb25zOicpO1xuICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjID0+IHtcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGAgICDigKIgJHtyZWN9YCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBhcnRzLnB1c2goJycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJ0cy5qb2luKCdcXG4nKTtcbiAgICB9XG4gICAgc3RhdGljIGdldFF1YWxpdHlFbW9qaShsZXZlbCkge1xuICAgICAgICBzd2l0Y2ggKGxldmVsLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgJ2V4Y2VsbGVudCc6IHJldHVybiAn8J+foic7XG4gICAgICAgICAgICBjYXNlICdnb29kJzogcmV0dXJuICfwn5+hJztcbiAgICAgICAgICAgIGNhc2UgJ2ZhaXInOiByZXR1cm4gJ/Cfn6AnO1xuICAgICAgICAgICAgY2FzZSAncG9vcic6IHJldHVybiAn8J+UtCc7XG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gJ+Kaqic7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZvcm1hdFJldHJ5SW5mbyhhdHRlbXB0cywgdG90YWxEZWxheU1zKSB7XG4gICAgICAgIGlmIChhdHRlbXB0cyA8PSAxKVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICBjb25zdCBzZWNvbmRzID0gKHRvdGFsRGVsYXlNcyAvIDEwMDApLnRvRml4ZWQoMSk7XG4gICAgICAgIHJldHVybiBg8J+UhCBSZXF1ZXN0IGNvbXBsZXRlZCBhZnRlciAke2F0dGVtcHRzfSBhdHRlbXB0cyAoJHtzZWNvbmRzfXMgZGVsYXkpYDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiRGl2dnlFcnJvciIsIlZhbGlkYXRpb25FcnJvciIsIk5ldHdvcmtFcnJvciIsIkRhdGFTb3VyY2VFcnJvciIsIlRpY2tlck5vdEZvdW5kRXJyb3IiLCJJbnN1ZmZpY2llbnREYXRhRXJyb3IiLCJSYXRlTGltaXRFcnJvciIsIkVycm9yRm9ybWF0dGVyIiwiZm9ybWF0RXJyb3IiLCJlcnJvciIsImZvcm1hdFRpY2tlck5vdEZvdW5kRXJyb3IiLCJmb3JtYXRWYWxpZGF0aW9uRXJyb3IiLCJmb3JtYXRJbnN1ZmZpY2llbnREYXRhRXJyb3IiLCJmb3JtYXROZXR3b3JrRXJyb3IiLCJmb3JtYXRSYXRlTGltaXRFcnJvciIsImZvcm1hdERhdGFTb3VyY2VFcnJvciIsImZvcm1hdEdlbmVyaWNEaXZ2eUVycm9yIiwiZm9ybWF0R2VuZXJpY0Vycm9yIiwidGlja2VyIiwiam9pbiIsIm1lc3NhZ2UiLCJtaXNzaW5nRGF0YSIsInBhcnRzIiwic3RhdHVzQ29kZSIsInB1c2giLCJpc1JldHJ5YWJsZSIsInJldHJ5QWZ0ZXIiLCJtaW51dGVzIiwiTWF0aCIsImNlaWwiLCJzb3VyY2UiLCJjb2RlIiwibmFtZSIsInN0YWNrIiwic3BsaXQiLCJ0cmltIiwiZm9ybWF0V2FybmluZ3MiLCJ3YXJuaW5ncyIsImxlbmd0aCIsImZvckVhY2giLCJ3YXJuaW5nIiwiZm9ybWF0RGF0YVF1YWxpdHlSZXBvcnQiLCJzY29yZSIsImxldmVsIiwicmVjb21tZW5kYXRpb25zIiwiZW1vamkiLCJnZXRRdWFsaXR5RW1vamkiLCJ0b1VwcGVyQ2FzZSIsInJlYyIsInRvTG93ZXJDYXNlIiwiZm9ybWF0UmV0cnlJbmZvIiwiYXR0ZW1wdHMiLCJ0b3RhbERlbGF5TXMiLCJzZWNvbmRzIiwidG9GaXhlZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/formatters/ErrorFormatter.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/formatters/OutputFormatter.js":
/*!**************************************************************!*\
  !*** ../../packages/core/dist/formatters/OutputFormatter.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OutputFormatter: () => (/* binding */ OutputFormatter)\n/* harmony export */ });\n/* harmony import */ var _data_DividendAristocrats_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/DividendAristocrats.js */ \"(rsc)/../../packages/core/dist/data/DividendAristocrats.js\");\n/* harmony import */ var _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../calculators/TechnicalIndicatorCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/TechnicalIndicatorCalculator.js\");\n\n\nclass OutputFormatter {\n    static formatPercentage(value) {\n        return value != null && isFinite(value) ? (value * 100).toFixed(2) + \"%\" : \"\";\n    }\n    static formatNumber(value, digits = 2) {\n        return value == null || !isFinite(value) ? \"\" : value.toFixed(digits);\n    }\n    static formatDividendAnalysis(analysis, _requiredReturn) {\n        const { ticker, quote, ttmDividends, ttmYield, cagr3, cagr5, streak, fundamentals, safeGrowth, forwardDividend, forwardYield, scores, totalScore } = analysis;\n        console.log(`\\n${quote.name} (${ticker})  currency: ${quote.currency}`);\n        console.log(\"\");\n        console.log(`Price:                 ${this.formatNumber(quote.price)} ${quote.currency}`);\n        console.log(`TTM Dividends:         ${this.formatNumber(ttmDividends)} (${this.formatPercentage(ttmYield)})`);\n        console.log(`3y/5y Dividend CAGR:   ${cagr3 == null ? \"\" : this.formatPercentage(cagr3)} / ${cagr5 == null ? \"\" : this.formatPercentage(cagr5)}`);\n        // Enhanced dividend streak display with elite status\n        const eliteStock = _data_DividendAristocrats_js__WEBPACK_IMPORTED_MODULE_0__.DividendEliteDetector.isKnownElite(ticker);\n        let streakDisplay = `${streak} year(s)`;\n        if (eliteStock) {\n            const badge = eliteStock.category === 'king' ? ' King' : ' Aristocrat';\n            streakDisplay = `${streak} year(s) ${badge}`;\n        }\n        console.log(`Dividend streak:       ${streakDisplay}`);\n        console.log(`EPS payout ratio:      ${!isFinite(fundamentals.epsPayoutRatio) ? \"\" : this.formatPercentage(fundamentals.epsPayoutRatio)}`);\n        console.log(`FCF payout ratio:      ${!isFinite(fundamentals.fcfPayoutRatio) ? \"\" : this.formatPercentage(fundamentals.fcfPayoutRatio)}`);\n        console.log(`FCF coverage:          ${!isFinite(fundamentals.fcfCoverage) ? \"\" : this.formatNumber(fundamentals.fcfCoverage, 2)}x`);\n        console.log(`Safe growth used:      ${this.formatPercentage(safeGrowth)}`);\n        console.log(`Expected fwd yield:    ${this.formatPercentage(forwardYield)}  (from D1=${this.formatNumber(forwardDividend)})`);\n        // Add technical indicators if available\n        const hasEMA = analysis.ema && (analysis.ema.ema20 || analysis.ema.ema50 || analysis.ema.ema200);\n        const hasMACD = analysis.macd && (analysis.macd.macdLine !== null || analysis.macd.signalLine !== null);\n        const hasRSI = analysis.rsi && analysis.rsi.rsi !== null;\n        if (hasEMA || hasMACD || hasRSI) {\n            console.log(`\\nTechnical Indicators:`);\n            // EMA indicators\n            if (hasEMA) {\n                if (analysis.ema.ema200) {\n                    const ema200Status = quote.price > analysis.ema.ema200 ? 'ABOVE' : 'BELOW';\n                    console.log(` EMA200: ${this.formatNumber(analysis.ema.ema200)} (${ema200Status})`);\n                }\n                if (analysis.ema.ema50) {\n                    const ema50Status = quote.price > analysis.ema.ema50 ? 'ABOVE' : 'BELOW';\n                    console.log(` EMA50:  ${this.formatNumber(analysis.ema.ema50)} (${ema50Status})`);\n                }\n                if (analysis.ema.ema20) {\n                    const ema20Status = quote.price > analysis.ema.ema20 ? 'ABOVE' : 'BELOW';\n                    console.log(` EMA20:  ${this.formatNumber(analysis.ema.ema20)} (${ema20Status})`);\n                }\n            }\n            // MACD indicators\n            if (hasMACD) {\n                const macdAnalysis = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_1__.TechnicalIndicatorCalculator.analyzeMACD(analysis.macd);\n                const signalIcon = macdAnalysis.signal === 'bullish' ? '' : macdAnalysis.signal === 'bearish' ? '' : '';\n                console.log(` MACD:   ${signalIcon} ${macdAnalysis.signal.toUpperCase()} (${macdAnalysis.strength})`);\n                if (analysis.macd.macdLine !== null && analysis.macd.signalLine !== null) {\n                    console.log(`  - MACD Line: ${this.formatNumber(analysis.macd.macdLine, 4)}`);\n                    console.log(`  - Signal:    ${this.formatNumber(analysis.macd.signalLine, 4)}`);\n                }\n                if (analysis.macd.histogram !== null) {\n                    const histogramIcon = analysis.macd.histogram > 0 ? '' : analysis.macd.histogram < 0 ? '' : '';\n                    console.log(`  - Histogram: ${this.formatNumber(analysis.macd.histogram, 4)} ${histogramIcon}`);\n                }\n                if (macdAnalysis.crossover !== 'none') {\n                    const crossIcon = macdAnalysis.crossover === 'bullish_crossover' ? '' : '';\n                    console.log(`  - ${crossIcon} ${macdAnalysis.crossover.replace('_', ' ').toUpperCase()}`);\n                }\n            }\n            // RSI indicators\n            if (hasRSI) {\n                const rsiAnalysis = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_1__.TechnicalIndicatorCalculator.analyzeRSI(analysis.rsi);\n                const signalIcon = rsiAnalysis.signal === 'overbought' ? '' : rsiAnalysis.signal === 'oversold' ? '' : '';\n                const conditionText = rsiAnalysis.condition === 'extreme_overbought' ? 'EXTREME OVERBOUGHT' : rsiAnalysis.condition === 'extreme_oversold' ? 'EXTREME OVERSOLD' : rsiAnalysis.signal.toUpperCase();\n                console.log(` RSI(${analysis.rsi.period}): ${signalIcon} ${this.formatNumber(analysis.rsi.rsi, 1)} (${conditionText})`);\n                if (rsiAnalysis.strength !== 'weak') {\n                    console.log(`  - Strength: ${rsiAnalysis.strength.toUpperCase()}`);\n                }\n                if (rsiAnalysis.trend !== 'stable') {\n                    const trendIcon = rsiAnalysis.trend === 'rising' ? '' : '';\n                    console.log(`  - Trend: ${trendIcon} ${rsiAnalysis.trend.toUpperCase()}`);\n                }\n            }\n        }\n        console.log(`\\nDividend Potential Score: ${totalScore}/100`);\n        console.log(` Drivers  payout:${this.formatNumber(scores.payout, 0)} fcf:${this.formatNumber(scores.fcf, 0)} streak:${this.formatNumber(scores.streak, 0)} growth:${this.formatNumber(scores.growth, 0)} trend:${this.formatNumber(scores.trend, 0)} macd:${this.formatNumber(scores.macd, 0)} rsi:${this.formatNumber(scores.rsi, 0)}`);\n    }\n    static formatGordonGrowthModel(ddmPrice, currentPrice, requiredReturn, safeGrowth) {\n        if (ddmPrice) {\n            const ddmUpside = (ddmPrice - currentPrice) / currentPrice;\n            console.log(`\\n[DDM] r=${(requiredReturn * 100).toFixed(1)}% g=${this.formatPercentage(safeGrowth)}  ->  price*= ${this.formatNumber(ddmPrice)}  (${this.formatPercentage(ddmUpside)} vs current)`);\n        }\n    }\n    static formatFooter() {\n        console.log(\"\\nNotes: This is an educational heuristic, not investment advice.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L2Zvcm1hdHRlcnMvT3V0cHV0Rm9ybWF0dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RTtBQUN1QjtBQUN2RixNQUFNRTtJQUNULE9BQU9DLGlCQUFpQkMsS0FBSyxFQUFFO1FBQzNCLE9BQU9BLFNBQVMsUUFBUUMsU0FBU0QsU0FBUyxDQUFDQSxRQUFRLEdBQUUsRUFBR0UsT0FBTyxDQUFDLEtBQUssTUFBTTtJQUMvRTtJQUNBLE9BQU9DLGFBQWFILEtBQUssRUFBRUksU0FBUyxDQUFDLEVBQUU7UUFDbkMsT0FBT0osU0FBUyxRQUFRLENBQUNDLFNBQVNELFNBQVMsTUFBTUEsTUFBTUUsT0FBTyxDQUFDRTtJQUNuRTtJQUNBLE9BQU9DLHVCQUF1QkMsUUFBUSxFQUFFQyxlQUFlLEVBQUU7UUFDckQsTUFBTSxFQUFFQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsWUFBWSxFQUFFQyxRQUFRLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxNQUFNLEVBQUVDLFlBQVksRUFBRUMsVUFBVSxFQUFFQyxlQUFlLEVBQUVDLFlBQVksRUFBRUMsTUFBTSxFQUFFQyxVQUFVLEVBQUUsR0FBR2Q7UUFDckplLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRWIsTUFBTWMsSUFBSSxDQUFDLEVBQUUsRUFBRWYsT0FBTyxjQUFjLEVBQUVDLE1BQU1lLFFBQVEsRUFBRTtRQUN2RUgsUUFBUUMsR0FBRyxDQUFDO1FBQ1pELFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHVCQUF1QixFQUFFLElBQUksQ0FBQ25CLFlBQVksQ0FBQ00sTUFBTWdCLEtBQUssRUFBRSxDQUFDLEVBQUVoQixNQUFNZSxRQUFRLEVBQUU7UUFDeEZILFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHVCQUF1QixFQUFFLElBQUksQ0FBQ25CLFlBQVksQ0FBQ08sY0FBYyxFQUFFLEVBQUUsSUFBSSxDQUFDWCxnQkFBZ0IsQ0FBQ1ksVUFBVSxDQUFDLENBQUM7UUFD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QUFFLEVBQUd0RSxPQUFPLENBQUMsR0FBRyxJQUFJLEVBQUUsSUFBSSxDQUFDSCxnQkFBZ0IsQ0FBQ2lCLFlBQVksY0FBYyxFQUFFLElBQUksQ0FBQ2IsWUFBWSxDQUFDbUUsVUFBVSxHQUFHLEVBQUUsSUFBSSxDQUFDdkUsZ0JBQWdCLENBQUMwRSxXQUFXLFlBQVksQ0FBQztRQUN0TTtJQUNKO0lBQ0EsT0FBT0MsZUFBZTtRQUNsQnJELFFBQVFDLEdBQUcsQ0FBQztJQUNoQjtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbWFydGluc3Rhcm9zdGEvRGV2ZWxvcG1lbnQvdmliZXMvZGl2eXkvcGFja2FnZXMvY29yZS9kaXN0L2Zvcm1hdHRlcnMvT3V0cHV0Rm9ybWF0dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpdmlkZW5kRWxpdGVEZXRlY3RvciB9IGZyb20gJy4uL2RhdGEvRGl2aWRlbmRBcmlzdG9jcmF0cy5qcyc7XG5pbXBvcnQgeyBUZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yIH0gZnJvbSAnLi4vY2FsY3VsYXRvcnMvVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvci5qcyc7XG5leHBvcnQgY2xhc3MgT3V0cHV0Rm9ybWF0dGVyIHtcbiAgICBzdGF0aWMgZm9ybWF0UGVyY2VudGFnZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0Zpbml0ZSh2YWx1ZSkgPyAodmFsdWUgKiAxMDApLnRvRml4ZWQoMikgKyBcIiVcIiA6IFwi4oCUXCI7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JtYXROdW1iZXIodmFsdWUsIGRpZ2l0cyA9IDIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09IG51bGwgfHwgIWlzRmluaXRlKHZhbHVlKSA/IFwi4oCUXCIgOiB2YWx1ZS50b0ZpeGVkKGRpZ2l0cyk7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JtYXREaXZpZGVuZEFuYWx5c2lzKGFuYWx5c2lzLCBfcmVxdWlyZWRSZXR1cm4pIHtcbiAgICAgICAgY29uc3QgeyB0aWNrZXIsIHF1b3RlLCB0dG1EaXZpZGVuZHMsIHR0bVlpZWxkLCBjYWdyMywgY2FncjUsIHN0cmVhaywgZnVuZGFtZW50YWxzLCBzYWZlR3Jvd3RoLCBmb3J3YXJkRGl2aWRlbmQsIGZvcndhcmRZaWVsZCwgc2NvcmVzLCB0b3RhbFNjb3JlIH0gPSBhbmFseXNpcztcbiAgICAgICAgY29uc29sZS5sb2coYFxcbiR7cXVvdGUubmFtZX0gKCR7dGlja2VyfSkg4oCUIGN1cnJlbmN5OiAke3F1b3RlLmN1cnJlbmN5fWApO1xuICAgICAgICBjb25zb2xlLmxvZyhcIuKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFwiKTtcbiAgICAgICAgY29uc29sZS5sb2coYFByaWNlOiAgICAgICAgICAgICAgICAgJHt0aGlzLmZvcm1hdE51bWJlcihxdW90ZS5wcmljZSl9ICR7cXVvdGUuY3VycmVuY3l9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBUVE0gRGl2aWRlbmRzOiAgICAgICAgICR7dGhpcy5mb3JtYXROdW1iZXIodHRtRGl2aWRlbmRzKX0gKCR7dGhpcy5mb3JtYXRQZXJjZW50YWdlKHR0bVlpZWxkKX0pYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAzeS81eSBEaXZpZGVuZCBDQUdSOiAgICR7Y2FncjMgPT0gbnVsbCA/IFwi4oCUXCIgOiB0aGlzLmZvcm1hdFBlcmNlbnRhZ2UoY2FncjMpfSAvICR7Y2FncjUgPT0gbnVsbCA/IFwi4oCUXCIgOiB0aGlzLmZvcm1hdFBlcmNlbnRhZ2UoY2FncjUpfWApO1xuICAgICAgICAvLyBFbmhhbmNlZCBkaXZpZGVuZCBzdHJlYWsgZGlzcGxheSB3aXRoIGVsaXRlIHN0YXR1c1xuICAgICAgICBjb25zdCBlbGl0ZVN0b2NrID0gRGl2aWRlbmRFbGl0ZURldGVjdG9yLmlzS25vd25FbGl0ZSh0aWNrZXIpO1xuICAgICAgICBsZXQgc3RyZWFrRGlzcGxheSA9IGAke3N0cmVha30geWVhcihzKWA7XG4gICAgICAgIGlmIChlbGl0ZVN0b2NrKSB7XG4gICAgICAgICAgICBjb25zdCBiYWRnZSA9IGVsaXRlU3RvY2suY2F0ZWdvcnkgPT09ICdraW5nJyA/ICfwn5GRIEtpbmcnIDogJ/Cfj4YgQXJpc3RvY3JhdCc7XG4gICAgICAgICAgICBzdHJlYWtEaXNwbGF5ID0gYCR7c3RyZWFrfSB5ZWFyKHMpICR7YmFkZ2V9YDtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhgRGl2aWRlbmQgc3RyZWFrOiAgICAgICAke3N0cmVha0Rpc3BsYXl9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFUFMgcGF5b3V0IHJhdGlvOiAgICAgICR7IWlzRmluaXRlKGZ1bmRhbWVudGFscy5lcHNQYXlvdXRSYXRpbykgPyBcIuKAlFwiIDogdGhpcy5mb3JtYXRQZXJjZW50YWdlKGZ1bmRhbWVudGFscy5lcHNQYXlvdXRSYXRpbyl9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBGQ0YgcGF5b3V0IHJhdGlvOiAgICAgICR7IWlzRmluaXRlKGZ1bmRhbWVudGFscy5mY2ZQYXlvdXRSYXRpbykgPyBcIuKAlFwiIDogdGhpcy5mb3JtYXRQZXJjZW50YWdlKGZ1bmRhbWVudGFscy5mY2ZQYXlvdXRSYXRpbyl9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBGQ0YgY292ZXJhZ2U6ICAgICAgICAgICR7IWlzRmluaXRlKGZ1bmRhbWVudGFscy5mY2ZDb3ZlcmFnZSkgPyBcIuKAlFwiIDogdGhpcy5mb3JtYXROdW1iZXIoZnVuZGFtZW50YWxzLmZjZkNvdmVyYWdlLCAyKX14YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBTYWZlIGdyb3d0aCB1c2VkOiAgICAgICR7dGhpcy5mb3JtYXRQZXJjZW50YWdlKHNhZmVHcm93dGgpfWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgRXhwZWN0ZWQgZndkIHlpZWxkOiAgICAke3RoaXMuZm9ybWF0UGVyY2VudGFnZShmb3J3YXJkWWllbGQpfSAgKGZyb20gRDE9JHt0aGlzLmZvcm1hdE51bWJlcihmb3J3YXJkRGl2aWRlbmQpfSlgKTtcbiAgICAgICAgLy8gQWRkIHRlY2huaWNhbCBpbmRpY2F0b3JzIGlmIGF2YWlsYWJsZVxuICAgICAgICBjb25zdCBoYXNFTUEgPSBhbmFseXNpcy5lbWEgJiYgKGFuYWx5c2lzLmVtYS5lbWEyMCB8fCBhbmFseXNpcy5lbWEuZW1hNTAgfHwgYW5hbHlzaXMuZW1hLmVtYTIwMCk7XG4gICAgICAgIGNvbnN0IGhhc01BQ0QgPSBhbmFseXNpcy5tYWNkICYmIChhbmFseXNpcy5tYWNkLm1hY2RMaW5lICE9PSBudWxsIHx8IGFuYWx5c2lzLm1hY2Quc2lnbmFsTGluZSAhPT0gbnVsbCk7XG4gICAgICAgIGNvbnN0IGhhc1JTSSA9IGFuYWx5c2lzLnJzaSAmJiBhbmFseXNpcy5yc2kucnNpICE9PSBudWxsO1xuICAgICAgICBpZiAoaGFzRU1BIHx8IGhhc01BQ0QgfHwgaGFzUlNJKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXFxuVGVjaG5pY2FsIEluZGljYXRvcnM6YCk7XG4gICAgICAgICAgICAvLyBFTUEgaW5kaWNhdG9yc1xuICAgICAgICAgICAgaWYgKGhhc0VNQSkge1xuICAgICAgICAgICAgICAgIGlmIChhbmFseXNpcy5lbWEuZW1hMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYTIwMFN0YXR1cyA9IHF1b3RlLnByaWNlID4gYW5hbHlzaXMuZW1hLmVtYTIwMCA/ICdBQk9WRScgOiAnQkVMT1cnO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4oCiIEVNQTIwMDogJHt0aGlzLmZvcm1hdE51bWJlcihhbmFseXNpcy5lbWEuZW1hMjAwKX0gKCR7ZW1hMjAwU3RhdHVzfSlgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFuYWx5c2lzLmVtYS5lbWE1MCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWE1MFN0YXR1cyA9IHF1b3RlLnByaWNlID4gYW5hbHlzaXMuZW1hLmVtYTUwID8gJ0FCT1ZFJyA6ICdCRUxPVyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDigKIgRU1BNTA6ICAke3RoaXMuZm9ybWF0TnVtYmVyKGFuYWx5c2lzLmVtYS5lbWE1MCl9ICgke2VtYTUwU3RhdHVzfSlgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFuYWx5c2lzLmVtYS5lbWEyMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWEyMFN0YXR1cyA9IHF1b3RlLnByaWNlID4gYW5hbHlzaXMuZW1hLmVtYTIwID8gJ0FCT1ZFJyA6ICdCRUxPVyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDigKIgRU1BMjA6ICAke3RoaXMuZm9ybWF0TnVtYmVyKGFuYWx5c2lzLmVtYS5lbWEyMCl9ICgke2VtYTIwU3RhdHVzfSlgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNQUNEIGluZGljYXRvcnNcbiAgICAgICAgICAgIGlmIChoYXNNQUNEKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFjZEFuYWx5c2lzID0gVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvci5hbmFseXplTUFDRChhbmFseXNpcy5tYWNkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduYWxJY29uID0gbWFjZEFuYWx5c2lzLnNpZ25hbCA9PT0gJ2J1bGxpc2gnID8gJ/Cfk4gnIDpcbiAgICAgICAgICAgICAgICAgICAgbWFjZEFuYWx5c2lzLnNpZ25hbCA9PT0gJ2JlYXJpc2gnID8gJ/Cfk4knIDogJ+Keoe+4jyc7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKAoiBNQUNEOiAgICR7c2lnbmFsSWNvbn0gJHttYWNkQW5hbHlzaXMuc2lnbmFsLnRvVXBwZXJDYXNlKCl9ICgke21hY2RBbmFseXNpcy5zdHJlbmd0aH0pYCk7XG4gICAgICAgICAgICAgICAgaWYgKGFuYWx5c2lzLm1hY2QubWFjZExpbmUgIT09IG51bGwgJiYgYW5hbHlzaXMubWFjZC5zaWduYWxMaW5lICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIC0gTUFDRCBMaW5lOiAke3RoaXMuZm9ybWF0TnVtYmVyKGFuYWx5c2lzLm1hY2QubWFjZExpbmUsIDQpfWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgICAtIFNpZ25hbDogICAgJHt0aGlzLmZvcm1hdE51bWJlcihhbmFseXNpcy5tYWNkLnNpZ25hbExpbmUsIDQpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYW5hbHlzaXMubWFjZC5oaXN0b2dyYW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGlzdG9ncmFtSWNvbiA9IGFuYWx5c2lzLm1hY2QuaGlzdG9ncmFtID4gMCA/ICfirIbvuI8nIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuYWx5c2lzLm1hY2QuaGlzdG9ncmFtIDwgMCA/ICfirIfvuI8nIDogJ+Keoe+4jyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIC0gSGlzdG9ncmFtOiAke3RoaXMuZm9ybWF0TnVtYmVyKGFuYWx5c2lzLm1hY2QuaGlzdG9ncmFtLCA0KX0gJHtoaXN0b2dyYW1JY29ufWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWFjZEFuYWx5c2lzLmNyb3Nzb3ZlciAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNyb3NzSWNvbiA9IG1hY2RBbmFseXNpcy5jcm9zc292ZXIgPT09ICdidWxsaXNoX2Nyb3Nzb3ZlcicgPyAn8J+agCcgOiAn4pqg77iPJztcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCAgLSAke2Nyb3NzSWNvbn0gJHttYWNkQW5hbHlzaXMuY3Jvc3NvdmVyLnJlcGxhY2UoJ18nLCAnICcpLnRvVXBwZXJDYXNlKCl9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUlNJIGluZGljYXRvcnNcbiAgICAgICAgICAgIGlmIChoYXNSU0kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByc2lBbmFseXNpcyA9IFRlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IuYW5hbHl6ZVJTSShhbmFseXNpcy5yc2kpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hbEljb24gPSByc2lBbmFseXNpcy5zaWduYWwgPT09ICdvdmVyYm91Z2h0JyA/ICfwn5OI8J+UtCcgOlxuICAgICAgICAgICAgICAgICAgICByc2lBbmFseXNpcy5zaWduYWwgPT09ICdvdmVyc29sZCcgPyAn8J+TifCfn6InIDogJ/Cfk4onO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvblRleHQgPSByc2lBbmFseXNpcy5jb25kaXRpb24gPT09ICdleHRyZW1lX292ZXJib3VnaHQnID8gJ0VYVFJFTUUgT1ZFUkJPVUdIVCcgOlxuICAgICAgICAgICAgICAgICAgICByc2lBbmFseXNpcy5jb25kaXRpb24gPT09ICdleHRyZW1lX292ZXJzb2xkJyA/ICdFWFRSRU1FIE9WRVJTT0xEJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByc2lBbmFseXNpcy5zaWduYWwudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4oCiIFJTSSgke2FuYWx5c2lzLnJzaS5wZXJpb2R9KTogJHtzaWduYWxJY29ufSAke3RoaXMuZm9ybWF0TnVtYmVyKGFuYWx5c2lzLnJzaS5yc2ksIDEpfSAoJHtjb25kaXRpb25UZXh0fSlgKTtcbiAgICAgICAgICAgICAgICBpZiAocnNpQW5hbHlzaXMuc3RyZW5ndGggIT09ICd3ZWFrJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgICAtIFN0cmVuZ3RoOiAke3JzaUFuYWx5c2lzLnN0cmVuZ3RoLnRvVXBwZXJDYXNlKCl9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyc2lBbmFseXNpcy50cmVuZCAhPT0gJ3N0YWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJlbmRJY29uID0gcnNpQW5hbHlzaXMudHJlbmQgPT09ICdyaXNpbmcnID8gJ+Kshu+4jycgOiAn4qyH77iPJztcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCAgLSBUcmVuZDogJHt0cmVuZEljb259ICR7cnNpQW5hbHlzaXMudHJlbmQudG9VcHBlckNhc2UoKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coYFxcbkRpdmlkZW5kIFBvdGVudGlhbCBTY29yZTogJHt0b3RhbFNjb3JlfS8xMDBgKTtcbiAgICAgICAgY29uc29sZS5sb2coYOKAoiBEcml2ZXJzIOKGkiBwYXlvdXQ6JHt0aGlzLmZvcm1hdE51bWJlcihzY29yZXMucGF5b3V0LCAwKX0gZmNmOiR7dGhpcy5mb3JtYXROdW1iZXIoc2NvcmVzLmZjZiwgMCl9IHN0cmVhazoke3RoaXMuZm9ybWF0TnVtYmVyKHNjb3Jlcy5zdHJlYWssIDApfSBncm93dGg6JHt0aGlzLmZvcm1hdE51bWJlcihzY29yZXMuZ3Jvd3RoLCAwKX0gdHJlbmQ6JHt0aGlzLmZvcm1hdE51bWJlcihzY29yZXMudHJlbmQsIDApfSBtYWNkOiR7dGhpcy5mb3JtYXROdW1iZXIoc2NvcmVzLm1hY2QsIDApfSByc2k6JHt0aGlzLmZvcm1hdE51bWJlcihzY29yZXMucnNpLCAwKX1gKTtcbiAgICB9XG4gICAgc3RhdGljIGZvcm1hdEdvcmRvbkdyb3d0aE1vZGVsKGRkbVByaWNlLCBjdXJyZW50UHJpY2UsIHJlcXVpcmVkUmV0dXJuLCBzYWZlR3Jvd3RoKSB7XG4gICAgICAgIGlmIChkZG1QcmljZSkge1xuICAgICAgICAgICAgY29uc3QgZGRtVXBzaWRlID0gKGRkbVByaWNlIC0gY3VycmVudFByaWNlKSAvIGN1cnJlbnRQcmljZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcXG5bRERNXSByPSR7KHJlcXVpcmVkUmV0dXJuICogMTAwKS50b0ZpeGVkKDEpfSUgZz0ke3RoaXMuZm9ybWF0UGVyY2VudGFnZShzYWZlR3Jvd3RoKX0gIC0+ICBwcmljZSo9ICR7dGhpcy5mb3JtYXROdW1iZXIoZGRtUHJpY2UpfSAgKCR7dGhpcy5mb3JtYXRQZXJjZW50YWdlKGRkbVVwc2lkZSl9IHZzIGN1cnJlbnQpYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZvcm1hdEZvb3RlcigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJcXG5Ob3RlczogVGhpcyBpcyBhbiBlZHVjYXRpb25hbCBoZXVyaXN0aWMsIG5vdCBpbnZlc3RtZW50IGFkdmljZS5cIik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkRpdmlkZW5kRWxpdGVEZXRlY3RvciIsIlRlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IiLCJPdXRwdXRGb3JtYXR0ZXIiLCJmb3JtYXRQZXJjZW50YWdlIiwidmFsdWUiLCJpc0Zpbml0ZSIsInRvRml4ZWQiLCJmb3JtYXROdW1iZXIiLCJkaWdpdHMiLCJmb3JtYXREaXZpZGVuZEFuYWx5c2lzIiwiYW5hbHlzaXMiLCJfcmVxdWlyZWRSZXR1cm4iLCJ0aWNrZXIiLCJxdW90ZSIsInR0bURpdmlkZW5kcyIsInR0bVlpZWxkIiwiY2FncjMiLCJjYWdyNSIsInN0cmVhayIsImZ1bmRhbWVudGFscyIsInNhZmVHcm93dGgiLCJmb3J3YXJkRGl2aWRlbmQiLCJmb3J3YXJkWWllbGQiLCJzY29yZXMiLCJ0b3RhbFNjb3JlIiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJjdXJyZW5jeSIsInByaWNlIiwiZWxpdGVTdG9jayIsImlzS25vd25FbGl0ZSIsInN0cmVha0Rpc3BsYXkiLCJiYWRnZSIsImNhdGVnb3J5IiwiZXBzUGF5b3V0UmF0aW8iLCJmY2ZQYXlvdXRSYXRpbyIsImZjZkNvdmVyYWdlIiwiaGFzRU1BIiwiZW1hIiwiZW1hMjAiLCJlbWE1MCIsImVtYTIwMCIsImhhc01BQ0QiLCJtYWNkIiwibWFjZExpbmUiLCJzaWduYWxMaW5lIiwiaGFzUlNJIiwicnNpIiwiZW1hMjAwU3RhdHVzIiwiZW1hNTBTdGF0dXMiLCJlbWEyMFN0YXR1cyIsIm1hY2RBbmFseXNpcyIsImFuYWx5emVNQUNEIiwic2lnbmFsSWNvbiIsInNpZ25hbCIsInRvVXBwZXJDYXNlIiwic3RyZW5ndGgiLCJoaXN0b2dyYW0iLCJoaXN0b2dyYW1JY29uIiwiY3Jvc3NvdmVyIiwiY3Jvc3NJY29uIiwicmVwbGFjZSIsInJzaUFuYWx5c2lzIiwiYW5hbHl6ZVJTSSIsImNvbmRpdGlvblRleHQiLCJjb25kaXRpb24iLCJwZXJpb2QiLCJ0cmVuZCIsInRyZW5kSWNvbiIsInBheW91dCIsImZjZiIsImdyb3d0aCIsImZvcm1hdEdvcmRvbkdyb3d0aE1vZGVsIiwiZGRtUHJpY2UiLCJjdXJyZW50UHJpY2UiLCJyZXF1aXJlZFJldHVybiIsImRkbVVwc2lkZSIsImZvcm1hdEZvb3RlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/formatters/OutputFormatter.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/lib.js":
/*!***************************************!*\
  !*** ../../packages/core/dist/lib.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AlphaVantageService: () => (/* reexport safe */ _services_AlphaVantageService_js__WEBPACK_IMPORTED_MODULE_2__.AlphaVantageService),\n/* harmony export */   DatabaseService: () => (/* reexport safe */ _services_DatabaseService_js__WEBPACK_IMPORTED_MODULE_3__.DatabaseService),\n/* harmony export */   DividendAnalysis: () => (/* reexport safe */ _models_DividendAnalysis_js__WEBPACK_IMPORTED_MODULE_8__.DividendAnalysis),\n/* harmony export */   DividendAnalysisService: () => (/* reexport safe */ _services_DividendAnalysisService_js__WEBPACK_IMPORTED_MODULE_0__.DividendAnalysisService),\n/* harmony export */   DividendCalculator: () => (/* reexport safe */ _calculators_DividendCalculator_js__WEBPACK_IMPORTED_MODULE_5__.DividendCalculator),\n/* harmony export */   DividendEvent: () => (/* reexport safe */ _models_StockData_js__WEBPACK_IMPORTED_MODULE_9__.DividendEvent),\n/* harmony export */   DividendScores: () => (/* reexport safe */ _models_DividendAnalysis_js__WEBPACK_IMPORTED_MODULE_8__.DividendScores),\n/* harmony export */   DivvyCliApp: () => (/* reexport safe */ _cli_DivvyCliApp_js__WEBPACK_IMPORTED_MODULE_13__.DivvyCliApp),\n/* harmony export */   FallbackDataProvider: () => (/* reexport safe */ _services_FallbackDataProvider_js__WEBPACK_IMPORTED_MODULE_4__.FallbackDataProvider),\n/* harmony export */   Fundamentals: () => (/* reexport safe */ _models_StockData_js__WEBPACK_IMPORTED_MODULE_9__.Fundamentals),\n/* harmony export */   InputValidator: () => (/* reexport safe */ _validation_InputValidator_js__WEBPACK_IMPORTED_MODULE_11__.InputValidator),\n/* harmony export */   OutputFormatter: () => (/* reexport safe */ _formatters_OutputFormatter_js__WEBPACK_IMPORTED_MODULE_12__.OutputFormatter),\n/* harmony export */   Quote: () => (/* reexport safe */ _models_StockData_js__WEBPACK_IMPORTED_MODULE_9__.Quote),\n/* harmony export */   ScoreCalculator: () => (/* reexport safe */ _calculators_ScoreCalculator_js__WEBPACK_IMPORTED_MODULE_6__.ScoreCalculator),\n/* harmony export */   TechnicalIndicatorCalculator: () => (/* reexport safe */ _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_7__.TechnicalIndicatorCalculator),\n/* harmony export */   YahooFinanceService: () => (/* reexport safe */ _services_YahooFinanceService_js__WEBPACK_IMPORTED_MODULE_1__.YahooFinanceService),\n/* harmony export */   calculateCAGR: () => (/* reexport safe */ _utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_10__.calculateCAGR),\n/* harmony export */   clamp: () => (/* reexport safe */ _utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_10__.clamp),\n/* harmony export */   isValidNumber: () => (/* reexport safe */ _utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_10__.isValidNumber),\n/* harmony export */   sum: () => (/* reexport safe */ _utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_10__.sum)\n/* harmony export */ });\n/* harmony import */ var _services_DividendAnalysisService_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./services/DividendAnalysisService.js */ \"(rsc)/../../packages/core/dist/services/DividendAnalysisService.js\");\n/* harmony import */ var _services_YahooFinanceService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./services/YahooFinanceService.js */ \"(rsc)/../../packages/core/dist/services/YahooFinanceService.js\");\n/* harmony import */ var _services_AlphaVantageService_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services/AlphaVantageService.js */ \"(rsc)/../../packages/core/dist/services/AlphaVantageService.js\");\n/* harmony import */ var _services_DatabaseService_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services/DatabaseService.js */ \"(rsc)/../../packages/core/dist/services/DatabaseService.js\");\n/* harmony import */ var _services_FallbackDataProvider_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/FallbackDataProvider.js */ \"(rsc)/../../packages/core/dist/services/FallbackDataProvider.js\");\n/* harmony import */ var _calculators_DividendCalculator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./calculators/DividendCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/DividendCalculator.js\");\n/* harmony import */ var _calculators_ScoreCalculator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./calculators/ScoreCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/ScoreCalculator.js\");\n/* harmony import */ var _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./calculators/TechnicalIndicatorCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/TechnicalIndicatorCalculator.js\");\n/* harmony import */ var _models_DividendAnalysis_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./models/DividendAnalysis.js */ \"(rsc)/../../packages/core/dist/models/DividendAnalysis.js\");\n/* harmony import */ var _models_StockData_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./models/StockData.js */ \"(rsc)/../../packages/core/dist/models/StockData.js\");\n/* harmony import */ var _utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/MathUtils.js */ \"(rsc)/../../packages/core/dist/utils/MathUtils.js\");\n/* harmony import */ var _validation_InputValidator_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./validation/InputValidator.js */ \"(rsc)/../../packages/core/dist/validation/InputValidator.js\");\n/* harmony import */ var _formatters_OutputFormatter_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./formatters/OutputFormatter.js */ \"(rsc)/../../packages/core/dist/formatters/OutputFormatter.js\");\n/* harmony import */ var _cli_DivvyCliApp_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./cli/DivvyCliApp.js */ \"(rsc)/../../packages/core/dist/cli/DivvyCliApp.js\");\n// Main services\n\n\n\n\n\n// Calculators\n\n\n\n// Models\n\n\n// Utilities\n\n\n\n// CLI\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L2xpYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsZ0JBQWdCO0FBQ2dFO0FBQ1I7QUFDQTtBQUNSO0FBQ1U7QUFDMUUsY0FBYztBQUMyRDtBQUNOO0FBQzBCO0FBQzdGLFNBQVM7QUFDb0M7QUFDUDtBQUN0QyxZQUFZO0FBQ3lCO0FBQzJCO0FBQ0U7QUFDbEUsTUFBTTtBQUM2QyIsInNvdXJjZXMiOlsiL1VzZXJzL21hcnRpbnN0YXJvc3RhL0RldmVsb3BtZW50L3ZpYmVzL2Rpdnl5L3BhY2thZ2VzL2NvcmUvZGlzdC9saWIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTWFpbiBzZXJ2aWNlc1xuZXhwb3J0IHsgRGl2aWRlbmRBbmFseXNpc1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL0RpdmlkZW5kQW5hbHlzaXNTZXJ2aWNlLmpzJztcbmV4cG9ydCB7IFlhaG9vRmluYW5jZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL1lhaG9vRmluYW5jZVNlcnZpY2UuanMnO1xuZXhwb3J0IHsgQWxwaGFWYW50YWdlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvQWxwaGFWYW50YWdlU2VydmljZS5qcyc7XG5leHBvcnQgeyBEYXRhYmFzZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL0RhdGFiYXNlU2VydmljZS5qcyc7XG5leHBvcnQgeyBGYWxsYmFja0RhdGFQcm92aWRlciB9IGZyb20gJy4vc2VydmljZXMvRmFsbGJhY2tEYXRhUHJvdmlkZXIuanMnO1xuLy8gQ2FsY3VsYXRvcnNcbmV4cG9ydCB7IERpdmlkZW5kQ2FsY3VsYXRvciB9IGZyb20gJy4vY2FsY3VsYXRvcnMvRGl2aWRlbmRDYWxjdWxhdG9yLmpzJztcbmV4cG9ydCB7IFNjb3JlQ2FsY3VsYXRvciB9IGZyb20gJy4vY2FsY3VsYXRvcnMvU2NvcmVDYWxjdWxhdG9yLmpzJztcbmV4cG9ydCB7IFRlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IgfSBmcm9tICcuL2NhbGN1bGF0b3JzL1RlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IuanMnO1xuLy8gTW9kZWxzXG5leHBvcnQgKiBmcm9tICcuL21vZGVscy9EaXZpZGVuZEFuYWx5c2lzLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vbW9kZWxzL1N0b2NrRGF0YS5qcyc7XG4vLyBVdGlsaXRpZXNcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMvTWF0aFV0aWxzLmpzJztcbmV4cG9ydCB7IElucHV0VmFsaWRhdG9yIH0gZnJvbSAnLi92YWxpZGF0aW9uL0lucHV0VmFsaWRhdG9yLmpzJztcbmV4cG9ydCB7IE91dHB1dEZvcm1hdHRlciB9IGZyb20gJy4vZm9ybWF0dGVycy9PdXRwdXRGb3JtYXR0ZXIuanMnO1xuLy8gQ0xJXG5leHBvcnQgeyBEaXZ2eUNsaUFwcCB9IGZyb20gJy4vY2xpL0RpdnZ5Q2xpQXBwLmpzJztcbiJdLCJuYW1lcyI6WyJEaXZpZGVuZEFuYWx5c2lzU2VydmljZSIsIllhaG9vRmluYW5jZVNlcnZpY2UiLCJBbHBoYVZhbnRhZ2VTZXJ2aWNlIiwiRGF0YWJhc2VTZXJ2aWNlIiwiRmFsbGJhY2tEYXRhUHJvdmlkZXIiLCJEaXZpZGVuZENhbGN1bGF0b3IiLCJTY29yZUNhbGN1bGF0b3IiLCJUZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yIiwiSW5wdXRWYWxpZGF0b3IiLCJPdXRwdXRGb3JtYXR0ZXIiLCJEaXZ2eUNsaUFwcCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/lib.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/models/DividendAnalysis.js":
/*!***********************************************************!*\
  !*** ../../packages/core/dist/models/DividendAnalysis.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DividendAnalysis: () => (/* binding */ DividendAnalysis),\n/* harmony export */   DividendScores: () => (/* binding */ DividendScores)\n/* harmony export */ });\nclass DividendAnalysis {\n    constructor({ ticker, quote, ttmDividends, ttmYield, annualDividends, cagr3, cagr5, streak, fundamentals, safeGrowth, forwardDividend, forwardYield, scores, totalScore, ema, macd, rsi }){\n        this.ticker = ticker;\n        this.quote = quote;\n        this.ttmDividends = ttmDividends;\n        this.ttmYield = ttmYield;\n        this.annualDividends = annualDividends;\n        this.cagr3 = cagr3;\n        this.cagr5 = cagr5;\n        this.streak = streak;\n        this.fundamentals = fundamentals;\n        this.safeGrowth = safeGrowth;\n        this.forwardDividend = forwardDividend;\n        this.forwardYield = forwardYield;\n        this.scores = scores;\n        this.totalScore = totalScore;\n        this.ema = ema;\n        this.macd = macd;\n        this.rsi = rsi;\n    }\n}\nclass DividendScores {\n    constructor({ payout, fcf, streak, growth, trend, macd, rsi }){\n        this.payout = payout;\n        this.fcf = fcf;\n        this.streak = streak;\n        this.growth = growth;\n        this.trend = trend;\n        this.macd = macd;\n        this.rsi = rsi;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L21vZGVscy9EaXZpZGVuZEFuYWx5c2lzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sTUFBTUE7SUFrQlQsWUFBWSxFQUFFQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsWUFBWSxFQUFFQyxRQUFRLEVBQUVDLGVBQWUsRUFBRUMsS0FBSyxFQUFFQyxLQUFLLEVBQUVDLE1BQU0sRUFBRUMsWUFBWSxFQUFFQyxVQUFVLEVBQUVDLGVBQWUsRUFBRUMsWUFBWSxFQUFFQyxNQUFNLEVBQUVDLFVBQVUsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEdBQUcsRUFBRSxDQUFFO1FBQ3ZMLElBQUksQ0FBQ2hCLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNDLEtBQUssR0FBR0E7UUFDYixJQUFJLENBQUNDLFlBQVksR0FBR0E7UUFDcEIsSUFBSSxDQUFDQyxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsZUFBZSxHQUFHQTtRQUN2QixJQUFJLENBQUNDLEtBQUssR0FBR0E7UUFDYixJQUFJLENBQUNDLEtBQUssR0FBR0E7UUFDYixJQUFJLENBQUNDLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNDLFlBQVksR0FBR0E7UUFDcEIsSUFBSSxDQUFDQyxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsZUFBZSxHQUFHQTtRQUN2QixJQUFJLENBQUNDLFlBQVksR0FBR0E7UUFDcEIsSUFBSSxDQUFDQyxNQUFNLEdBQUdBO1FBQ2QsSUFBSSxDQUFDQyxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsR0FBRyxHQUFHQTtRQUNYLElBQUksQ0FBQ0MsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0MsR0FBRyxHQUFHQTtJQUNmO0FBQ0o7QUFDTyxNQUFNQztJQVFULFlBQVksRUFBRUMsTUFBTSxFQUFFQyxHQUFHLEVBQUVaLE1BQU0sRUFBRWEsTUFBTSxFQUFFQyxLQUFLLEVBQUVOLElBQUksRUFBRUMsR0FBRyxFQUFFLENBQUU7UUFDM0QsSUFBSSxDQUFDRSxNQUFNLEdBQUdBO1FBQ2QsSUFBSSxDQUFDQyxHQUFHLEdBQUdBO1FBQ1gsSUFBSSxDQUFDWixNQUFNLEdBQUdBO1FBQ2QsSUFBSSxDQUFDYSxNQUFNLEdBQUdBO1FBQ2QsSUFBSSxDQUFDQyxLQUFLLEdBQUdBO1FBQ2IsSUFBSSxDQUFDTixJQUFJLEdBQUdBO1FBQ1osSUFBSSxDQUFDQyxHQUFHLEdBQUdBO0lBQ2Y7QUFDSiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcnRpbnN0YXJvc3RhL0RldmVsb3BtZW50L3ZpYmVzL2Rpdnl5L3BhY2thZ2VzL2NvcmUvZGlzdC9tb2RlbHMvRGl2aWRlbmRBbmFseXNpcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgRGl2aWRlbmRBbmFseXNpcyB7XG4gICAgdGlja2VyO1xuICAgIHF1b3RlO1xuICAgIHR0bURpdmlkZW5kcztcbiAgICB0dG1ZaWVsZDtcbiAgICBhbm51YWxEaXZpZGVuZHM7XG4gICAgY2FncjM7XG4gICAgY2FncjU7XG4gICAgc3RyZWFrO1xuICAgIGZ1bmRhbWVudGFscztcbiAgICBzYWZlR3Jvd3RoO1xuICAgIGZvcndhcmREaXZpZGVuZDtcbiAgICBmb3J3YXJkWWllbGQ7XG4gICAgc2NvcmVzO1xuICAgIHRvdGFsU2NvcmU7XG4gICAgZW1hO1xuICAgIG1hY2Q7XG4gICAgcnNpO1xuICAgIGNvbnN0cnVjdG9yKHsgdGlja2VyLCBxdW90ZSwgdHRtRGl2aWRlbmRzLCB0dG1ZaWVsZCwgYW5udWFsRGl2aWRlbmRzLCBjYWdyMywgY2FncjUsIHN0cmVhaywgZnVuZGFtZW50YWxzLCBzYWZlR3Jvd3RoLCBmb3J3YXJkRGl2aWRlbmQsIGZvcndhcmRZaWVsZCwgc2NvcmVzLCB0b3RhbFNjb3JlLCBlbWEsIG1hY2QsIHJzaSB9KSB7XG4gICAgICAgIHRoaXMudGlja2VyID0gdGlja2VyO1xuICAgICAgICB0aGlzLnF1b3RlID0gcXVvdGU7XG4gICAgICAgIHRoaXMudHRtRGl2aWRlbmRzID0gdHRtRGl2aWRlbmRzO1xuICAgICAgICB0aGlzLnR0bVlpZWxkID0gdHRtWWllbGQ7XG4gICAgICAgIHRoaXMuYW5udWFsRGl2aWRlbmRzID0gYW5udWFsRGl2aWRlbmRzO1xuICAgICAgICB0aGlzLmNhZ3IzID0gY2FncjM7XG4gICAgICAgIHRoaXMuY2FncjUgPSBjYWdyNTtcbiAgICAgICAgdGhpcy5zdHJlYWsgPSBzdHJlYWs7XG4gICAgICAgIHRoaXMuZnVuZGFtZW50YWxzID0gZnVuZGFtZW50YWxzO1xuICAgICAgICB0aGlzLnNhZmVHcm93dGggPSBzYWZlR3Jvd3RoO1xuICAgICAgICB0aGlzLmZvcndhcmREaXZpZGVuZCA9IGZvcndhcmREaXZpZGVuZDtcbiAgICAgICAgdGhpcy5mb3J3YXJkWWllbGQgPSBmb3J3YXJkWWllbGQ7XG4gICAgICAgIHRoaXMuc2NvcmVzID0gc2NvcmVzO1xuICAgICAgICB0aGlzLnRvdGFsU2NvcmUgPSB0b3RhbFNjb3JlO1xuICAgICAgICB0aGlzLmVtYSA9IGVtYTtcbiAgICAgICAgdGhpcy5tYWNkID0gbWFjZDtcbiAgICAgICAgdGhpcy5yc2kgPSByc2k7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIERpdmlkZW5kU2NvcmVzIHtcbiAgICBwYXlvdXQ7XG4gICAgZmNmO1xuICAgIHN0cmVhaztcbiAgICBncm93dGg7XG4gICAgdHJlbmQ7XG4gICAgbWFjZDtcbiAgICByc2k7XG4gICAgY29uc3RydWN0b3IoeyBwYXlvdXQsIGZjZiwgc3RyZWFrLCBncm93dGgsIHRyZW5kLCBtYWNkLCByc2kgfSkge1xuICAgICAgICB0aGlzLnBheW91dCA9IHBheW91dDtcbiAgICAgICAgdGhpcy5mY2YgPSBmY2Y7XG4gICAgICAgIHRoaXMuc3RyZWFrID0gc3RyZWFrO1xuICAgICAgICB0aGlzLmdyb3d0aCA9IGdyb3d0aDtcbiAgICAgICAgdGhpcy50cmVuZCA9IHRyZW5kO1xuICAgICAgICB0aGlzLm1hY2QgPSBtYWNkO1xuICAgICAgICB0aGlzLnJzaSA9IHJzaTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiRGl2aWRlbmRBbmFseXNpcyIsInRpY2tlciIsInF1b3RlIiwidHRtRGl2aWRlbmRzIiwidHRtWWllbGQiLCJhbm51YWxEaXZpZGVuZHMiLCJjYWdyMyIsImNhZ3I1Iiwic3RyZWFrIiwiZnVuZGFtZW50YWxzIiwic2FmZUdyb3d0aCIsImZvcndhcmREaXZpZGVuZCIsImZvcndhcmRZaWVsZCIsInNjb3JlcyIsInRvdGFsU2NvcmUiLCJlbWEiLCJtYWNkIiwicnNpIiwiRGl2aWRlbmRTY29yZXMiLCJwYXlvdXQiLCJmY2YiLCJncm93dGgiLCJ0cmVuZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/models/DividendAnalysis.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/models/StockData.js":
/*!****************************************************!*\
  !*** ../../packages/core/dist/models/StockData.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DividendEvent: () => (/* binding */ DividendEvent),\n/* harmony export */   Fundamentals: () => (/* binding */ Fundamentals),\n/* harmony export */   Quote: () => (/* binding */ Quote)\n/* harmony export */ });\nclass Quote {\n    constructor({ regularMarketPrice, postMarketPrice, preMarketPrice, currency, shortName, longName, sector, industry }){\n        this.price = regularMarketPrice || postMarketPrice || preMarketPrice || 0;\n        this.currency = currency || \"USD\";\n        this.name = shortName || longName || \"\";\n        this.sector = sector || null;\n        this.industry = industry || null;\n    }\n}\nclass DividendEvent {\n    constructor({ date, amount }){\n        this.date = new Date(typeof date === 'number' ? date * 1000 : date);\n        this.amount = Number(amount);\n    }\n    get year() {\n        return this.date.getUTCFullYear();\n    }\n    isValid() {\n        return this.amount > 0 && isFinite(this.amount) && this.year > 1990 && this.year < 2030;\n    }\n}\nclass Fundamentals {\n    constructor(data = {}){\n        this.operatingCashFlow = this.extractValue(data.OperatingCashFlow);\n        this.capitalExpenditure = Math.abs(this.extractValue(data.CapitalExpenditure));\n        this.cashDividendsPaid = Math.abs(this.extractValue(data.CashDividendsPaid));\n        this.netIncome = this.extractValue(data.NetIncome);\n        this.payoutRatio = this.extractValue(data.payoutRatio);\n    }\n    extractValue(field) {\n        if (!field) return NaN;\n        if (typeof field === 'number') return field;\n        return Number(field.raw ?? field);\n    }\n    get freeCashFlow() {\n        return isFinite(this.operatingCashFlow) && isFinite(this.capitalExpenditure) ? this.operatingCashFlow - this.capitalExpenditure : NaN;\n    }\n    get fcfPayoutRatio() {\n        const fcf = this.freeCashFlow;\n        return isFinite(this.cashDividendsPaid) && isFinite(fcf) && fcf !== 0 ? this.cashDividendsPaid / fcf : NaN;\n    }\n    get fcfCoverage() {\n        const fcf = this.freeCashFlow;\n        return isFinite(this.cashDividendsPaid) && isFinite(fcf) && this.cashDividendsPaid > 0 ? fcf / this.cashDividendsPaid : this.cashDividendsPaid === 0 ? Infinity : NaN;\n    }\n    get epsPayoutRatio() {\n        if (isFinite(this.payoutRatio)) return this.payoutRatio;\n        if (isFinite(this.cashDividendsPaid) && isFinite(this.netIncome) && this.netIncome !== 0) {\n            return this.cashDividendsPaid / Math.abs(this.netIncome);\n        }\n        return NaN;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L21vZGVscy9TdG9ja0RhdGEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sTUFBTUE7SUFNVCxZQUFZLEVBQUVDLGtCQUFrQixFQUFFQyxlQUFlLEVBQUVDLGNBQWMsRUFBRUMsUUFBUSxFQUFFQyxTQUFTLEVBQUVDLFFBQVEsRUFBRUMsTUFBTSxFQUFFQyxRQUFRLEVBQUUsQ0FBRTtRQUNsSCxJQUFJLENBQUNDLEtBQUssR0FBR1Isc0JBQXNCQyxtQkFBbUJDLGtCQUFrQjtRQUN4RSxJQUFJLENBQUNDLFFBQVEsR0FBR0EsWUFBWTtRQUM1QixJQUFJLENBQUNNLElBQUksR0FBR0wsYUFBYUMsWUFBWTtRQUNyQyxJQUFJLENBQUNDLE1BQU0sR0FBR0EsVUFBVTtRQUN4QixJQUFJLENBQUNDLFFBQVEsR0FBR0EsWUFBWTtJQUNoQztBQUNKO0FBQ08sTUFBTUc7SUFHVCxZQUFZLEVBQUVDLElBQUksRUFBRUMsTUFBTSxFQUFFLENBQUU7UUFDMUIsSUFBSSxDQUFDRCxJQUFJLEdBQUcsSUFBSUUsS0FBSyxPQUFPRixTQUFTLFdBQVdBLE9BQU8sT0FBT0E7UUFDOUQsSUFBSSxDQUFDQyxNQUFNLEdBQUdFLE9BQU9GO0lBQ3pCO0lBQ0EsSUFBSUcsT0FBTztRQUNQLE9BQU8sSUFBSSxDQUFDSixJQUFJLENBQUNLLGNBQWM7SUFDbkM7SUFDQUMsVUFBVTtRQUNOLE9BQVEsSUFBSSxDQUFDTCxNQUFNLEdBQUcsS0FDbEJNLFNBQVMsSUFBSSxDQUFDTixNQUFNLEtBQ3BCLElBQUksQ0FBQ0csSUFBSSxHQUFHLFFBQ1osSUFBSSxDQUFDQSxJQUFJLEdBQUc7SUFDcEI7QUFDSjtBQUNPLE1BQU1JO0lBTVQsWUFBWUMsT0FBTyxDQUFDLENBQUMsQ0FBRTtRQUNuQixJQUFJLENBQUNDLGlCQUFpQixHQUFHLElBQUksQ0FBQ0MsWUFBWSxDQUFDRixLQUFLRyxpQkFBaUI7UUFDakUsSUFBSSxDQUFDQyxrQkFBa0IsR0FBR0MsS0FBS0MsR0FBRyxDQUFDLElBQUksQ0FBQ0osWUFBWSxDQUFDRixLQUFLTyxrQkFBa0I7UUFDNUUsSUFBSSxDQUFDQyxpQkFBaUIsR0FBR0gsS0FBS0MsR0FBRyxDQUFDLElBQUksQ0FBQ0osWUFBWSxDQUFDRixLQUFLUyxpQkFBaUI7UUFDMUUsSUFBSSxDQUFDQyxTQUFTLEdBQUcsSUFBSSxDQUFDUixZQUFZLENBQUNGLEtBQUtXLFNBQVM7UUFDakQsSUFBSSxDQUFDQyxXQUFXLEdBQUcsSUFBSSxDQUFDVixZQUFZLENBQUNGLEtBQUtZLFdBQVc7SUFDekQ7SUFDQVYsYUFBYVcsS0FBSyxFQUFFO1FBQ2hCLElBQUksQ0FBQ0EsT0FDRCxPQUFPQztRQUNYLElBQUksT0FBT0QsVUFBVSxVQUNqQixPQUFPQTtRQUNYLE9BQU9uQixPQUFPbUIsTUFBTUUsR0FBRyxJQUFJRjtJQUMvQjtJQUNBLElBQUlHLGVBQWU7UUFDZixPQUFPbEIsU0FBUyxJQUFJLENBQUNHLGlCQUFpQixLQUFLSCxTQUFTLElBQUksQ0FBQ00sa0JBQWtCLElBQ3JFLElBQUksQ0FBQ0gsaUJBQWlCLEdBQUcsSUFBSSxDQUFDRyxrQkFBa0IsR0FDaERVO0lBQ1Y7SUFDQSxJQUFJRyxpQkFBaUI7UUFDakIsTUFBTUMsTUFBTSxJQUFJLENBQUNGLFlBQVk7UUFDN0IsT0FBT2xCLFNBQVMsSUFBSSxDQUFDVSxpQkFBaUIsS0FBS1YsU0FBU29CLFFBQVFBLFFBQVEsSUFDOUQsSUFBSSxDQUFDVixpQkFBaUIsR0FBR1UsTUFDekJKO0lBQ1Y7SUFDQSxJQUFJSyxjQUFjO1FBQ2QsTUFBTUQsTUFBTSxJQUFJLENBQUNGLFlBQVk7UUFDN0IsT0FBT2xCLFNBQVMsSUFBSSxDQUFDVSxpQkFBaUIsS0FBS1YsU0FBU29CLFFBQVEsSUFBSSxDQUFDVixpQkFBaUIsR0FBRyxJQUMvRVUsTUFBTSxJQUFJLENBQUNWLGlCQUFpQixHQUMzQixJQUFJLENBQUNBLGlCQUFpQixLQUFLLElBQUlZLFdBQVdOO0lBQ3JEO0lBQ0EsSUFBSU8saUJBQWlCO1FBQ2pCLElBQUl2QixTQUFTLElBQUksQ0FBQ2MsV0FBVyxHQUN6QixPQUFPLElBQUksQ0FBQ0EsV0FBVztRQUMzQixJQUFJZCxTQUFTLElBQUksQ0FBQ1UsaUJBQWlCLEtBQUtWLFNBQVMsSUFBSSxDQUFDWSxTQUFTLEtBQUssSUFBSSxDQUFDQSxTQUFTLEtBQUssR0FBRztZQUN0RixPQUFPLElBQUksQ0FBQ0YsaUJBQWlCLEdBQUdILEtBQUtDLEdBQUcsQ0FBQyxJQUFJLENBQUNJLFNBQVM7UUFDM0Q7UUFDQSxPQUFPSTtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXJ0aW5zdGFyb3N0YS9EZXZlbG9wbWVudC92aWJlcy9kaXZ5eS9wYWNrYWdlcy9jb3JlL2Rpc3QvbW9kZWxzL1N0b2NrRGF0YS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgUXVvdGUge1xuICAgIHByaWNlO1xuICAgIGN1cnJlbmN5O1xuICAgIG5hbWU7XG4gICAgc2VjdG9yO1xuICAgIGluZHVzdHJ5O1xuICAgIGNvbnN0cnVjdG9yKHsgcmVndWxhck1hcmtldFByaWNlLCBwb3N0TWFya2V0UHJpY2UsIHByZU1hcmtldFByaWNlLCBjdXJyZW5jeSwgc2hvcnROYW1lLCBsb25nTmFtZSwgc2VjdG9yLCBpbmR1c3RyeSB9KSB7XG4gICAgICAgIHRoaXMucHJpY2UgPSByZWd1bGFyTWFya2V0UHJpY2UgfHwgcG9zdE1hcmtldFByaWNlIHx8IHByZU1hcmtldFByaWNlIHx8IDA7XG4gICAgICAgIHRoaXMuY3VycmVuY3kgPSBjdXJyZW5jeSB8fCBcIlVTRFwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBzaG9ydE5hbWUgfHwgbG9uZ05hbWUgfHwgXCJcIjtcbiAgICAgICAgdGhpcy5zZWN0b3IgPSBzZWN0b3IgfHwgbnVsbDtcbiAgICAgICAgdGhpcy5pbmR1c3RyeSA9IGluZHVzdHJ5IHx8IG51bGw7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIERpdmlkZW5kRXZlbnQge1xuICAgIGRhdGU7XG4gICAgYW1vdW50O1xuICAgIGNvbnN0cnVjdG9yKHsgZGF0ZSwgYW1vdW50IH0pIHtcbiAgICAgICAgdGhpcy5kYXRlID0gbmV3IERhdGUodHlwZW9mIGRhdGUgPT09ICdudW1iZXInID8gZGF0ZSAqIDEwMDAgOiBkYXRlKTtcbiAgICAgICAgdGhpcy5hbW91bnQgPSBOdW1iZXIoYW1vdW50KTtcbiAgICB9XG4gICAgZ2V0IHllYXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICB9XG4gICAgaXNWYWxpZCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmFtb3VudCA+IDAgJiZcbiAgICAgICAgICAgIGlzRmluaXRlKHRoaXMuYW1vdW50KSAmJlxuICAgICAgICAgICAgdGhpcy55ZWFyID4gMTk5MCAmJlxuICAgICAgICAgICAgdGhpcy55ZWFyIDwgMjAzMCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEZ1bmRhbWVudGFscyB7XG4gICAgb3BlcmF0aW5nQ2FzaEZsb3c7XG4gICAgY2FwaXRhbEV4cGVuZGl0dXJlO1xuICAgIGNhc2hEaXZpZGVuZHNQYWlkO1xuICAgIG5ldEluY29tZTtcbiAgICBwYXlvdXRSYXRpbztcbiAgICBjb25zdHJ1Y3RvcihkYXRhID0ge30pIHtcbiAgICAgICAgdGhpcy5vcGVyYXRpbmdDYXNoRmxvdyA9IHRoaXMuZXh0cmFjdFZhbHVlKGRhdGEuT3BlcmF0aW5nQ2FzaEZsb3cpO1xuICAgICAgICB0aGlzLmNhcGl0YWxFeHBlbmRpdHVyZSA9IE1hdGguYWJzKHRoaXMuZXh0cmFjdFZhbHVlKGRhdGEuQ2FwaXRhbEV4cGVuZGl0dXJlKSk7XG4gICAgICAgIHRoaXMuY2FzaERpdmlkZW5kc1BhaWQgPSBNYXRoLmFicyh0aGlzLmV4dHJhY3RWYWx1ZShkYXRhLkNhc2hEaXZpZGVuZHNQYWlkKSk7XG4gICAgICAgIHRoaXMubmV0SW5jb21lID0gdGhpcy5leHRyYWN0VmFsdWUoZGF0YS5OZXRJbmNvbWUpO1xuICAgICAgICB0aGlzLnBheW91dFJhdGlvID0gdGhpcy5leHRyYWN0VmFsdWUoZGF0YS5wYXlvdXRSYXRpbyk7XG4gICAgfVxuICAgIGV4dHJhY3RWYWx1ZShmaWVsZCkge1xuICAgICAgICBpZiAoIWZpZWxkKVxuICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZCA9PT0gJ251bWJlcicpXG4gICAgICAgICAgICByZXR1cm4gZmllbGQ7XG4gICAgICAgIHJldHVybiBOdW1iZXIoZmllbGQucmF3ID8/IGZpZWxkKTtcbiAgICB9XG4gICAgZ2V0IGZyZWVDYXNoRmxvdygpIHtcbiAgICAgICAgcmV0dXJuIGlzRmluaXRlKHRoaXMub3BlcmF0aW5nQ2FzaEZsb3cpICYmIGlzRmluaXRlKHRoaXMuY2FwaXRhbEV4cGVuZGl0dXJlKVxuICAgICAgICAgICAgPyB0aGlzLm9wZXJhdGluZ0Nhc2hGbG93IC0gdGhpcy5jYXBpdGFsRXhwZW5kaXR1cmVcbiAgICAgICAgICAgIDogTmFOO1xuICAgIH1cbiAgICBnZXQgZmNmUGF5b3V0UmF0aW8oKSB7XG4gICAgICAgIGNvbnN0IGZjZiA9IHRoaXMuZnJlZUNhc2hGbG93O1xuICAgICAgICByZXR1cm4gaXNGaW5pdGUodGhpcy5jYXNoRGl2aWRlbmRzUGFpZCkgJiYgaXNGaW5pdGUoZmNmKSAmJiBmY2YgIT09IDBcbiAgICAgICAgICAgID8gdGhpcy5jYXNoRGl2aWRlbmRzUGFpZCAvIGZjZlxuICAgICAgICAgICAgOiBOYU47XG4gICAgfVxuICAgIGdldCBmY2ZDb3ZlcmFnZSgpIHtcbiAgICAgICAgY29uc3QgZmNmID0gdGhpcy5mcmVlQ2FzaEZsb3c7XG4gICAgICAgIHJldHVybiBpc0Zpbml0ZSh0aGlzLmNhc2hEaXZpZGVuZHNQYWlkKSAmJiBpc0Zpbml0ZShmY2YpICYmIHRoaXMuY2FzaERpdmlkZW5kc1BhaWQgPiAwXG4gICAgICAgICAgICA/IGZjZiAvIHRoaXMuY2FzaERpdmlkZW5kc1BhaWRcbiAgICAgICAgICAgIDogKHRoaXMuY2FzaERpdmlkZW5kc1BhaWQgPT09IDAgPyBJbmZpbml0eSA6IE5hTik7XG4gICAgfVxuICAgIGdldCBlcHNQYXlvdXRSYXRpbygpIHtcbiAgICAgICAgaWYgKGlzRmluaXRlKHRoaXMucGF5b3V0UmF0aW8pKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF5b3V0UmF0aW87XG4gICAgICAgIGlmIChpc0Zpbml0ZSh0aGlzLmNhc2hEaXZpZGVuZHNQYWlkKSAmJiBpc0Zpbml0ZSh0aGlzLm5ldEluY29tZSkgJiYgdGhpcy5uZXRJbmNvbWUgIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhc2hEaXZpZGVuZHNQYWlkIC8gTWF0aC5hYnModGhpcy5uZXRJbmNvbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOYU47XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlF1b3RlIiwicmVndWxhck1hcmtldFByaWNlIiwicG9zdE1hcmtldFByaWNlIiwicHJlTWFya2V0UHJpY2UiLCJjdXJyZW5jeSIsInNob3J0TmFtZSIsImxvbmdOYW1lIiwic2VjdG9yIiwiaW5kdXN0cnkiLCJwcmljZSIsIm5hbWUiLCJEaXZpZGVuZEV2ZW50IiwiZGF0ZSIsImFtb3VudCIsIkRhdGUiLCJOdW1iZXIiLCJ5ZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJpc1ZhbGlkIiwiaXNGaW5pdGUiLCJGdW5kYW1lbnRhbHMiLCJkYXRhIiwib3BlcmF0aW5nQ2FzaEZsb3ciLCJleHRyYWN0VmFsdWUiLCJPcGVyYXRpbmdDYXNoRmxvdyIsImNhcGl0YWxFeHBlbmRpdHVyZSIsIk1hdGgiLCJhYnMiLCJDYXBpdGFsRXhwZW5kaXR1cmUiLCJjYXNoRGl2aWRlbmRzUGFpZCIsIkNhc2hEaXZpZGVuZHNQYWlkIiwibmV0SW5jb21lIiwiTmV0SW5jb21lIiwicGF5b3V0UmF0aW8iLCJmaWVsZCIsIk5hTiIsInJhdyIsImZyZWVDYXNoRmxvdyIsImZjZlBheW91dFJhdGlvIiwiZmNmIiwiZmNmQ292ZXJhZ2UiLCJJbmZpbml0eSIsImVwc1BheW91dFJhdGlvIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/models/StockData.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/services/AlphaVantageService.js":
/*!****************************************************************!*\
  !*** ../../packages/core/dist/services/AlphaVantageService.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AlphaVantageService: () => (/* binding */ AlphaVantageService)\n/* harmony export */ });\n/* harmony import */ var _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/RetryHandler.js */ \"(rsc)/../../packages/core/dist/utils/RetryHandler.js\");\n/* harmony import */ var _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors/DivvyErrors.js */ \"(rsc)/../../packages/core/dist/errors/DivvyErrors.js\");\n\n\nclass AlphaVantageService {\n    constructor(apiKey, dailyCeiling = 25){\n        this.baseUrl = 'https://www.alphavantage.co/query';\n        this.apiKey = apiKey || process.env.ALPHA_VANTAGE_API_KEY || '';\n        this.dailyCeiling = dailyCeiling;\n        if (!this.apiKey) {\n            throw new Error('Alpha Vantage API key is required. Set ALPHA_VANTAGE_API_KEY environment variable.');\n        }\n    }\n    async getCompanyOverview(symbol) {\n        try {\n            const params = new URLSearchParams({\n                function: 'OVERVIEW',\n                symbol: symbol.toUpperCase(),\n                apikey: this.apiKey\n            });\n            const response = await _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_0__.RetryHandler.withRetry(async ()=>{\n                const res = await fetch(`${this.baseUrl}?${params}`);\n                if (!res.ok) {\n                    throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.NetworkError(`HTTP ${res.status}: ${res.statusText}`);\n                }\n                return res.json();\n            }, _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_0__.RetryHandler.getNetworkRetryConfig());\n            if (response['Error Message']) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.TickerNotFoundError(symbol);\n            }\n            if (response['Note']) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.RateLimitError('Alpha Vantage API rate limit exceeded', 60000 // 1 minute retry delay\n                );\n            }\n            if (!response.Symbol) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.DataSourceError(`Invalid response from Alpha Vantage for ${symbol}`, 'alphavantage', false);\n            }\n            return response;\n        } catch (error) {\n            throw this.handleAlphaVantageError(error, 'overview', symbol);\n        }\n    }\n    async getTimeSeriesDaily(symbol, outputSize = 'compact') {\n        try {\n            const params = new URLSearchParams({\n                function: 'TIME_SERIES_DAILY_ADJUSTED',\n                symbol: symbol.toUpperCase(),\n                outputsize: outputSize,\n                apikey: this.apiKey\n            });\n            const response = await _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_0__.RetryHandler.withRetry(async ()=>{\n                const res = await fetch(`${this.baseUrl}?${params}`);\n                if (!res.ok) {\n                    throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.NetworkError(`HTTP ${res.status}: ${res.statusText}`);\n                }\n                return res.json();\n            }, _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_0__.RetryHandler.getNetworkRetryConfig());\n            if (response['Error Message']) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.TickerNotFoundError(symbol);\n            }\n            if (response['Note']) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.RateLimitError('Alpha Vantage API rate limit exceeded', 60000);\n            }\n            if (!response['Time Series (Daily)']) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.DataSourceError(`No time series data available for ${symbol}`, 'alphavantage', false);\n            }\n            return response;\n        } catch (error) {\n            throw this.handleAlphaVantageError(error, 'time-series', symbol);\n        }\n    }\n    async getIncomeStatement(symbol) {\n        try {\n            const params = new URLSearchParams({\n                function: 'INCOME_STATEMENT',\n                symbol: symbol.toUpperCase(),\n                apikey: this.apiKey\n            });\n            const response = await _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_0__.RetryHandler.withRetry(async ()=>{\n                const res = await fetch(`${this.baseUrl}?${params}`);\n                if (!res.ok) {\n                    throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.NetworkError(`HTTP ${res.status}: ${res.statusText}`);\n                }\n                return res.json();\n            }, _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_0__.RetryHandler.getNetworkRetryConfig());\n            if (response['Error Message']) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.TickerNotFoundError(symbol);\n            }\n            if (response['Note']) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.RateLimitError('Alpha Vantage API rate limit exceeded', 60000);\n            }\n            if (!response.annualReports) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.DataSourceError(`No income statement data available for ${symbol}`, 'alphavantage', false);\n            }\n            return response;\n        } catch (error) {\n            throw this.handleAlphaVantageError(error, 'income-statement', symbol);\n        }\n    }\n    async getCashFlow(symbol) {\n        try {\n            const params = new URLSearchParams({\n                function: 'CASH_FLOW',\n                symbol: symbol.toUpperCase(),\n                apikey: this.apiKey\n            });\n            const response = await _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_0__.RetryHandler.withRetry(async ()=>{\n                const res = await fetch(`${this.baseUrl}?${params}`);\n                if (!res.ok) {\n                    throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.NetworkError(`HTTP ${res.status}: ${res.statusText}`);\n                }\n                return res.json();\n            }, _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_0__.RetryHandler.getNetworkRetryConfig());\n            if (response['Error Message']) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.TickerNotFoundError(symbol);\n            }\n            if (response['Note']) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.RateLimitError('Alpha Vantage API rate limit exceeded', 60000);\n            }\n            if (!response.annualReports) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.DataSourceError(`No cash flow data available for ${symbol}`, 'alphavantage', false);\n            }\n            return response;\n        } catch (error) {\n            throw this.handleAlphaVantageError(error, 'cash-flow', symbol);\n        }\n    }\n    handleAlphaVantageError(error, operation, symbol) {\n        // Handle specific Alpha Vantage errors\n        if (error?.message?.includes('Invalid API call') || error?.message?.includes('not found')) {\n            return new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.TickerNotFoundError(symbol);\n        }\n        if (error?.message?.includes('rate limit') || error?.message?.includes('429')) {\n            return new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.RateLimitError(`Alpha Vantage rate limit exceeded for ${operation}`, 60000);\n        }\n        if (error?.code === 'ENOTFOUND' || error?.code === 'ECONNREFUSED') {\n            return new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.NetworkError(`Network error accessing Alpha Vantage for ${operation}: ${error.message}`);\n        }\n        if (error?.message?.includes('timeout')) {\n            return new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.NetworkError(`Timeout error accessing Alpha Vantage for ${operation}`);\n        }\n        // If it's already one of our custom errors, pass it through\n        if (error?.code?.startsWith('VALIDATION_') || error?.code?.startsWith('DATA_QUALITY_') || error?.code?.startsWith('INSUFFICIENT_')) {\n            return error;\n        }\n        // Generic data source error\n        return new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.DataSourceError(`Alpha Vantage ${operation} failed: ${error.message}`, 'alphavantage', true);\n    }\n    // Health check method to test if Alpha Vantage is accessible\n    async healthCheck() {\n        const start = Date.now();\n        try {\n            await this.getCompanyOverview('AAPL');\n            return {\n                available: true,\n                latency: Date.now() - start\n            };\n        } catch (error) {\n            return {\n                available: false,\n                latency: Date.now() - start,\n                error: error instanceof Error ? error.message : 'Unknown error'\n            };\n        }\n    }\n    // Get remaining daily quota (placeholder - would need actual implementation)\n    getRemainingQuota() {\n        // This would integrate with rate limiting service in Phase 4\n        return this.dailyCeiling;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L3NlcnZpY2VzL0FscGhhVmFudGFnZVNlcnZpY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdEO0FBQ3NEO0FBQ3ZHLE1BQU1LO0lBSVQsWUFBWUMsTUFBTSxFQUFFQyxlQUFlLEVBQUUsQ0FBRTthQUZ2Q0MsVUFBVTtRQUdOLElBQUksQ0FBQ0YsTUFBTSxHQUFHQSxVQUFVRyxRQUFRQyxHQUFHLENBQUNDLHFCQUFxQixJQUFJO1FBQzdELElBQUksQ0FBQ0osWUFBWSxHQUFHQTtRQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDRCxNQUFNLEVBQUU7WUFDZCxNQUFNLElBQUlNLE1BQU07UUFDcEI7SUFDSjtJQUNBLE1BQU1DLG1CQUFtQkMsTUFBTSxFQUFFO1FBQzdCLElBQUk7WUFDQSxNQUFNQyxTQUFTLElBQUlDLGdCQUFnQjtnQkFDL0JDLFVBQVU7Z0JBQ1ZILFFBQVFBLE9BQU9JLFdBQVc7Z0JBQzFCQyxRQUFRLElBQUksQ0FBQ2IsTUFBTTtZQUN2QjtZQUNBLE1BQU1jLFdBQVcsTUFBTXBCLGdFQUFZQSxDQUFDcUIsU0FBUyxDQUFDO2dCQUMxQyxNQUFNQyxNQUFNLE1BQU1DLE1BQU0sR0FBRyxJQUFJLENBQUNmLE9BQU8sQ0FBQyxDQUFDLEVBQUVPLFFBQVE7Z0JBQ25ELElBQUksQ0FBQ08sSUFBSUUsRUFBRSxFQUFFO29CQUNULE1BQU0sSUFBSXZCLGdFQUFZQSxDQUFDLENBQUMsS0FBSyxFQUFFcUIsSUFBSUcsTUFBTSxDQUFDLEVBQUUsRUFBRUgsSUFBSUksVUFBVSxFQUFFO2dCQUNsRTtnQkFDQSxPQUFPSixJQUFJSyxJQUFJO1lBQ25CLEdBQUczQixnRUFBWUEsQ0FBQzRCLHFCQUFxQjtZQUNyQyxJQUFJUixRQUFRLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQzNCLE1BQU0sSUFBSWpCLHVFQUFtQkEsQ0FBQ1c7WUFDbEM7WUFDQSxJQUFJTSxRQUFRLENBQUMsT0FBTyxFQUFFO2dCQUNsQixNQUFNLElB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U0gsS0FBS0MsR0FBRyxLQUFLRjtnQkFDdEJkLE9BQU9BLGlCQUFpQmxCLFFBQVFrQixNQUFNUyxPQUFPLEdBQUc7WUFDcEQ7UUFDSjtJQUNKO0lBQ0EsNkVBQTZFO0lBQzdFVSxvQkFBb0I7UUFDaEIsNkRBQTZEO1FBQzdELE9BQU8sSUFBSSxDQUFDMUMsWUFBWTtJQUM1QjtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbWFydGluc3Rhcm9zdGEvRGV2ZWxvcG1lbnQvdmliZXMvZGl2eXkvcGFja2FnZXMvY29yZS9kaXN0L3NlcnZpY2VzL0FscGhhVmFudGFnZVNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmV0cnlIYW5kbGVyIH0gZnJvbSBcIi4uL3V0aWxzL1JldHJ5SGFuZGxlci5qc1wiO1xuaW1wb3J0IHsgTmV0d29ya0Vycm9yLCBEYXRhU291cmNlRXJyb3IsIFRpY2tlck5vdEZvdW5kRXJyb3IsIFJhdGVMaW1pdEVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy9EaXZ2eUVycm9ycy5qc1wiO1xuZXhwb3J0IGNsYXNzIEFscGhhVmFudGFnZVNlcnZpY2Uge1xuICAgIGFwaUtleTtcbiAgICBiYXNlVXJsID0gJ2h0dHBzOi8vd3d3LmFscGhhdmFudGFnZS5jby9xdWVyeSc7XG4gICAgZGFpbHlDZWlsaW5nO1xuICAgIGNvbnN0cnVjdG9yKGFwaUtleSwgZGFpbHlDZWlsaW5nID0gMjUpIHtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXkgfHwgcHJvY2Vzcy5lbnYuQUxQSEFfVkFOVEFHRV9BUElfS0VZIHx8ICcnO1xuICAgICAgICB0aGlzLmRhaWx5Q2VpbGluZyA9IGRhaWx5Q2VpbGluZztcbiAgICAgICAgaWYgKCF0aGlzLmFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbHBoYSBWYW50YWdlIEFQSSBrZXkgaXMgcmVxdWlyZWQuIFNldCBBTFBIQV9WQU5UQUdFX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZ2V0Q29tcGFueU92ZXJ2aWV3KHN5bWJvbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb246ICdPVkVSVklFVycsXG4gICAgICAgICAgICAgICAgc3ltYm9sOiBzeW1ib2wudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAgICAgICBhcGlrZXk6IHRoaXMuYXBpS2V5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUmV0cnlIYW5kbGVyLndpdGhSZXRyeShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5iYXNlVXJsfT8ke3BhcmFtc31gKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKGBIVFRQICR7cmVzLnN0YXR1c306ICR7cmVzLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgfSwgUmV0cnlIYW5kbGVyLmdldE5ldHdvcmtSZXRyeUNvbmZpZygpKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZVsnRXJyb3IgTWVzc2FnZSddKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFRpY2tlck5vdEZvdW5kRXJyb3Ioc3ltYm9sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXNwb25zZVsnTm90ZSddKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhdGVMaW1pdEVycm9yKCdBbHBoYSBWYW50YWdlIEFQSSByYXRlIGxpbWl0IGV4Y2VlZGVkJywgNjAwMDAgLy8gMSBtaW51dGUgcmV0cnkgZGVsYXlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5TeW1ib2wpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVNvdXJjZUVycm9yKGBJbnZhbGlkIHJlc3BvbnNlIGZyb20gQWxwaGEgVmFudGFnZSBmb3IgJHtzeW1ib2x9YCwgJ2FscGhhdmFudGFnZScsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlQWxwaGFWYW50YWdlRXJyb3IoZXJyb3IsICdvdmVydmlldycsIHN5bWJvbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZ2V0VGltZVNlcmllc0RhaWx5KHN5bWJvbCwgb3V0cHV0U2l6ZSA9ICdjb21wYWN0Jykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb246ICdUSU1FX1NFUklFU19EQUlMWV9BREpVU1RFRCcsXG4gICAgICAgICAgICAgICAgc3ltYm9sOiBzeW1ib2wudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAgICAgICBvdXRwdXRzaXplOiBvdXRwdXRTaXplLFxuICAgICAgICAgICAgICAgIGFwaWtleTogdGhpcy5hcGlLZXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBSZXRyeUhhbmRsZXIud2l0aFJldHJ5KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9PyR7cGFyYW1zfWApO1xuICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgJHtyZXMuc3RhdHVzfTogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICB9LCBSZXRyeUhhbmRsZXIuZ2V0TmV0d29ya1JldHJ5Q29uZmlnKCkpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlWydFcnJvciBNZXNzYWdlJ10pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVGlja2VyTm90Rm91bmRFcnJvcihzeW1ib2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlWydOb3RlJ10pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmF0ZUxpbWl0RXJyb3IoJ0FscGhhIFZhbnRhZ2UgQVBJIHJhdGUgbGltaXQgZXhjZWVkZWQnLCA2MDAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlWydUaW1lIFNlcmllcyAoRGFpbHkpJ10pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVNvdXJjZUVycm9yKGBObyB0aW1lIHNlcmllcyBkYXRhIGF2YWlsYWJsZSBmb3IgJHtzeW1ib2x9YCwgJ2FscGhhdmFudGFnZScsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlQWxwaGFWYW50YWdlRXJyb3IoZXJyb3IsICd0aW1lLXNlcmllcycsIHN5bWJvbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZ2V0SW5jb21lU3RhdGVtZW50KHN5bWJvbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb246ICdJTkNPTUVfU1RBVEVNRU5UJyxcbiAgICAgICAgICAgICAgICBzeW1ib2w6IHN5bWJvbC50b1VwcGVyQ2FzZSgpLFxuICAgICAgICAgICAgICAgIGFwaWtleTogdGhpcy5hcGlLZXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBSZXRyeUhhbmRsZXIud2l0aFJldHJ5KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9PyR7cGFyYW1zfWApO1xuICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoYEhUVFAgJHtyZXMuc3RhdHVzfTogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICB9LCBSZXRyeUhhbmRsZXIuZ2V0TmV0d29ya1JldHJ5Q29uZmlnKCkpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlWydFcnJvciBNZXNzYWdlJ10pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVGlja2VyTm90Rm91bmRFcnJvcihzeW1ib2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlWydOb3RlJ10pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmF0ZUxpbWl0RXJyb3IoJ0FscGhhIFZhbnRhZ2UgQVBJIHJhdGUgbGltaXQgZXhjZWVkZWQnLCA2MDAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLmFubnVhbFJlcG9ydHMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGF0YVNvdXJjZUVycm9yKGBObyBpbmNvbWUgc3RhdGVtZW50IGRhdGEgYXZhaWxhYmxlIGZvciAke3N5bWJvbH1gLCAnYWxwaGF2YW50YWdlJywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVBbHBoYVZhbnRhZ2VFcnJvcihlcnJvciwgJ2luY29tZS1zdGF0ZW1lbnQnLCBzeW1ib2wpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGdldENhc2hGbG93KHN5bWJvbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb246ICdDQVNIX0ZMT1cnLFxuICAgICAgICAgICAgICAgIHN5bWJvbDogc3ltYm9sLnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgYXBpa2V5OiB0aGlzLmFwaUtleVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFJldHJ5SGFuZGxlci53aXRoUmV0cnkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0/JHtwYXJhbXN9YCk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihgSFRUUCAke3Jlcy5zdGF0dXN9OiAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIH0sIFJldHJ5SGFuZGxlci5nZXROZXR3b3JrUmV0cnlDb25maWcoKSk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VbJ0Vycm9yIE1lc3NhZ2UnXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUaWNrZXJOb3RGb3VuZEVycm9yKHN5bWJvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VbJ05vdGUnXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYXRlTGltaXRFcnJvcignQWxwaGEgVmFudGFnZSBBUEkgcmF0ZSBsaW1pdCBleGNlZWRlZCcsIDYwMDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2UuYW5udWFsUmVwb3J0cykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBEYXRhU291cmNlRXJyb3IoYE5vIGNhc2ggZmxvdyBkYXRhIGF2YWlsYWJsZSBmb3IgJHtzeW1ib2x9YCwgJ2FscGhhdmFudGFnZScsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlQWxwaGFWYW50YWdlRXJyb3IoZXJyb3IsICdjYXNoLWZsb3cnLCBzeW1ib2wpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUFscGhhVmFudGFnZUVycm9yKGVycm9yLCBvcGVyYXRpb24sIHN5bWJvbCkge1xuICAgICAgICAvLyBIYW5kbGUgc3BlY2lmaWMgQWxwaGEgVmFudGFnZSBlcnJvcnNcbiAgICAgICAgaWYgKGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnSW52YWxpZCBBUEkgY2FsbCcpIHx8IGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnbm90IGZvdW5kJykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGlja2VyTm90Rm91bmRFcnJvcihzeW1ib2wpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ3JhdGUgbGltaXQnKSB8fCBlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJzQyOScpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJhdGVMaW1pdEVycm9yKGBBbHBoYSBWYW50YWdlIHJhdGUgbGltaXQgZXhjZWVkZWQgZm9yICR7b3BlcmF0aW9ufWAsIDYwMDAwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3I/LmNvZGUgPT09ICdFTk9URk9VTkQnIHx8IGVycm9yPy5jb2RlID09PSAnRUNPTk5SRUZVU0VEJykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOZXR3b3JrRXJyb3IoYE5ldHdvcmsgZXJyb3IgYWNjZXNzaW5nIEFscGhhIFZhbnRhZ2UgZm9yICR7b3BlcmF0aW9ufTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ3RpbWVvdXQnKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOZXR3b3JrRXJyb3IoYFRpbWVvdXQgZXJyb3IgYWNjZXNzaW5nIEFscGhhIFZhbnRhZ2UgZm9yICR7b3BlcmF0aW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGl0J3MgYWxyZWFkeSBvbmUgb2Ygb3VyIGN1c3RvbSBlcnJvcnMsIHBhc3MgaXQgdGhyb3VnaFxuICAgICAgICBpZiAoZXJyb3I/LmNvZGU/LnN0YXJ0c1dpdGgoJ1ZBTElEQVRJT05fJykgfHxcbiAgICAgICAgICAgIGVycm9yPy5jb2RlPy5zdGFydHNXaXRoKCdEQVRBX1FVQUxJVFlfJykgfHxcbiAgICAgICAgICAgIGVycm9yPy5jb2RlPy5zdGFydHNXaXRoKCdJTlNVRkZJQ0lFTlRfJykpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICAvLyBHZW5lcmljIGRhdGEgc291cmNlIGVycm9yXG4gICAgICAgIHJldHVybiBuZXcgRGF0YVNvdXJjZUVycm9yKGBBbHBoYSBWYW50YWdlICR7b3BlcmF0aW9ufSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gLCAnYWxwaGF2YW50YWdlJywgdHJ1ZSk7XG4gICAgfVxuICAgIC8vIEhlYWx0aCBjaGVjayBtZXRob2QgdG8gdGVzdCBpZiBBbHBoYSBWYW50YWdlIGlzIGFjY2Vzc2libGVcbiAgICBhc3luYyBoZWFsdGhDaGVjaygpIHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRDb21wYW55T3ZlcnZpZXcoJ0FBUEwnKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxhdGVuY3k6IERhdGUubm93KCkgLSBzdGFydFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsYXRlbmN5OiBEYXRlLm5vdygpIC0gc3RhcnQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEdldCByZW1haW5pbmcgZGFpbHkgcXVvdGEgKHBsYWNlaG9sZGVyIC0gd291bGQgbmVlZCBhY3R1YWwgaW1wbGVtZW50YXRpb24pXG4gICAgZ2V0UmVtYWluaW5nUXVvdGEoKSB7XG4gICAgICAgIC8vIFRoaXMgd291bGQgaW50ZWdyYXRlIHdpdGggcmF0ZSBsaW1pdGluZyBzZXJ2aWNlIGluIFBoYXNlIDRcbiAgICAgICAgcmV0dXJuIHRoaXMuZGFpbHlDZWlsaW5nO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJSZXRyeUhhbmRsZXIiLCJOZXR3b3JrRXJyb3IiLCJEYXRhU291cmNlRXJyb3IiLCJUaWNrZXJOb3RGb3VuZEVycm9yIiwiUmF0ZUxpbWl0RXJyb3IiLCJBbHBoYVZhbnRhZ2VTZXJ2aWNlIiwiYXBpS2V5IiwiZGFpbHlDZWlsaW5nIiwiYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJBTFBIQV9WQU5UQUdFX0FQSV9LRVkiLCJFcnJvciIsImdldENvbXBhbnlPdmVydmlldyIsInN5bWJvbCIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImZ1bmN0aW9uIiwidG9VcHBlckNhc2UiLCJhcGlrZXkiLCJyZXNwb25zZSIsIndpdGhSZXRyeSIsInJlcyIsImZldGNoIiwib2siLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwianNvbiIsImdldE5ldHdvcmtSZXRyeUNvbmZpZyIsIlN5bWJvbCIsImVycm9yIiwiaGFuZGxlQWxwaGFWYW50YWdlRXJyb3IiLCJnZXRUaW1lU2VyaWVzRGFpbHkiLCJvdXRwdXRTaXplIiwib3V0cHV0c2l6ZSIsImdldEluY29tZVN0YXRlbWVudCIsImFubnVhbFJlcG9ydHMiLCJnZXRDYXNoRmxvdyIsIm9wZXJhdGlvbiIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImNvZGUiLCJzdGFydHNXaXRoIiwiaGVhbHRoQ2hlY2siLCJzdGFydCIsIkRhdGUiLCJub3ciLCJhdmFpbGFibGUiLCJsYXRlbmN5IiwiZ2V0UmVtYWluaW5nUXVvdGEiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/services/AlphaVantageService.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/services/DatabaseService.js":
/*!************************************************************!*\
  !*** ../../packages/core/dist/services/DatabaseService.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DatabaseService: () => (/* binding */ DatabaseService)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabaseClient_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../supabase/supabaseClient.js */ \"(rsc)/../../packages/core/dist/supabase/supabaseClient.js\");\n/* harmony import */ var _models_DividendAnalysis_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/DividendAnalysis.js */ \"(rsc)/../../packages/core/dist/models/DividendAnalysis.js\");\n/* harmony import */ var _models_StockData_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/StockData.js */ \"(rsc)/../../packages/core/dist/models/StockData.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ \"crypto\");\n\n\n\n\nclass DatabaseService {\n    static createOptionsHash(options) {\n        const normalized = JSON.stringify(options, Object.keys(options).sort());\n        return (0,crypto__WEBPACK_IMPORTED_MODULE_3__.createHash)('md5').update(normalized).digest('hex').substring(0, 16);\n    }\n    static async ensureTicker(symbol, name, sector, industry) {\n        // Try to get existing ticker\n        const { data: existingTicker, error: selectError } = await _supabase_supabaseClient_js__WEBPACK_IMPORTED_MODULE_0__.supabase.from('tickers').select('id').eq('symbol', symbol).single();\n        if (existingTicker) {\n            return existingTicker.id;\n        }\n        if (selectError && selectError.code !== 'PGRST116') {\n            throw new Error(`Database error checking ticker: ${selectError.message}`);\n        }\n        // Insert new ticker\n        const { data: newTicker, error: insertError } = await _supabase_supabaseClient_js__WEBPACK_IMPORTED_MODULE_0__.supabase.from('tickers').insert({\n            symbol: symbol.toUpperCase(),\n            name: name || null,\n            sector: sector || null,\n            industry: industry || null\n        }).select('id').single();\n        if (insertError) {\n            throw new Error(`Failed to create ticker: ${insertError.message}`);\n        }\n        return newTicker.id;\n    }\n    static async saveAnalysis(analysis, options = {}) {\n        try {\n            // Ensure ticker exists\n            const tickerId = await this.ensureTicker(analysis.ticker, analysis.quote.name, analysis.quote.sector || undefined, analysis.quote.industry || undefined);\n            const optionsHash = this.createOptionsHash(options);\n            // Prepare analysis record\n            const record = {\n                ticker_id: tickerId,\n                observed_at: new Date().toISOString(),\n                options_hash: optionsHash,\n                price: analysis.quote.price,\n                ttm_div: isFinite(analysis.ttmDividends) ? analysis.ttmDividends : null,\n                ttm_yield: analysis.ttmYield ?? null,\n                forward_yield: analysis.forwardYield ?? null,\n                cagr3: analysis.cagr3 ?? null,\n                cagr5: analysis.cagr5 ?? null,\n                safe_growth: analysis.safeGrowth,\n                streak: analysis.streak,\n                payout_eps: isFinite(analysis.fundamentals.epsPayoutRatio) ? analysis.fundamentals.epsPayoutRatio : null,\n                payout_fcf: isFinite(analysis.fundamentals.fcfPayoutRatio) ? analysis.fundamentals.fcfPayoutRatio : null,\n                fcf_coverage: isFinite(analysis.fundamentals.fcfCoverage) ? analysis.fundamentals.fcfCoverage : null,\n                ddm_price: null,\n                score_payout: Math.round(analysis.scores.payout),\n                score_fcf: Math.round(analysis.scores.fcf),\n                score_streak: Math.round(analysis.scores.streak),\n                score_growth: Math.round(analysis.scores.growth),\n                score_total: analysis.totalScore,\n                raw: {\n                    analysis: {\n                        ticker: analysis.ticker,\n                        quote: analysis.quote,\n                        ttmDividends: analysis.ttmDividends,\n                        ttmYield: analysis.ttmYield,\n                        annualDividends: analysis.annualDividends,\n                        cagr3: analysis.cagr3,\n                        cagr5: analysis.cagr5,\n                        streak: analysis.streak,\n                        fundamentals: {\n                            operatingCashFlow: analysis.fundamentals.operatingCashFlow,\n                            capitalExpenditure: analysis.fundamentals.capitalExpenditure,\n                            cashDividendsPaid: analysis.fundamentals.cashDividendsPaid,\n                            netIncome: analysis.fundamentals.netIncome,\n                            payoutRatio: analysis.fundamentals.payoutRatio,\n                            freeCashFlow: analysis.fundamentals.freeCashFlow,\n                            fcfPayoutRatio: analysis.fundamentals.fcfPayoutRatio,\n                            fcfCoverage: analysis.fundamentals.fcfCoverage,\n                            epsPayoutRatio: analysis.fundamentals.epsPayoutRatio\n                        },\n                        safeGrowth: analysis.safeGrowth,\n                        forwardDividend: analysis.forwardDividend,\n                        forwardYield: analysis.forwardYield,\n                        scores: analysis.scores,\n                        totalScore: analysis.totalScore,\n                        ema: analysis.ema,\n                        macd: analysis.macd,\n                        rsi: analysis.rsi\n                    },\n                    options,\n                    savedAt: new Date().toISOString()\n                }\n            };\n            const { data, error } = await _supabase_supabaseClient_js__WEBPACK_IMPORTED_MODULE_0__.supabase.from('analyses').insert(record).select('id').single();\n            if (error) {\n                throw new Error(`Failed to save analysis: ${error.message}`);\n            }\n            return data.id;\n        } catch (error) {\n            console.error('Database save failed:', error);\n            throw error;\n        }\n    }\n    static async getRecentAnalysis(symbol, optionsHash, hoursThreshold = 24) {\n        const cutoffTime = new Date();\n        cutoffTime.setHours(cutoffTime.getHours() - hoursThreshold);\n        const { data, error } = await _supabase_supabaseClient_js__WEBPACK_IMPORTED_MODULE_0__.supabase.from('analyses').select(`\n        *,\n        tickers!inner (symbol)\n      `).eq('tickers.symbol', symbol.toUpperCase()).eq('options_hash', optionsHash).gte('observed_at', cutoffTime.toISOString()).order('observed_at', {\n            ascending: false\n        }).limit(1).single();\n        if (error) {\n            // If no record found, return null (not an error)\n            if (error.code === 'PGRST116') {\n                return null;\n            }\n            throw new Error(`Failed to get recent analysis: ${error.message}`);\n        }\n        return data;\n    }\n    static async getAnalysisHistory(symbol, limit = 30) {\n        const { data, error } = await _supabase_supabaseClient_js__WEBPACK_IMPORTED_MODULE_0__.supabase.from('analyses').select(`\n        *,\n        tickers!inner (symbol)\n      `).eq('tickers.symbol', symbol.toUpperCase()).order('observed_at', {\n            ascending: false\n        }).limit(limit);\n        if (error) {\n            throw new Error(`Failed to get analysis history: ${error.message}`);\n        }\n        return data || [];\n    }\n    static async getLeaderboard(date, limit = 50) {\n        const targetDate = date || new Date();\n        const dateStr = targetDate.toISOString().split('T')[0];\n        const { data, error } = await _supabase_supabaseClient_js__WEBPACK_IMPORTED_MODULE_0__.supabase.from('leaderboard_daily').select('*').eq('as_of_date', dateStr).order('rank').limit(limit);\n        if (error) {\n            throw new Error(`Failed to get leaderboard: ${error.message}`);\n        }\n        return data || [];\n    }\n    static async refreshLeaderboard() {\n        const { error } = await _supabase_supabaseClient_js__WEBPACK_IMPORTED_MODULE_0__.supabase.rpc('refresh_leaderboard_daily');\n        if (error) {\n            throw new Error(`Failed to refresh leaderboard: ${error.message}`);\n        }\n    }\n    static hydrateAnalysisFromRecord(record) {\n        // The raw field contains the full analysis data\n        const rawAnalysis = record.raw.analysis;\n        // Reconstruct the Quote object\n        const quote = new _models_StockData_js__WEBPACK_IMPORTED_MODULE_2__.Quote({\n            regularMarketPrice: rawAnalysis.quote.price,\n            currency: rawAnalysis.quote.currency,\n            shortName: rawAnalysis.quote.name,\n            sector: rawAnalysis.quote.sector,\n            industry: rawAnalysis.quote.industry\n        });\n        // Reconstruct the Fundamentals object\n        const fundamentals = new _models_StockData_js__WEBPACK_IMPORTED_MODULE_2__.Fundamentals({\n            OperatingCashFlow: {\n                raw: rawAnalysis.fundamentals.operatingCashFlow\n            },\n            CapitalExpenditure: {\n                raw: rawAnalysis.fundamentals.capitalExpenditure\n            },\n            CashDividendsPaid: {\n                raw: rawAnalysis.fundamentals.cashDividendsPaid\n            },\n            NetIncome: {\n                raw: rawAnalysis.fundamentals.netIncome\n            },\n            payoutRatio: {\n                raw: rawAnalysis.fundamentals.payoutRatio\n            }\n        });\n        // Reconstruct the DividendScores object\n        const scores = new _models_DividendAnalysis_js__WEBPACK_IMPORTED_MODULE_1__.DividendScores({\n            payout: rawAnalysis.scores.payout,\n            fcf: rawAnalysis.scores.fcf,\n            streak: rawAnalysis.scores.streak,\n            growth: rawAnalysis.scores.growth,\n            trend: rawAnalysis.scores.trend || 0,\n            macd: rawAnalysis.scores.macd || 50,\n            rsi: rawAnalysis.scores.rsi || 50 // Default to 50 (neutral) if not present in old data\n        });\n        // Reconstruct EMA data (default to null if not present in old data)\n        const ema = {\n            ema20: rawAnalysis.ema?.ema20 || null,\n            ema50: rawAnalysis.ema?.ema50 || null,\n            ema200: rawAnalysis.ema?.ema200 || null\n        };\n        // Reconstruct MACD data (default to null if not present in old data)\n        const macd = {\n            macdLine: rawAnalysis.macd?.macdLine || null,\n            signalLine: rawAnalysis.macd?.signalLine || null,\n            histogram: rawAnalysis.macd?.histogram || null\n        };\n        // Reconstruct RSI data (default to null if not present in old data)\n        const rsi = {\n            rsi: rawAnalysis.rsi?.rsi || null,\n            period: rawAnalysis.rsi?.period || 14\n        };\n        // Create and return the full DividendAnalysis\n        return new _models_DividendAnalysis_js__WEBPACK_IMPORTED_MODULE_1__.DividendAnalysis({\n            ticker: rawAnalysis.ticker,\n            quote,\n            ttmDividends: rawAnalysis.ttmDividends,\n            ttmYield: rawAnalysis.ttmYield,\n            annualDividends: rawAnalysis.annualDividends,\n            cagr3: rawAnalysis.cagr3,\n            cagr5: rawAnalysis.cagr5,\n            streak: rawAnalysis.streak,\n            fundamentals,\n            safeGrowth: rawAnalysis.safeGrowth,\n            forwardDividend: rawAnalysis.forwardDividend,\n            forwardYield: rawAnalysis.forwardYield,\n            scores,\n            totalScore: rawAnalysis.totalScore,\n            ema,\n            macd,\n            rsi\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L3NlcnZpY2VzL0RhdGFiYXNlU2VydmljZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5RDtBQUN3QjtBQUNwQjtBQUN6QjtBQUM3QixNQUFNTTtJQUNULE9BQU9DLGtCQUFrQkMsT0FBTyxFQUFFO1FBQzlCLE1BQU1DLGFBQWFDLEtBQUtDLFNBQVMsQ0FBQ0gsU0FBU0ksT0FBT0MsSUFBSSxDQUFDTCxTQUFTTSxJQUFJO1FBQ3BFLE9BQU9ULGtEQUFVQSxDQUFDLE9BQU9VLE1BQU0sQ0FBQ04sWUFBWU8sTUFBTSxDQUFDLE9BQU9DLFNBQVMsQ0FBQyxHQUFHO0lBQzNFO0lBQ0EsYUFBYUMsYUFBYUMsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLE1BQU0sRUFBRUMsUUFBUSxFQUFFO1FBQ3RELDZCQUE2QjtRQUM3QixNQUFNLEVBQUVDLE1BQU1DLGNBQWMsRUFBRUMsT0FBT0MsV0FBVyxFQUFFLEdBQUcsTUFBTTFCLGlFQUFRQSxDQUM5RDJCLElBQUksQ0FBQyxXQUNMQyxNQUFNLENBQUMsTUFDUEMsRUFBRSxDQUFDLFVBQVVWLFFBQ2JXLE1BQU07UUFDWCxJQUFJTixnQkFBZ0I7WUFDaEIsT0FBT0EsZUFBZU8sRUFBRTtRQUM1QjtRQUNBLElBQUlMLGVBQWVBLFlBQVlNLElBQUksS0FBSyxZQUFZO1lBQ2hELE1BQU0sSUFBSUMsTUFBTSxDQUFDLGdDQUFnQyxFQUFFUCxZQUFZUSxPQUFPLEVBQUU7UUFDNUU7UUFDQSxvQkFBb0I7UUFDcEIsTUFBTSxFQUFFWCxNQUFNWSxTQUFTLEVBQUVWLE9BQU9XLFdBQVcsRUFBRSxHQUFHLE1BQU1wQyxpRUFBUUEsQ0FDekQyQixJQUFJLENBQUMsV0FDTFUsTUFBTSxDQUFDO1lBQ1JsQixRQUFRQSxPQUFPbUIsV0FBVztZQUMxQmxCLE1BQU1BLFFBQVE7WUFDZEMsUUFBUUEsVUFBVTtZQUNsQkMsVUFBVUEsWUFBWTtRQUMxQixHQUNLTSxNQUFNLENBQUMsTUFDUEUsTUFB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TUFBTTtZQUMxQkM7WUFDQVksY0FBYzhELFlBQVk5RCxZQUFZO1lBQ3RDRSxVQUFVNEQsWUFBWTVELFFBQVE7WUFDOUI2QixpQkFBaUIrQixZQUFZL0IsZUFBZTtZQUM1QzFCLE9BQU95RCxZQUFZekQsS0FBSztZQUN4QkMsT0FBT3dELFlBQVl4RCxLQUFLO1lBQ3hCRyxRQUFRcUQsWUFBWXJELE1BQU07WUFDMUJFO1lBQ0FILFlBQVlzRCxZQUFZdEQsVUFBVTtZQUNsQzhCLGlCQUFpQndCLFlBQVl4QixlQUFlO1lBQzVDbEMsY0FBYzBELFlBQVkxRCxZQUFZO1lBQ3RDaUI7WUFDQVEsWUFBWWlDLFlBQVlqQyxVQUFVO1lBQ2xDVTtZQUNBQztZQUNBQztRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcnRpbnN0YXJvc3RhL0RldmVsb3BtZW50L3ZpYmVzL2Rpdnl5L3BhY2thZ2VzL2NvcmUvZGlzdC9zZXJ2aWNlcy9EYXRhYmFzZVNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICcuLi9zdXBhYmFzZS9zdXBhYmFzZUNsaWVudC5qcyc7XG5pbXBvcnQgeyBEaXZpZGVuZEFuYWx5c2lzLCBEaXZpZGVuZFNjb3JlcyB9IGZyb20gJy4uL21vZGVscy9EaXZpZGVuZEFuYWx5c2lzLmpzJztcbmltcG9ydCB7IFF1b3RlLCBGdW5kYW1lbnRhbHMgfSBmcm9tICcuLi9tb2RlbHMvU3RvY2tEYXRhLmpzJztcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tICdjcnlwdG8nO1xuZXhwb3J0IGNsYXNzIERhdGFiYXNlU2VydmljZSB7XG4gICAgc3RhdGljIGNyZWF0ZU9wdGlvbnNIYXNoKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMsIE9iamVjdC5rZXlzKG9wdGlvbnMpLnNvcnQoKSk7XG4gICAgICAgIHJldHVybiBjcmVhdGVIYXNoKCdtZDUnKS51cGRhdGUobm9ybWFsaXplZCkuZGlnZXN0KCdoZXgnKS5zdWJzdHJpbmcoMCwgMTYpO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgZW5zdXJlVGlja2VyKHN5bWJvbCwgbmFtZSwgc2VjdG9yLCBpbmR1c3RyeSkge1xuICAgICAgICAvLyBUcnkgdG8gZ2V0IGV4aXN0aW5nIHRpY2tlclxuICAgICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nVGlja2VyLCBlcnJvcjogc2VsZWN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAuZnJvbSgndGlja2VycycpXG4gICAgICAgICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAgICAgICAuZXEoJ3N5bWJvbCcsIHN5bWJvbClcbiAgICAgICAgICAgIC5zaW5nbGUoKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nVGlja2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdUaWNrZXIuaWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdEVycm9yICYmIHNlbGVjdEVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHsgLy8gTm90IFwibm90IGZvdW5kXCIgZXJyb3JcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRGF0YWJhc2UgZXJyb3IgY2hlY2tpbmcgdGlja2VyOiAke3NlbGVjdEVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW5zZXJ0IG5ldyB0aWNrZXJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBuZXdUaWNrZXIsIGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgIC5mcm9tKCd0aWNrZXJzJylcbiAgICAgICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgICAgc3ltYm9sOiBzeW1ib2wudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgfHwgbnVsbCxcbiAgICAgICAgICAgIHNlY3Rvcjogc2VjdG9yIHx8IG51bGwsXG4gICAgICAgICAgICBpbmR1c3RyeTogaW5kdXN0cnkgfHwgbnVsbFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSB0aWNrZXI6ICR7aW5zZXJ0RXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3VGlja2VyLmlkO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgc2F2ZUFuYWx5c2lzKGFuYWx5c2lzLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSB0aWNrZXIgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCB0aWNrZXJJZCA9IGF3YWl0IHRoaXMuZW5zdXJlVGlja2VyKGFuYWx5c2lzLnRpY2tlciwgYW5hbHlzaXMucXVvdGUubmFtZSwgYW5hbHlzaXMucXVvdGUuc2VjdG9yIHx8IHVuZGVmaW5lZCwgYW5hbHlzaXMucXVvdGUuaW5kdXN0cnkgfHwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnNIYXNoID0gdGhpcy5jcmVhdGVPcHRpb25zSGFzaChvcHRpb25zKTtcbiAgICAgICAgICAgIC8vIFByZXBhcmUgYW5hbHlzaXMgcmVjb3JkXG4gICAgICAgICAgICBjb25zdCByZWNvcmQgPSB7XG4gICAgICAgICAgICAgICAgdGlja2VyX2lkOiB0aWNrZXJJZCxcbiAgICAgICAgICAgICAgICBvYnNlcnZlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIG9wdGlvbnNfaGFzaDogb3B0aW9uc0hhc2gsXG4gICAgICAgICAgICAgICAgcHJpY2U6IGFuYWx5c2lzLnF1b3RlLnByaWNlLFxuICAgICAgICAgICAgICAgIHR0bV9kaXY6IGlzRmluaXRlKGFuYWx5c2lzLnR0bURpdmlkZW5kcykgPyBhbmFseXNpcy50dG1EaXZpZGVuZHMgOiBudWxsLFxuICAgICAgICAgICAgICAgIHR0bV95aWVsZDogYW5hbHlzaXMudHRtWWllbGQgPz8gbnVsbCxcbiAgICAgICAgICAgICAgICBmb3J3YXJkX3lpZWxkOiBhbmFseXNpcy5mb3J3YXJkWWllbGQgPz8gbnVsbCxcbiAgICAgICAgICAgICAgICBjYWdyMzogYW5hbHlzaXMuY2FncjMgPz8gbnVsbCxcbiAgICAgICAgICAgICAgICBjYWdyNTogYW5hbHlzaXMuY2FncjUgPz8gbnVsbCxcbiAgICAgICAgICAgICAgICBzYWZlX2dyb3d0aDogYW5hbHlzaXMuc2FmZUdyb3d0aCxcbiAgICAgICAgICAgICAgICBzdHJlYWs6IGFuYWx5c2lzLnN0cmVhayxcbiAgICAgICAgICAgICAgICBwYXlvdXRfZXBzOiBpc0Zpbml0ZShhbmFseXNpcy5mdW5kYW1lbnRhbHMuZXBzUGF5b3V0UmF0aW8pID8gYW5hbHlzaXMuZnVuZGFtZW50YWxzLmVwc1BheW91dFJhdGlvIDogbnVsbCxcbiAgICAgICAgICAgICAgICBwYXlvdXRfZmNmOiBpc0Zpbml0ZShhbmFseXNpcy5mdW5kYW1lbnRhbHMuZmNmUGF5b3V0UmF0aW8pID8gYW5hbHlzaXMuZnVuZGFtZW50YWxzLmZjZlBheW91dFJhdGlvIDogbnVsbCxcbiAgICAgICAgICAgICAgICBmY2ZfY292ZXJhZ2U6IGlzRmluaXRlKGFuYWx5c2lzLmZ1bmRhbWVudGFscy5mY2ZDb3ZlcmFnZSkgPyBhbmFseXNpcy5mdW5kYW1lbnRhbHMuZmNmQ292ZXJhZ2UgOiBudWxsLFxuICAgICAgICAgICAgICAgIGRkbV9wcmljZTogbnVsbCwgLy8gV291bGQgbmVlZCB0byBhZGQgR29yZG9uIEdyb3d0aCBNb2RlbCByZXN1bHQgdG8gYW5hbHlzaXNcbiAgICAgICAgICAgICAgICBzY29yZV9wYXlvdXQ6IE1hdGgucm91bmQoYW5hbHlzaXMuc2NvcmVzLnBheW91dCksXG4gICAgICAgICAgICAgICAgc2NvcmVfZmNmOiBNYXRoLnJvdW5kKGFuYWx5c2lzLnNjb3Jlcy5mY2YpLFxuICAgICAgICAgICAgICAgIHNjb3JlX3N0cmVhazogTWF0aC5yb3VuZChhbmFseXNpcy5zY29yZXMuc3RyZWFrKSxcbiAgICAgICAgICAgICAgICBzY29yZV9ncm93dGg6IE1hdGgucm91bmQoYW5hbHlzaXMuc2NvcmVzLmdyb3d0aCksXG4gICAgICAgICAgICAgICAgc2NvcmVfdG90YWw6IGFuYWx5c2lzLnRvdGFsU2NvcmUsXG4gICAgICAgICAgICAgICAgcmF3OiB7XG4gICAgICAgICAgICAgICAgICAgIGFuYWx5c2lzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXI6IGFuYWx5c2lzLnRpY2tlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlOiBhbmFseXNpcy5xdW90ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR0bURpdmlkZW5kczogYW5hbHlzaXMudHRtRGl2aWRlbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHRtWWllbGQ6IGFuYWx5c2lzLnR0bVlpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5udWFsRGl2aWRlbmRzOiBhbmFseXNpcy5hbm51YWxEaXZpZGVuZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWdyMzogYW5hbHlzaXMuY2FncjMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWdyNTogYW5hbHlzaXMuY2FncjUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYWs6IGFuYWx5c2lzLnN0cmVhayxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmRhbWVudGFsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGluZ0Nhc2hGbG93OiBhbmFseXNpcy5mdW5kYW1lbnRhbHMub3BlcmF0aW5nQ2FzaEZsb3csXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwaXRhbEV4cGVuZGl0dXJlOiBhbmFseXNpcy5mdW5kYW1lbnRhbHMuY2FwaXRhbEV4cGVuZGl0dXJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2hEaXZpZGVuZHNQYWlkOiBhbmFseXNpcy5mdW5kYW1lbnRhbHMuY2FzaERpdmlkZW5kc1BhaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0SW5jb21lOiBhbmFseXNpcy5mdW5kYW1lbnRhbHMubmV0SW5jb21lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheW91dFJhdGlvOiBhbmFseXNpcy5mdW5kYW1lbnRhbHMucGF5b3V0UmF0aW8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJlZUNhc2hGbG93OiBhbmFseXNpcy5mdW5kYW1lbnRhbHMuZnJlZUNhc2hGbG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZjZlBheW91dFJhdGlvOiBhbmFseXNpcy5mdW5kYW1lbnRhbHMuZmNmUGF5b3V0UmF0aW8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmNmQ292ZXJhZ2U6IGFuYWx5c2lzLmZ1bmRhbWVudGFscy5mY2ZDb3ZlcmFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcHNQYXlvdXRSYXRpbzogYW5hbHlzaXMuZnVuZGFtZW50YWxzLmVwc1BheW91dFJhdGlvXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2FmZUdyb3d0aDogYW5hbHlzaXMuc2FmZUdyb3d0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcndhcmREaXZpZGVuZDogYW5hbHlzaXMuZm9yd2FyZERpdmlkZW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yd2FyZFlpZWxkOiBhbmFseXNpcy5mb3J3YXJkWWllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29yZXM6IGFuYWx5c2lzLnNjb3JlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsU2NvcmU6IGFuYWx5c2lzLnRvdGFsU2NvcmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWE6IGFuYWx5c2lzLmVtYSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hY2Q6IGFuYWx5c2lzLm1hY2QsXG4gICAgICAgICAgICAgICAgICAgICAgICByc2k6IGFuYWx5c2lzLnJzaVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBzYXZlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgICAuZnJvbSgnYW5hbHlzZXMnKVxuICAgICAgICAgICAgICAgIC5pbnNlcnQocmVjb3JkKVxuICAgICAgICAgICAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgICAgICAgICAgICAuc2luZ2xlKCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzYXZlIGFuYWx5c2lzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5pZDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHNhdmUgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBnZXRSZWNlbnRBbmFseXNpcyhzeW1ib2wsIG9wdGlvbnNIYXNoLCBob3Vyc1RocmVzaG9sZCA9IDI0KSB7XG4gICAgICAgIGNvbnN0IGN1dG9mZlRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjdXRvZmZUaW1lLnNldEhvdXJzKGN1dG9mZlRpbWUuZ2V0SG91cnMoKSAtIGhvdXJzVGhyZXNob2xkKTtcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgIC5mcm9tKCdhbmFseXNlcycpXG4gICAgICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgKixcbiAgICAgICAgdGlja2VycyFpbm5lciAoc3ltYm9sKVxuICAgICAgYClcbiAgICAgICAgICAgIC5lcSgndGlja2Vycy5zeW1ib2wnLCBzeW1ib2wudG9VcHBlckNhc2UoKSlcbiAgICAgICAgICAgIC5lcSgnb3B0aW9uc19oYXNoJywgb3B0aW9uc0hhc2gpXG4gICAgICAgICAgICAuZ3RlKCdvYnNlcnZlZF9hdCcsIGN1dG9mZlRpbWUudG9JU09TdHJpbmcoKSlcbiAgICAgICAgICAgIC5vcmRlcignb2JzZXJ2ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgICAgICAgIC5saW1pdCgxKVxuICAgICAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIElmIG5vIHJlY29yZCBmb3VuZCwgcmV0dXJuIG51bGwgKG5vdCBhbiBlcnJvcilcbiAgICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgcmVjZW50IGFuYWx5c2lzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBnZXRBbmFseXNpc0hpc3Rvcnkoc3ltYm9sLCBsaW1pdCA9IDMwKSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAuZnJvbSgnYW5hbHlzZXMnKVxuICAgICAgICAgICAgLnNlbGVjdChgXG4gICAgICAgICosXG4gICAgICAgIHRpY2tlcnMhaW5uZXIgKHN5bWJvbClcbiAgICAgIGApXG4gICAgICAgICAgICAuZXEoJ3RpY2tlcnMuc3ltYm9sJywgc3ltYm9sLnRvVXBwZXJDYXNlKCkpXG4gICAgICAgICAgICAub3JkZXIoJ29ic2VydmVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAgICAgICAubGltaXQobGltaXQpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBhbmFseXNpcyBoaXN0b3J5OiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGEgfHwgW107XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBnZXRMZWFkZXJib2FyZChkYXRlLCBsaW1pdCA9IDUwKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldERhdGUgPSBkYXRlIHx8IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IGRhdGVTdHIgPSB0YXJnZXREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgIC5mcm9tKCdsZWFkZXJib2FyZF9kYWlseScpXG4gICAgICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgICAgIC5lcSgnYXNfb2ZfZGF0ZScsIGRhdGVTdHIpXG4gICAgICAgICAgICAub3JkZXIoJ3JhbmsnKVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgbGVhZGVyYm9hcmQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YSB8fCBbXTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIHJlZnJlc2hMZWFkZXJib2FyZCgpIHtcbiAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdyZWZyZXNoX2xlYWRlcmJvYXJkX2RhaWx5Jyk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcmVmcmVzaCBsZWFkZXJib2FyZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBoeWRyYXRlQW5hbHlzaXNGcm9tUmVjb3JkKHJlY29yZCkge1xuICAgICAgICAvLyBUaGUgcmF3IGZpZWxkIGNvbnRhaW5zIHRoZSBmdWxsIGFuYWx5c2lzIGRhdGFcbiAgICAgICAgY29uc3QgcmF3QW5hbHlzaXMgPSByZWNvcmQucmF3LmFuYWx5c2lzO1xuICAgICAgICAvLyBSZWNvbnN0cnVjdCB0aGUgUXVvdGUgb2JqZWN0XG4gICAgICAgIGNvbnN0IHF1b3RlID0gbmV3IFF1b3RlKHtcbiAgICAgICAgICAgIHJlZ3VsYXJNYXJrZXRQcmljZTogcmF3QW5hbHlzaXMucXVvdGUucHJpY2UsXG4gICAgICAgICAgICBjdXJyZW5jeTogcmF3QW5hbHlzaXMucXVvdGUuY3VycmVuY3ksXG4gICAgICAgICAgICBzaG9ydE5hbWU6IHJhd0FuYWx5c2lzLnF1b3RlLm5hbWUsXG4gICAgICAgICAgICBzZWN0b3I6IHJhd0FuYWx5c2lzLnF1b3RlLnNlY3RvcixcbiAgICAgICAgICAgIGluZHVzdHJ5OiByYXdBbmFseXNpcy5xdW90ZS5pbmR1c3RyeVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmVjb25zdHJ1Y3QgdGhlIEZ1bmRhbWVudGFscyBvYmplY3RcbiAgICAgICAgY29uc3QgZnVuZGFtZW50YWxzID0gbmV3IEZ1bmRhbWVudGFscyh7XG4gICAgICAgICAgICBPcGVyYXRpbmdDYXNoRmxvdzogeyByYXc6IHJhd0FuYWx5c2lzLmZ1bmRhbWVudGFscy5vcGVyYXRpbmdDYXNoRmxvdyB9LFxuICAgICAgICAgICAgQ2FwaXRhbEV4cGVuZGl0dXJlOiB7IHJhdzogcmF3QW5hbHlzaXMuZnVuZGFtZW50YWxzLmNhcGl0YWxFeHBlbmRpdHVyZSB9LFxuICAgICAgICAgICAgQ2FzaERpdmlkZW5kc1BhaWQ6IHsgcmF3OiByYXdBbmFseXNpcy5mdW5kYW1lbnRhbHMuY2FzaERpdmlkZW5kc1BhaWQgfSxcbiAgICAgICAgICAgIE5ldEluY29tZTogeyByYXc6IHJhd0FuYWx5c2lzLmZ1bmRhbWVudGFscy5uZXRJbmNvbWUgfSxcbiAgICAgICAgICAgIHBheW91dFJhdGlvOiB7IHJhdzogcmF3QW5hbHlzaXMuZnVuZGFtZW50YWxzLnBheW91dFJhdGlvIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlY29uc3RydWN0IHRoZSBEaXZpZGVuZFNjb3JlcyBvYmplY3RcbiAgICAgICAgY29uc3Qgc2NvcmVzID0gbmV3IERpdmlkZW5kU2NvcmVzKHtcbiAgICAgICAgICAgIHBheW91dDogcmF3QW5hbHlzaXMuc2NvcmVzLnBheW91dCxcbiAgICAgICAgICAgIGZjZjogcmF3QW5hbHlzaXMuc2NvcmVzLmZjZixcbiAgICAgICAgICAgIHN0cmVhazogcmF3QW5hbHlzaXMuc2NvcmVzLnN0cmVhayxcbiAgICAgICAgICAgIGdyb3d0aDogcmF3QW5hbHlzaXMuc2NvcmVzLmdyb3d0aCxcbiAgICAgICAgICAgIHRyZW5kOiByYXdBbmFseXNpcy5zY29yZXMudHJlbmQgfHwgMCwgLy8gRGVmYXVsdCB0byAwIGlmIG5vdCBwcmVzZW50IGluIG9sZCBkYXRhXG4gICAgICAgICAgICBtYWNkOiByYXdBbmFseXNpcy5zY29yZXMubWFjZCB8fCA1MCwgLy8gRGVmYXVsdCB0byA1MCAobmV1dHJhbCkgaWYgbm90IHByZXNlbnQgaW4gb2xkIGRhdGFcbiAgICAgICAgICAgIHJzaTogcmF3QW5hbHlzaXMuc2NvcmVzLnJzaSB8fCA1MCAvLyBEZWZhdWx0IHRvIDUwIChuZXV0cmFsKSBpZiBub3QgcHJlc2VudCBpbiBvbGQgZGF0YVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmVjb25zdHJ1Y3QgRU1BIGRhdGEgKGRlZmF1bHQgdG8gbnVsbCBpZiBub3QgcHJlc2VudCBpbiBvbGQgZGF0YSlcbiAgICAgICAgY29uc3QgZW1hID0ge1xuICAgICAgICAgICAgZW1hMjA6IHJhd0FuYWx5c2lzLmVtYT8uZW1hMjAgfHwgbnVsbCxcbiAgICAgICAgICAgIGVtYTUwOiByYXdBbmFseXNpcy5lbWE/LmVtYTUwIHx8IG51bGwsXG4gICAgICAgICAgICBlbWEyMDA6IHJhd0FuYWx5c2lzLmVtYT8uZW1hMjAwIHx8IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVjb25zdHJ1Y3QgTUFDRCBkYXRhIChkZWZhdWx0IHRvIG51bGwgaWYgbm90IHByZXNlbnQgaW4gb2xkIGRhdGEpXG4gICAgICAgIGNvbnN0IG1hY2QgPSB7XG4gICAgICAgICAgICBtYWNkTGluZTogcmF3QW5hbHlzaXMubWFjZD8ubWFjZExpbmUgfHwgbnVsbCxcbiAgICAgICAgICAgIHNpZ25hbExpbmU6IHJhd0FuYWx5c2lzLm1hY2Q/LnNpZ25hbExpbmUgfHwgbnVsbCxcbiAgICAgICAgICAgIGhpc3RvZ3JhbTogcmF3QW5hbHlzaXMubWFjZD8uaGlzdG9ncmFtIHx8IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVjb25zdHJ1Y3QgUlNJIGRhdGEgKGRlZmF1bHQgdG8gbnVsbCBpZiBub3QgcHJlc2VudCBpbiBvbGQgZGF0YSlcbiAgICAgICAgY29uc3QgcnNpID0ge1xuICAgICAgICAgICAgcnNpOiByYXdBbmFseXNpcy5yc2k/LnJzaSB8fCBudWxsLFxuICAgICAgICAgICAgcGVyaW9kOiByYXdBbmFseXNpcy5yc2k/LnBlcmlvZCB8fCAxNFxuICAgICAgICB9O1xuICAgICAgICAvLyBDcmVhdGUgYW5kIHJldHVybiB0aGUgZnVsbCBEaXZpZGVuZEFuYWx5c2lzXG4gICAgICAgIHJldHVybiBuZXcgRGl2aWRlbmRBbmFseXNpcyh7XG4gICAgICAgICAgICB0aWNrZXI6IHJhd0FuYWx5c2lzLnRpY2tlcixcbiAgICAgICAgICAgIHF1b3RlLFxuICAgICAgICAgICAgdHRtRGl2aWRlbmRzOiByYXdBbmFseXNpcy50dG1EaXZpZGVuZHMsXG4gICAgICAgICAgICB0dG1ZaWVsZDogcmF3QW5hbHlzaXMudHRtWWllbGQsXG4gICAgICAgICAgICBhbm51YWxEaXZpZGVuZHM6IHJhd0FuYWx5c2lzLmFubnVhbERpdmlkZW5kcyxcbiAgICAgICAgICAgIGNhZ3IzOiByYXdBbmFseXNpcy5jYWdyMyxcbiAgICAgICAgICAgIGNhZ3I1OiByYXdBbmFseXNpcy5jYWdyNSxcbiAgICAgICAgICAgIHN0cmVhazogcmF3QW5hbHlzaXMuc3RyZWFrLFxuICAgICAgICAgICAgZnVuZGFtZW50YWxzLFxuICAgICAgICAgICAgc2FmZUdyb3d0aDogcmF3QW5hbHlzaXMuc2FmZUdyb3d0aCxcbiAgICAgICAgICAgIGZvcndhcmREaXZpZGVuZDogcmF3QW5hbHlzaXMuZm9yd2FyZERpdmlkZW5kLFxuICAgICAgICAgICAgZm9yd2FyZFlpZWxkOiByYXdBbmFseXNpcy5mb3J3YXJkWWllbGQsXG4gICAgICAgICAgICBzY29yZXMsXG4gICAgICAgICAgICB0b3RhbFNjb3JlOiByYXdBbmFseXNpcy50b3RhbFNjb3JlLFxuICAgICAgICAgICAgZW1hLFxuICAgICAgICAgICAgbWFjZCxcbiAgICAgICAgICAgIHJzaVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsic3VwYWJhc2UiLCJEaXZpZGVuZEFuYWx5c2lzIiwiRGl2aWRlbmRTY29yZXMiLCJRdW90ZSIsIkZ1bmRhbWVudGFscyIsImNyZWF0ZUhhc2giLCJEYXRhYmFzZVNlcnZpY2UiLCJjcmVhdGVPcHRpb25zSGFzaCIsIm9wdGlvbnMiLCJub3JtYWxpemVkIiwiSlNPTiIsInN0cmluZ2lmeSIsIk9iamVjdCIsImtleXMiLCJzb3J0IiwidXBkYXRlIiwiZGlnZXN0Iiwic3Vic3RyaW5nIiwiZW5zdXJlVGlja2VyIiwic3ltYm9sIiwibmFtZSIsInNlY3RvciIsImluZHVzdHJ5IiwiZGF0YSIsImV4aXN0aW5nVGlja2VyIiwiZXJyb3IiLCJzZWxlY3RFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImlkIiwiY29kZSIsIkVycm9yIiwibWVzc2FnZSIsIm5ld1RpY2tlciIsImluc2VydEVycm9yIiwiaW5zZXJ0IiwidG9VcHBlckNhc2UiLCJzYXZlQW5hbHlzaXMiLCJhbmFseXNpcyIsInRpY2tlcklkIiwidGlja2VyIiwicXVvdGUiLCJ1bmRlZmluZWQiLCJvcHRpb25zSGFzaCIsInJlY29yZCIsInRpY2tlcl9pZCIsIm9ic2VydmVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwib3B0aW9uc19oYXNoIiwicHJpY2UiLCJ0dG1fZGl2IiwiaXNGaW5pdGUiLCJ0dG1EaXZpZGVuZHMiLCJ0dG1feWllbGQiLCJ0dG1ZaWVsZCIsImZvcndhcmRfeWllbGQiLCJmb3J3YXJkWWllbGQiLCJjYWdyMyIsImNhZ3I1Iiwic2FmZV9ncm93dGgiLCJzYWZlR3Jvd3RoIiwic3RyZWFrIiwicGF5b3V0X2VwcyIsImZ1bmRhbWVudGFscyIsImVwc1BheW91dFJhdGlvIiwicGF5b3V0X2ZjZiIsImZjZlBheW91dFJhdGlvIiwiZmNmX2NvdmVyYWdlIiwiZmNmQ292ZXJhZ2UiLCJkZG1fcHJpY2UiLCJzY29yZV9wYXlvdXQiLCJNYXRoIiwicm91bmQiLCJzY29yZXMiLCJwYXlvdXQiLCJzY29yZV9mY2YiLCJmY2YiLCJzY29yZV9zdHJlYWsiLCJzY29yZV9ncm93dGgiLCJncm93dGgiLCJzY29yZV90b3RhbCIsInRvdGFsU2NvcmUiLCJyYXciLCJhbm51YWxEaXZpZGVuZHMiLCJvcGVyYXRpbmdDYXNoRmxvdyIsImNhcGl0YWxFeHBlbmRpdHVyZSIsImNhc2hEaXZpZGVuZHNQYWlkIiwibmV0SW5jb21lIiwicGF5b3V0UmF0aW8iLCJmcmVlQ2FzaEZsb3ciLCJmb3J3YXJkRGl2aWRlbmQiLCJlbWEiLCJtYWNkIiwicnNpIiwic2F2ZWRBdCIsImNvbnNvbGUiLCJnZXRSZWNlbnRBbmFseXNpcyIsImhvdXJzVGhyZXNob2xkIiwiY3V0b2ZmVGltZSIsInNldEhvdXJzIiwiZ2V0SG91cnMiLCJndGUiLCJvcmRlciIsImFzY2VuZGluZyIsImxpbWl0IiwiZ2V0QW5hbHlzaXNIaXN0b3J5IiwiZ2V0TGVhZGVyYm9hcmQiLCJkYXRlIiwidGFyZ2V0RGF0ZSIsImRhdGVTdHIiLCJzcGxpdCIsInJlZnJlc2hMZWFkZXJib2FyZCIsInJwYyIsImh5ZHJhdGVBbmFseXNpc0Zyb21SZWNvcmQiLCJyYXdBbmFseXNpcyIsInJlZ3VsYXJNYXJrZXRQcmljZSIsImN1cnJlbmN5Iiwic2hvcnROYW1lIiwiT3BlcmF0aW5nQ2FzaEZsb3ciLCJDYXBpdGFsRXhwZW5kaXR1cmUiLCJDYXNoRGl2aWRlbmRzUGFpZCIsIk5ldEluY29tZSIsInRyZW5kIiwiZW1hMjAiLCJlbWE1MCIsImVtYTIwMCIsIm1hY2RMaW5lIiwic2lnbmFsTGluZSIsImhpc3RvZ3JhbSIsInBlcmlvZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/services/DatabaseService.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/services/DividendAnalysisService.js":
/*!********************************************************************!*\
  !*** ../../packages/core/dist/services/DividendAnalysisService.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DividendAnalysisService: () => (/* binding */ DividendAnalysisService)\n/* harmony export */ });\n/* harmony import */ var _YahooFinanceService_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./YahooFinanceService.js */ \"(rsc)/../../packages/core/dist/services/YahooFinanceService.js\");\n/* harmony import */ var _AlphaVantageService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AlphaVantageService.js */ \"(rsc)/../../packages/core/dist/services/AlphaVantageService.js\");\n/* harmony import */ var _calculators_DividendCalculator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../calculators/DividendCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/DividendCalculator.js\");\n/* harmony import */ var _calculators_ScoreCalculator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../calculators/ScoreCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/ScoreCalculator.js\");\n/* harmony import */ var _models_DividendAnalysis_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/DividendAnalysis.js */ \"(rsc)/../../packages/core/dist/models/DividendAnalysis.js\");\n/* harmony import */ var _data_DividendAristocrats_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../data/DividendAristocrats.js */ \"(rsc)/../../packages/core/dist/data/DividendAristocrats.js\");\n/* harmony import */ var _utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/MathUtils.js */ \"(rsc)/../../packages/core/dist/utils/MathUtils.js\");\n/* harmony import */ var _DatabaseService_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./DatabaseService.js */ \"(rsc)/../../packages/core/dist/services/DatabaseService.js\");\n/* harmony import */ var _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../calculators/TechnicalIndicatorCalculator.js */ \"(rsc)/../../packages/core/dist/calculators/TechnicalIndicatorCalculator.js\");\n\n\n\n\n\n\n\n\n\nclass DividendAnalysisService {\n    constructor(){\n        this.yahooService = new _YahooFinanceService_js__WEBPACK_IMPORTED_MODULE_0__.YahooFinanceService();\n        // Initialize Alpha Vantage service if API key is available\n        try {\n            this.alphaVantageService = new _AlphaVantageService_js__WEBPACK_IMPORTED_MODULE_1__.AlphaVantageService();\n        } catch (error) {\n            console.warn('Alpha Vantage service not available:', error instanceof Error ? error.message : 'Unknown error');\n            this.alphaVantageService = null;\n        }\n    }\n    async healthCheck() {\n        return this.yahooService.healthCheck();\n    }\n    async analyze(ticker, years = 15, requiredReturn = 0.09, saveToDb = true, forceFresh = false, provider = 'yahoo') {\n        // Create options hash for caching (include provider)\n        const options = {\n            requiredReturn,\n            years,\n            periods: years,\n            provider\n        };\n        const optionsHash = _DatabaseService_js__WEBPACK_IMPORTED_MODULE_7__.DatabaseService.createOptionsHash(options);\n        // Check for recent cached analysis (within 24 hours) unless forced fresh\n        if (saveToDb && !forceFresh) {\n            try {\n                const cachedRecord = await _DatabaseService_js__WEBPACK_IMPORTED_MODULE_7__.DatabaseService.getRecentAnalysis(ticker, optionsHash, 24);\n                if (cachedRecord) {\n                    console.log(` Using cached analysis for ${ticker} (${new Date(cachedRecord.observed_at).toLocaleString()})`);\n                    return _DatabaseService_js__WEBPACK_IMPORTED_MODULE_7__.DatabaseService.hydrateAnalysisFromRecord(cachedRecord);\n                }\n            } catch (error) {\n                console.warn('Cache lookup failed, proceeding with fresh analysis:', error instanceof Error ? error.message : 'Unknown error');\n            }\n        }\n        if (forceFresh) {\n            console.log(` Force fresh analysis requested for ${ticker}, bypassing cache`);\n        }\n        // Perform fresh analysis\n        console.log(` Performing fresh analysis for ${ticker}...`);\n        // Get quote and enhance with Alpha Vantage data if requested\n        let quote = await this.yahooService.getQuote(ticker);\n        // Get company overview from Alpha Vantage if provider is 'av' and service is available\n        let companyOverview = null;\n        if (provider === 'av' && this.alphaVantageService) {\n            try {\n                companyOverview = await this.alphaVantageService.getCompanyOverview(ticker);\n                console.log(` Using Alpha Vantage company overview for ${ticker}`);\n                // Create new enhanced quote with AV data if available\n                if (companyOverview.Sector && companyOverview.Industry) {\n                    const { Quote } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../models/StockData.js */ \"(rsc)/../../packages/core/dist/models/StockData.js\"));\n                    quote = new Quote({\n                        regularMarketPrice: quote.price,\n                        currency: quote.currency,\n                        shortName: quote.name,\n                        sector: companyOverview.Sector,\n                        industry: companyOverview.Industry\n                    });\n                }\n            } catch (error) {\n                console.warn(`  Alpha Vantage company overview failed, falling back to Yahoo Finance: ${error instanceof Error ? error.message : 'Unknown error'}`);\n            }\n        }\n        const dividendEvents = await this.yahooService.getDividendEvents(ticker, years);\n        const fundamentals = await this.yahooService.getFundamentals(ticker, years);\n        const ttmDividends = _calculators_DividendCalculator_js__WEBPACK_IMPORTED_MODULE_2__.DividendCalculator.calculateTTMDividends(dividendEvents);\n        const ttmYield = quote.price ? ttmDividends / quote.price : null;\n        const annualDividends = _calculators_DividendCalculator_js__WEBPACK_IMPORTED_MODULE_2__.DividendCalculator.annualizeDividends(dividendEvents);\n        const last3 = annualDividends.slice(-3);\n        const last5 = annualDividends.slice(-5);\n        const cagr3 = last3.length >= 3 ? (0,_utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_6__.calculateCAGR)(last3) : null;\n        const cagr5 = last5.length >= 5 ? (0,_utils_MathUtils_js__WEBPACK_IMPORTED_MODULE_6__.calculateCAGR)(last5) : null;\n        // Calculate dividend streak with enhanced logic\n        const rawStreak = _calculators_DividendCalculator_js__WEBPACK_IMPORTED_MODULE_2__.DividendCalculator.calculateDividendStreak(annualDividends);\n        // Validate against known dividend elite stocks\n        const streakValidation = _data_DividendAristocrats_js__WEBPACK_IMPORTED_MODULE_5__.DividendEliteDetector.validateStreak(ticker, rawStreak);\n        const { adjustedStreak, rationale } = _data_DividendAristocrats_js__WEBPACK_IMPORTED_MODULE_5__.DividendEliteDetector.getAdjustedStreak(ticker, rawStreak);\n        // Use adjusted streak for analysis\n        const streak = adjustedStreak;\n        // Log data quality issues for known elite stocks\n        if (streakValidation.warning && !\"development\" || \"development\" === 'development') {\n            console.warn(`  Dividend Streak: ${streakValidation.warning}`);\n            if (rationale) {\n                console.warn(` Adjustment: ${rationale}`);\n            }\n        }\n        const safeGrowth = _calculators_DividendCalculator_js__WEBPACK_IMPORTED_MODULE_2__.DividendCalculator.calculateSafeGrowth(cagr5, cagr3, fundamentals, streak);\n        const forwardDividend = isFinite(ttmDividends) ? ttmDividends * (1 + safeGrowth) : NaN;\n        const forwardYield = quote.price ? forwardDividend / quote.price : null;\n        let ema = {\n            ema20: null,\n            ema50: null,\n            ema200: null\n        };\n        let macd = {\n            macdLine: null,\n            signalLine: null,\n            histogram: null\n        };\n        let rsi = {\n            rsi: null,\n            period: 14\n        };\n        let emaSource = 'none';\n        let macdSource = 'none';\n        let rsiSource = 'none';\n        // Try Alpha Vantage first for EMA calculations\n        if (this.alphaVantageService && (provider === 'av' || provider === 'auto')) {\n            try {\n                const timeSeries = await this.alphaVantageService.getTimeSeriesDaily(ticker, 'full');\n                const closePrices = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.extractClosePrices(timeSeries);\n                if (closePrices.length >= 200) {\n                    const ema20 = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.calculateEMA(closePrices, 20);\n                    const ema50 = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.calculateEMA(closePrices, 50);\n                    const ema200 = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.calculateEMA(closePrices, 200);\n                    ema = {\n                        ema20: ema20.length > 0 ? ema20[ema20.length - 1] : null,\n                        ema50: ema50.length > 0 ? ema50[ema50.length - 1] : null,\n                        ema200: ema200.length > 0 ? ema200[ema200.length - 1] : null\n                    };\n                    emaSource = 'alphavantage';\n                    // Calculate MACD and RSI using the same data \n                    const indicators = [];\n                    if (closePrices.length >= 35) {\n                        macd = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.calculateMACD(closePrices);\n                        macdSource = 'alphavantage';\n                        indicators.push('MACD');\n                    }\n                    if (closePrices.length >= 15) {\n                        rsi = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.calculateRSI(closePrices);\n                        rsiSource = 'alphavantage';\n                        indicators.push('RSI');\n                    }\n                    if (indicators.length > 0) {\n                        console.log(` EMA & ${indicators.join(' & ')} calculated using Alpha Vantage data (${closePrices.length} data points)`);\n                    } else {\n                        console.log(` EMA calculated using Alpha Vantage data (${closePrices.length} data points)`);\n                    }\n                } else {\n                    console.warn(`  Insufficient Alpha Vantage data for EMA calculation (${closePrices.length} points, need 200+)`);\n                }\n            } catch (error) {\n                console.warn(`  Alpha Vantage EMA calculation failed, falling back to Yahoo Finance: ${error instanceof Error ? error.message : 'Unknown error'}`);\n            }\n        }\n        // Fallback to Yahoo Finance if Alpha Vantage failed or not available\n        if (emaSource === 'none') {\n            try {\n                const historicalPrices = await this.yahooService.getHistoricalPrices(ticker, 2); // Get 2 years for EMA200\n                const closePrices = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.extractClosePrices(historicalPrices);\n                if (closePrices.length >= 200) {\n                    const ema20 = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.calculateEMA(closePrices, 20);\n                    const ema50 = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.calculateEMA(closePrices, 50);\n                    const ema200 = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.calculateEMA(closePrices, 200);\n                    ema = {\n                        ema20: ema20.length > 0 ? ema20[ema20.length - 1] : null,\n                        ema50: ema50.length > 0 ? ema50[ema50.length - 1] : null,\n                        ema200: ema200.length > 0 ? ema200[ema200.length - 1] : null\n                    };\n                    emaSource = 'yahoo';\n                    // Calculate MACD and RSI using Yahoo Finance data if not already calculated\n                    const indicators = [];\n                    if (macdSource === 'none' && closePrices.length >= 35) {\n                        macd = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.calculateMACD(closePrices);\n                        macdSource = 'yahoo';\n                        indicators.push('MACD');\n                    }\n                    if (rsiSource === 'none' && closePrices.length >= 15) {\n                        rsi = _calculators_TechnicalIndicatorCalculator_js__WEBPACK_IMPORTED_MODULE_8__.TechnicalIndicatorCalculator.calculateRSI(closePrices);\n                        rsiSource = 'yahoo';\n                        indicators.push('RSI');\n                    }\n                    if (indicators.length > 0) {\n                        console.log(` EMA & ${indicators.join(' & ')} calculated using Yahoo Finance data (${closePrices.length} data points)`);\n                    } else {\n                        console.log(` EMA calculated using Yahoo Finance data (${closePrices.length} data points)`);\n                    }\n                } else {\n                    console.warn(`  Insufficient Yahoo Finance data for EMA calculation (${closePrices.length} points, need 200+)`);\n                }\n            } catch (error) {\n                console.warn(`  Yahoo Finance EMA calculation also failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n            }\n        }\n        const scores = _calculators_ScoreCalculator_js__WEBPACK_IMPORTED_MODULE_3__.ScoreCalculator.calculateDividendScores(fundamentals, streak, safeGrowth, quote, ema, macd, rsi);\n        const totalScore = _calculators_ScoreCalculator_js__WEBPACK_IMPORTED_MODULE_3__.ScoreCalculator.calculateTotalScore(scores);\n        // Analyze EMA trends for fundamental concerns\n        const emaAnalysis = _calculators_ScoreCalculator_js__WEBPACK_IMPORTED_MODULE_3__.ScoreCalculator.analyzeEMATrends(quote.price, ema);\n        // Log EMA trend analysis if there are concerns\n        if (emaAnalysis.fundamentalConcerns.length > 0 && emaAnalysis.fundamentalConcerns[0] !== 'EMA data unavailable') {\n            console.log(` EMA Trend Analysis: ${emaAnalysis.trendStrength.toUpperCase()}`);\n            emaAnalysis.fundamentalConcerns.forEach((concern)=>{\n                console.log(`     ${concern}`);\n            });\n        }\n        const analysis = new _models_DividendAnalysis_js__WEBPACK_IMPORTED_MODULE_4__.DividendAnalysis({\n            ticker,\n            quote,\n            ttmDividends,\n            ttmYield,\n            annualDividends,\n            cagr3,\n            cagr5,\n            streak,\n            fundamentals,\n            safeGrowth,\n            forwardDividend,\n            forwardYield,\n            scores,\n            totalScore,\n            ema,\n            macd,\n            rsi\n        });\n        // Save to database if requested\n        if (saveToDb) {\n            try {\n                await _DatabaseService_js__WEBPACK_IMPORTED_MODULE_7__.DatabaseService.saveAnalysis(analysis, options);\n                console.log(` Analysis saved to database for ${ticker}`);\n            } catch (error) {\n                console.warn('Failed to save analysis to database:', error instanceof Error ? error.message : 'Unknown error');\n            // Don't throw - analysis should still succeed even if DB save fails\n            }\n        }\n        return analysis;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L3NlcnZpY2VzL0RpdmlkZW5kQW5hbHlzaXNTZXJ2aWNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBK0Q7QUFDQTtBQUNXO0FBQ047QUFDSDtBQUNNO0FBQ2pCO0FBQ0M7QUFDdUM7QUFDdkYsTUFBTVM7SUFHVCxhQUFjO1FBQ1YsSUFBSSxDQUFDQyxZQUFZLEdBQUcsSUFBSVYsd0VBQW1CQTtRQUMzQywyREFBMkQ7UUFDM0QsSUFBSTtZQUNBLElBQUksQ0FBQ1csbUJBQW1CLEdBQUcsSUFBSVYsd0VBQW1CQTtRQUN0RCxFQUNBLE9BQU9XLE9BQU87WUFDVkMsUUFBUUMsSUFBSSxDQUFDLHdDQUF3Q0YsaUJBQWlCRyxRQUFRSCxNQUFNSSxPQUFPLEdBQUc7WUFDOUYsSUFBSSxDQUFDTCxtQkFBbUIsR0FBRztRQUMvQjtJQUNKO0lBQ0EsTUFBTU0sY0FBYztRQUNoQixPQUFPLElBQUksQ0FBQ1AsWUFBWSxDQUFDTyxXQUFXO0lBQ3hDO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxRQUFRLEVBQUUsRUFBRUMsaUJBQWlCLElBQUksRUFBRUMsV0FBVyxJQUFJLEVBQUVDLGFBQWEsS0FBSyxFQUFFQyxXQUFXLE9BQU8sRUFBRTtRQUM5RyxxREFBcUQ7UUFDckQsTUFBTUMsVUFBVTtZQUNaSjtZQUNBRDtZQUNBTSxTQUFTTjtZQUNUSTtRQUNKO1FBQ0EsTUFBTUcsY0FBY3BCLGdFQUFlQSxDQUFDcUIsaUJBQWlCLENBQUNIO1FBQ3RELHlFQUF5RTtRQUN6RSxJQUFJSCxZQUFZLENBQUNDLFlBQVk7WUFDekIsSUFBSTtnQkFDQSxNQUFNTSxlQUFlLE1BQU10QixnRUFBZUEsQ0FBQ3VCLGlCQUFpQixDQUFDWCxRQUFRUSxhQUFhO2dCQUNsRixJQUFJRSxjQUFjO29CQUNkaEIsUUFBUWtCLEdBQUcsQ0FBQyxDQUFDLDZCQUE2QixFQUFFWixPQUFPLEVBQUUsRUFBRSxJQUFJYSxLQUFLSCxhQUFhSSxX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O1lBQy9FSixZQUFZRSxtQkFBbUIsQ0FBQ0csT0FBTyxDQUFDQyxDQUFBQTtnQkFDcEN2RyxRQUFRa0IsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFcUYsU0FBUztZQUNuQztRQUNKO1FBQ0EsTUFBTUMsV0FBVyxJQUFJakgseUVBQWdCQSxDQUFDO1lBQ2xDZTtZQUNBaUI7WUFDQWtCO1lBQ0FFO1lBQ0FDO1lBQ0FLO1lBQ0FFO1lBQ0FRO1lBQ0FwQjtZQUNBdUI7WUFDQUU7WUFDQUc7WUFDQTBCO1lBQ0FFO1lBQ0EzQjtZQUNBSTtZQUNBSTtRQUNKO1FBQ0EsZ0NBQWdDO1FBQ2hDLElBQUluRSxVQUFVO1lBQ1YsSUFBSTtnQkFDQSxNQUFNZixnRUFBZUEsQ0FBQytHLFlBQVksQ0FBQ0QsVUFBVTVGO2dCQUM3Q1osUUFBUWtCLEdBQUcsQ0FBQyxDQUFDLGtDQUFrQyxFQUFFWixRQUFRO1lBQzdELEVBQ0EsT0FBT1AsT0FBTztnQkFDVkMsUUFBUUMsSUFBSSxDQUFDLHdDQUF3Q0YsaUJBQWlCRyxRQUFRSCxNQUFNSSxPQUFPLEdBQUc7WUFDOUYsb0VBQW9FO1lBQ3hFO1FBQ0o7UUFDQSxPQUFPcUc7SUFDWDtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbWFydGluc3Rhcm9zdGEvRGV2ZWxvcG1lbnQvdmliZXMvZGl2eXkvcGFja2FnZXMvY29yZS9kaXN0L3NlcnZpY2VzL0RpdmlkZW5kQW5hbHlzaXNTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFlhaG9vRmluYW5jZVNlcnZpY2UgfSBmcm9tIFwiLi9ZYWhvb0ZpbmFuY2VTZXJ2aWNlLmpzXCI7XG5pbXBvcnQgeyBBbHBoYVZhbnRhZ2VTZXJ2aWNlIH0gZnJvbSBcIi4vQWxwaGFWYW50YWdlU2VydmljZS5qc1wiO1xuaW1wb3J0IHsgRGl2aWRlbmRDYWxjdWxhdG9yIH0gZnJvbSBcIi4uL2NhbGN1bGF0b3JzL0RpdmlkZW5kQ2FsY3VsYXRvci5qc1wiO1xuaW1wb3J0IHsgU2NvcmVDYWxjdWxhdG9yIH0gZnJvbSBcIi4uL2NhbGN1bGF0b3JzL1Njb3JlQ2FsY3VsYXRvci5qc1wiO1xuaW1wb3J0IHsgRGl2aWRlbmRBbmFseXNpcyB9IGZyb20gXCIuLi9tb2RlbHMvRGl2aWRlbmRBbmFseXNpcy5qc1wiO1xuaW1wb3J0IHsgRGl2aWRlbmRFbGl0ZURldGVjdG9yIH0gZnJvbSBcIi4uL2RhdGEvRGl2aWRlbmRBcmlzdG9jcmF0cy5qc1wiO1xuaW1wb3J0IHsgY2FsY3VsYXRlQ0FHUiB9IGZyb20gXCIuLi91dGlscy9NYXRoVXRpbHMuanNcIjtcbmltcG9ydCB7IERhdGFiYXNlU2VydmljZSB9IGZyb20gXCIuL0RhdGFiYXNlU2VydmljZS5qc1wiO1xuaW1wb3J0IHsgVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvciB9IGZyb20gXCIuLi9jYWxjdWxhdG9ycy9UZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yLmpzXCI7XG5leHBvcnQgY2xhc3MgRGl2aWRlbmRBbmFseXNpc1NlcnZpY2Uge1xuICAgIHlhaG9vU2VydmljZTtcbiAgICBhbHBoYVZhbnRhZ2VTZXJ2aWNlO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnlhaG9vU2VydmljZSA9IG5ldyBZYWhvb0ZpbmFuY2VTZXJ2aWNlKCk7XG4gICAgICAgIC8vIEluaXRpYWxpemUgQWxwaGEgVmFudGFnZSBzZXJ2aWNlIGlmIEFQSSBrZXkgaXMgYXZhaWxhYmxlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmFscGhhVmFudGFnZVNlcnZpY2UgPSBuZXcgQWxwaGFWYW50YWdlU2VydmljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdBbHBoYSBWYW50YWdlIHNlcnZpY2Ugbm90IGF2YWlsYWJsZTonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB0aGlzLmFscGhhVmFudGFnZVNlcnZpY2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGhlYWx0aENoZWNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy55YWhvb1NlcnZpY2UuaGVhbHRoQ2hlY2soKTtcbiAgICB9XG4gICAgYXN5bmMgYW5hbHl6ZSh0aWNrZXIsIHllYXJzID0gMTUsIHJlcXVpcmVkUmV0dXJuID0gMC4wOSwgc2F2ZVRvRGIgPSB0cnVlLCBmb3JjZUZyZXNoID0gZmFsc2UsIHByb3ZpZGVyID0gJ3lhaG9vJykge1xuICAgICAgICAvLyBDcmVhdGUgb3B0aW9ucyBoYXNoIGZvciBjYWNoaW5nIChpbmNsdWRlIHByb3ZpZGVyKVxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgcmVxdWlyZWRSZXR1cm4sXG4gICAgICAgICAgICB5ZWFycyxcbiAgICAgICAgICAgIHBlcmlvZHM6IHllYXJzLFxuICAgICAgICAgICAgcHJvdmlkZXJcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb3B0aW9uc0hhc2ggPSBEYXRhYmFzZVNlcnZpY2UuY3JlYXRlT3B0aW9uc0hhc2gob3B0aW9ucyk7XG4gICAgICAgIC8vIENoZWNrIGZvciByZWNlbnQgY2FjaGVkIGFuYWx5c2lzICh3aXRoaW4gMjQgaG91cnMpIHVubGVzcyBmb3JjZWQgZnJlc2hcbiAgICAgICAgaWYgKHNhdmVUb0RiICYmICFmb3JjZUZyZXNoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlZFJlY29yZCA9IGF3YWl0IERhdGFiYXNlU2VydmljZS5nZXRSZWNlbnRBbmFseXNpcyh0aWNrZXIsIG9wdGlvbnNIYXNoLCAyNCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZFJlY29yZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+TiyBVc2luZyBjYWNoZWQgYW5hbHlzaXMgZm9yICR7dGlja2VyfSAoJHtuZXcgRGF0ZShjYWNoZWRSZWNvcmQub2JzZXJ2ZWRfYXQpLnRvTG9jYWxlU3RyaW5nKCl9KWApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0YWJhc2VTZXJ2aWNlLmh5ZHJhdGVBbmFseXNpc0Zyb21SZWNvcmQoY2FjaGVkUmVjb3JkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NhY2hlIGxvb2t1cCBmYWlsZWQsIHByb2NlZWRpbmcgd2l0aCBmcmVzaCBhbmFseXNpczonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcmNlRnJlc2gpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIEZvcmNlIGZyZXNoIGFuYWx5c2lzIHJlcXVlc3RlZCBmb3IgJHt0aWNrZXJ9LCBieXBhc3NpbmcgY2FjaGVgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQZXJmb3JtIGZyZXNoIGFuYWx5c2lzXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFBlcmZvcm1pbmcgZnJlc2ggYW5hbHlzaXMgZm9yICR7dGlja2VyfS4uLmApO1xuICAgICAgICAvLyBHZXQgcXVvdGUgYW5kIGVuaGFuY2Ugd2l0aCBBbHBoYSBWYW50YWdlIGRhdGEgaWYgcmVxdWVzdGVkXG4gICAgICAgIGxldCBxdW90ZSA9IGF3YWl0IHRoaXMueWFob29TZXJ2aWNlLmdldFF1b3RlKHRpY2tlcik7XG4gICAgICAgIC8vIEdldCBjb21wYW55IG92ZXJ2aWV3IGZyb20gQWxwaGEgVmFudGFnZSBpZiBwcm92aWRlciBpcyAnYXYnIGFuZCBzZXJ2aWNlIGlzIGF2YWlsYWJsZVxuICAgICAgICBsZXQgY29tcGFueU92ZXJ2aWV3ID0gbnVsbDtcbiAgICAgICAgaWYgKHByb3ZpZGVyID09PSAnYXYnICYmIHRoaXMuYWxwaGFWYW50YWdlU2VydmljZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb21wYW55T3ZlcnZpZXcgPSBhd2FpdCB0aGlzLmFscGhhVmFudGFnZVNlcnZpY2UuZ2V0Q29tcGFueU92ZXJ2aWV3KHRpY2tlcik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk4ogVXNpbmcgQWxwaGEgVmFudGFnZSBjb21wYW55IG92ZXJ2aWV3IGZvciAke3RpY2tlcn1gKTtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGVuaGFuY2VkIHF1b3RlIHdpdGggQVYgZGF0YSBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFueU92ZXJ2aWV3LlNlY3RvciAmJiBjb21wYW55T3ZlcnZpZXcuSW5kdXN0cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBRdW90ZSB9ID0gYXdhaXQgaW1wb3J0KFwiLi4vbW9kZWxzL1N0b2NrRGF0YS5qc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgcXVvdGUgPSBuZXcgUXVvdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVndWxhck1hcmtldFByaWNlOiBxdW90ZS5wcmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBxdW90ZS5jdXJyZW5jeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0TmFtZTogcXVvdGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3RvcjogY29tcGFueU92ZXJ2aWV3LlNlY3RvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZHVzdHJ5OiBjb21wYW55T3ZlcnZpZXcuSW5kdXN0cnlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gIEFscGhhIFZhbnRhZ2UgY29tcGFueSBvdmVydmlldyBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byBZYWhvbyBGaW5hbmNlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpdmlkZW5kRXZlbnRzID0gYXdhaXQgdGhpcy55YWhvb1NlcnZpY2UuZ2V0RGl2aWRlbmRFdmVudHModGlja2VyLCB5ZWFycyk7XG4gICAgICAgIGNvbnN0IGZ1bmRhbWVudGFscyA9IGF3YWl0IHRoaXMueWFob29TZXJ2aWNlLmdldEZ1bmRhbWVudGFscyh0aWNrZXIsIHllYXJzKTtcbiAgICAgICAgY29uc3QgdHRtRGl2aWRlbmRzID0gRGl2aWRlbmRDYWxjdWxhdG9yLmNhbGN1bGF0ZVRUTURpdmlkZW5kcyhkaXZpZGVuZEV2ZW50cyk7XG4gICAgICAgIGNvbnN0IHR0bVlpZWxkID0gcXVvdGUucHJpY2UgPyB0dG1EaXZpZGVuZHMgLyBxdW90ZS5wcmljZSA6IG51bGw7XG4gICAgICAgIGNvbnN0IGFubnVhbERpdmlkZW5kcyA9IERpdmlkZW5kQ2FsY3VsYXRvci5hbm51YWxpemVEaXZpZGVuZHMoZGl2aWRlbmRFdmVudHMpO1xuICAgICAgICBjb25zdCBsYXN0MyA9IGFubnVhbERpdmlkZW5kcy5zbGljZSgtMyk7XG4gICAgICAgIGNvbnN0IGxhc3Q1ID0gYW5udWFsRGl2aWRlbmRzLnNsaWNlKC01KTtcbiAgICAgICAgY29uc3QgY2FncjMgPSBsYXN0My5sZW5ndGggPj0gMyA/IGNhbGN1bGF0ZUNBR1IobGFzdDMpIDogbnVsbDtcbiAgICAgICAgY29uc3QgY2FncjUgPSBsYXN0NS5sZW5ndGggPj0gNSA/IGNhbGN1bGF0ZUNBR1IobGFzdDUpIDogbnVsbDtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGRpdmlkZW5kIHN0cmVhayB3aXRoIGVuaGFuY2VkIGxvZ2ljXG4gICAgICAgIGNvbnN0IHJhd1N0cmVhayA9IERpdmlkZW5kQ2FsY3VsYXRvci5jYWxjdWxhdGVEaXZpZGVuZFN0cmVhayhhbm51YWxEaXZpZGVuZHMpO1xuICAgICAgICAvLyBWYWxpZGF0ZSBhZ2FpbnN0IGtub3duIGRpdmlkZW5kIGVsaXRlIHN0b2Nrc1xuICAgICAgICBjb25zdCBzdHJlYWtWYWxpZGF0aW9uID0gRGl2aWRlbmRFbGl0ZURldGVjdG9yLnZhbGlkYXRlU3RyZWFrKHRpY2tlciwgcmF3U3RyZWFrKTtcbiAgICAgICAgY29uc3QgeyBhZGp1c3RlZFN0cmVhaywgcmF0aW9uYWxlIH0gPSBEaXZpZGVuZEVsaXRlRGV0ZWN0b3IuZ2V0QWRqdXN0ZWRTdHJlYWsodGlja2VyLCByYXdTdHJlYWspO1xuICAgICAgICAvLyBVc2UgYWRqdXN0ZWQgc3RyZWFrIGZvciBhbmFseXNpc1xuICAgICAgICBjb25zdCBzdHJlYWsgPSBhZGp1c3RlZFN0cmVhaztcbiAgICAgICAgLy8gTG9nIGRhdGEgcXVhbGl0eSBpc3N1ZXMgZm9yIGtub3duIGVsaXRlIHN0b2Nrc1xuICAgICAgICBpZiAoc3RyZWFrVmFsaWRhdGlvbi53YXJuaW5nICYmICFwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gIERpdmlkZW5kIFN0cmVhazogJHtzdHJlYWtWYWxpZGF0aW9uLndhcm5pbmd9YCk7XG4gICAgICAgICAgICBpZiAocmF0aW9uYWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGDwn5SnIEFkanVzdG1lbnQ6ICR7cmF0aW9uYWxlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNhZmVHcm93dGggPSBEaXZpZGVuZENhbGN1bGF0b3IuY2FsY3VsYXRlU2FmZUdyb3d0aChjYWdyNSwgY2FncjMsIGZ1bmRhbWVudGFscywgc3RyZWFrKTtcbiAgICAgICAgY29uc3QgZm9yd2FyZERpdmlkZW5kID0gaXNGaW5pdGUodHRtRGl2aWRlbmRzKSA/IHR0bURpdmlkZW5kcyAqICgxICsgc2FmZUdyb3d0aCkgOiBOYU47XG4gICAgICAgIGNvbnN0IGZvcndhcmRZaWVsZCA9IHF1b3RlLnByaWNlID8gZm9yd2FyZERpdmlkZW5kIC8gcXVvdGUucHJpY2UgOiBudWxsO1xuICAgICAgICBsZXQgZW1hID0geyBlbWEyMDogbnVsbCwgZW1hNTA6IG51bGwsIGVtYTIwMDogbnVsbCB9O1xuICAgICAgICBsZXQgbWFjZCA9IHsgbWFjZExpbmU6IG51bGwsIHNpZ25hbExpbmU6IG51bGwsIGhpc3RvZ3JhbTogbnVsbCB9O1xuICAgICAgICBsZXQgcnNpID0geyByc2k6IG51bGwsIHBlcmlvZDogMTQgfTtcbiAgICAgICAgbGV0IGVtYVNvdXJjZSA9ICdub25lJztcbiAgICAgICAgbGV0IG1hY2RTb3VyY2UgPSAnbm9uZSc7XG4gICAgICAgIGxldCByc2lTb3VyY2UgPSAnbm9uZSc7XG4gICAgICAgIC8vIFRyeSBBbHBoYSBWYW50YWdlIGZpcnN0IGZvciBFTUEgY2FsY3VsYXRpb25zXG4gICAgICAgIGlmICh0aGlzLmFscGhhVmFudGFnZVNlcnZpY2UgJiYgKHByb3ZpZGVyID09PSAnYXYnIHx8IHByb3ZpZGVyID09PSAnYXV0bycpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTZXJpZXMgPSBhd2FpdCB0aGlzLmFscGhhVmFudGFnZVNlcnZpY2UuZ2V0VGltZVNlcmllc0RhaWx5KHRpY2tlciwgJ2Z1bGwnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9zZVByaWNlcyA9IFRlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IuZXh0cmFjdENsb3NlUHJpY2VzKHRpbWVTZXJpZXMpO1xuICAgICAgICAgICAgICAgIGlmIChjbG9zZVByaWNlcy5sZW5ndGggPj0gMjAwKSB7IC8vIE5lZWQgYXQgbGVhc3QgMjAwIGRhdGEgcG9pbnRzIGZvciBFTUEyMDBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1hMjAgPSBUZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yLmNhbGN1bGF0ZUVNQShjbG9zZVByaWNlcywgMjApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWE1MCA9IFRlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IuY2FsY3VsYXRlRU1BKGNsb3NlUHJpY2VzLCA1MCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYTIwMCA9IFRlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IuY2FsY3VsYXRlRU1BKGNsb3NlUHJpY2VzLCAyMDApO1xuICAgICAgICAgICAgICAgICAgICBlbWEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWEyMDogZW1hMjAubGVuZ3RoID4gMCA/IGVtYTIwW2VtYTIwLmxlbmd0aCAtIDFdIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYTUwOiBlbWE1MC5sZW5ndGggPiAwID8gZW1hNTBbZW1hNTAubGVuZ3RoIC0gMV0gOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1hMjAwOiBlbWEyMDAubGVuZ3RoID4gMCA/IGVtYTIwMFtlbWEyMDAubGVuZ3RoIC0gMV0gOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBlbWFTb3VyY2UgPSAnYWxwaGF2YW50YWdlJztcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIE1BQ0QgYW5kIFJTSSB1c2luZyB0aGUgc2FtZSBkYXRhIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2F0b3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZVByaWNlcy5sZW5ndGggPj0gMzUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hY2QgPSBUZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yLmNhbGN1bGF0ZU1BQ0QoY2xvc2VQcmljZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFjZFNvdXJjZSA9ICdhbHBoYXZhbnRhZ2UnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNhdG9ycy5wdXNoKCdNQUNEJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlUHJpY2VzLmxlbmd0aCA+PSAxNSkgeyAvLyBOZWVkIGF0IGxlYXN0IDE1IHBvaW50cyBmb3IgUlNJICgxNCArIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICByc2kgPSBUZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yLmNhbGN1bGF0ZVJTSShjbG9zZVByaWNlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByc2lTb3VyY2UgPSAnYWxwaGF2YW50YWdlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvcnMucHVzaCgnUlNJJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGljYXRvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk4ogRU1BICYgJHtpbmRpY2F0b3JzLmpvaW4oJyAmICcpfSBjYWxjdWxhdGVkIHVzaW5nIEFscGhhIFZhbnRhZ2UgZGF0YSAoJHtjbG9zZVByaWNlcy5sZW5ndGh9IGRhdGEgcG9pbnRzKWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk4ogRU1BIGNhbGN1bGF0ZWQgdXNpbmcgQWxwaGEgVmFudGFnZSBkYXRhICgke2Nsb3NlUHJpY2VzLmxlbmd0aH0gZGF0YSBwb2ludHMpYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPICBJbnN1ZmZpY2llbnQgQWxwaGEgVmFudGFnZSBkYXRhIGZvciBFTUEgY2FsY3VsYXRpb24gKCR7Y2xvc2VQcmljZXMubGVuZ3RofSBwb2ludHMsIG5lZWQgMjAwKylgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyAgQWxwaGEgVmFudGFnZSBFTUEgY2FsY3VsYXRpb24gZmFpbGVkLCBmYWxsaW5nIGJhY2sgdG8gWWFob28gRmluYW5jZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBGYWxsYmFjayB0byBZYWhvbyBGaW5hbmNlIGlmIEFscGhhIFZhbnRhZ2UgZmFpbGVkIG9yIG5vdCBhdmFpbGFibGVcbiAgICAgICAgaWYgKGVtYVNvdXJjZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhpc3RvcmljYWxQcmljZXMgPSBhd2FpdCB0aGlzLnlhaG9vU2VydmljZS5nZXRIaXN0b3JpY2FsUHJpY2VzKHRpY2tlciwgMik7IC8vIEdldCAyIHllYXJzIGZvciBFTUEyMDBcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9zZVByaWNlcyA9IFRlY2huaWNhbEluZGljYXRvckNhbGN1bGF0b3IuZXh0cmFjdENsb3NlUHJpY2VzKGhpc3RvcmljYWxQcmljZXMpO1xuICAgICAgICAgICAgICAgIGlmIChjbG9zZVByaWNlcy5sZW5ndGggPj0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYTIwID0gVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvci5jYWxjdWxhdGVFTUEoY2xvc2VQcmljZXMsIDIwKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1hNTAgPSBUZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yLmNhbGN1bGF0ZUVNQShjbG9zZVByaWNlcywgNTApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWEyMDAgPSBUZWNobmljYWxJbmRpY2F0b3JDYWxjdWxhdG9yLmNhbGN1bGF0ZUVNQShjbG9zZVByaWNlcywgMjAwKTtcbiAgICAgICAgICAgICAgICAgICAgZW1hID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1hMjA6IGVtYTIwLmxlbmd0aCA+IDAgPyBlbWEyMFtlbWEyMC5sZW5ndGggLSAxXSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWE1MDogZW1hNTAubGVuZ3RoID4gMCA/IGVtYTUwW2VtYTUwLmxlbmd0aCAtIDFdIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYTIwMDogZW1hMjAwLmxlbmd0aCA+IDAgPyBlbWEyMDBbZW1hMjAwLmxlbmd0aCAtIDFdIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZW1hU291cmNlID0gJ3lhaG9vJztcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIE1BQ0QgYW5kIFJTSSB1c2luZyBZYWhvbyBGaW5hbmNlIGRhdGEgaWYgbm90IGFscmVhZHkgY2FsY3VsYXRlZFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2F0b3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYWNkU291cmNlID09PSAnbm9uZScgJiYgY2xvc2VQcmljZXMubGVuZ3RoID49IDM1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWNkID0gVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvci5jYWxjdWxhdGVNQUNEKGNsb3NlUHJpY2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hY2RTb3VyY2UgPSAneWFob28nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNhdG9ycy5wdXNoKCdNQUNEJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJzaVNvdXJjZSA9PT0gJ25vbmUnICYmIGNsb3NlUHJpY2VzLmxlbmd0aCA+PSAxNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcnNpID0gVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvci5jYWxjdWxhdGVSU0koY2xvc2VQcmljZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcnNpU291cmNlID0gJ3lhaG9vJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvcnMucHVzaCgnUlNJJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGljYXRvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk4ogRU1BICYgJHtpbmRpY2F0b3JzLmpvaW4oJyAmICcpfSBjYWxjdWxhdGVkIHVzaW5nIFlhaG9vIEZpbmFuY2UgZGF0YSAoJHtjbG9zZVByaWNlcy5sZW5ndGh9IGRhdGEgcG9pbnRzKWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk4ogRU1BIGNhbGN1bGF0ZWQgdXNpbmcgWWFob28gRmluYW5jZSBkYXRhICgke2Nsb3NlUHJpY2VzLmxlbmd0aH0gZGF0YSBwb2ludHMpYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPICBJbnN1ZmZpY2llbnQgWWFob28gRmluYW5jZSBkYXRhIGZvciBFTUEgY2FsY3VsYXRpb24gKCR7Y2xvc2VQcmljZXMubGVuZ3RofSBwb2ludHMsIG5lZWQgMjAwKylgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyAgWWFob28gRmluYW5jZSBFTUEgY2FsY3VsYXRpb24gYWxzbyBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NvcmVzID0gU2NvcmVDYWxjdWxhdG9yLmNhbGN1bGF0ZURpdmlkZW5kU2NvcmVzKGZ1bmRhbWVudGFscywgc3RyZWFrLCBzYWZlR3Jvd3RoLCBxdW90ZSwgZW1hLCBtYWNkLCByc2kpO1xuICAgICAgICBjb25zdCB0b3RhbFNjb3JlID0gU2NvcmVDYWxjdWxhdG9yLmNhbGN1bGF0ZVRvdGFsU2NvcmUoc2NvcmVzKTtcbiAgICAgICAgLy8gQW5hbHl6ZSBFTUEgdHJlbmRzIGZvciBmdW5kYW1lbnRhbCBjb25jZXJuc1xuICAgICAgICBjb25zdCBlbWFBbmFseXNpcyA9IFNjb3JlQ2FsY3VsYXRvci5hbmFseXplRU1BVHJlbmRzKHF1b3RlLnByaWNlLCBlbWEpO1xuICAgICAgICAvLyBMb2cgRU1BIHRyZW5kIGFuYWx5c2lzIGlmIHRoZXJlIGFyZSBjb25jZXJuc1xuICAgICAgICBpZiAoZW1hQW5hbHlzaXMuZnVuZGFtZW50YWxDb25jZXJucy5sZW5ndGggPiAwICYmIGVtYUFuYWx5c2lzLmZ1bmRhbWVudGFsQ29uY2VybnNbMF0gIT09ICdFTUEgZGF0YSB1bmF2YWlsYWJsZScpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OIIEVNQSBUcmVuZCBBbmFseXNpczogJHtlbWFBbmFseXNpcy50cmVuZFN0cmVuZ3RoLnRvVXBwZXJDYXNlKCl9YCk7XG4gICAgICAgICAgICBlbWFBbmFseXNpcy5mdW5kYW1lbnRhbENvbmNlcm5zLmZvckVhY2goY29uY2VybiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCAgIOKaoO+4jyAgJHtjb25jZXJufWApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYW5hbHlzaXMgPSBuZXcgRGl2aWRlbmRBbmFseXNpcyh7XG4gICAgICAgICAgICB0aWNrZXIsXG4gICAgICAgICAgICBxdW90ZSxcbiAgICAgICAgICAgIHR0bURpdmlkZW5kcyxcbiAgICAgICAgICAgIHR0bVlpZWxkLFxuICAgICAgICAgICAgYW5udWFsRGl2aWRlbmRzLFxuICAgICAgICAgICAgY2FncjMsXG4gICAgICAgICAgICBjYWdyNSxcbiAgICAgICAgICAgIHN0cmVhayxcbiAgICAgICAgICAgIGZ1bmRhbWVudGFscyxcbiAgICAgICAgICAgIHNhZmVHcm93dGgsXG4gICAgICAgICAgICBmb3J3YXJkRGl2aWRlbmQsXG4gICAgICAgICAgICBmb3J3YXJkWWllbGQsXG4gICAgICAgICAgICBzY29yZXMsXG4gICAgICAgICAgICB0b3RhbFNjb3JlLFxuICAgICAgICAgICAgZW1hLFxuICAgICAgICAgICAgbWFjZCxcbiAgICAgICAgICAgIHJzaVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gU2F2ZSB0byBkYXRhYmFzZSBpZiByZXF1ZXN0ZWRcbiAgICAgICAgaWYgKHNhdmVUb0RiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IERhdGFiYXNlU2VydmljZS5zYXZlQW5hbHlzaXMoYW5hbHlzaXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5K+IEFuYWx5c2lzIHNhdmVkIHRvIGRhdGFiYXNlIGZvciAke3RpY2tlcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNhdmUgYW5hbHlzaXMgdG8gZGF0YWJhc2U6JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgICAgIC8vIERvbid0IHRocm93IC0gYW5hbHlzaXMgc2hvdWxkIHN0aWxsIHN1Y2NlZWQgZXZlbiBpZiBEQiBzYXZlIGZhaWxzXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFuYWx5c2lzO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJZYWhvb0ZpbmFuY2VTZXJ2aWNlIiwiQWxwaGFWYW50YWdlU2VydmljZSIsIkRpdmlkZW5kQ2FsY3VsYXRvciIsIlNjb3JlQ2FsY3VsYXRvciIsIkRpdmlkZW5kQW5hbHlzaXMiLCJEaXZpZGVuZEVsaXRlRGV0ZWN0b3IiLCJjYWxjdWxhdGVDQUdSIiwiRGF0YWJhc2VTZXJ2aWNlIiwiVGVjaG5pY2FsSW5kaWNhdG9yQ2FsY3VsYXRvciIsIkRpdmlkZW5kQW5hbHlzaXNTZXJ2aWNlIiwieWFob29TZXJ2aWNlIiwiYWxwaGFWYW50YWdlU2VydmljZSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJFcnJvciIsIm1lc3NhZ2UiLCJoZWFsdGhDaGVjayIsImFuYWx5emUiLCJ0aWNrZXIiLCJ5ZWFycyIsInJlcXVpcmVkUmV0dXJuIiwic2F2ZVRvRGIiLCJmb3JjZUZyZXNoIiwicHJvdmlkZXIiLCJvcHRpb25zIiwicGVyaW9kcyIsIm9wdGlvbnNIYXNoIiwiY3JlYXRlT3B0aW9uc0hhc2giLCJjYWNoZWRSZWNvcmQiLCJnZXRSZWNlbnRBbmFseXNpcyIsImxvZyIsIkRhdGUiLCJvYnNlcnZlZF9hdCIsInRvTG9jYWxlU3RyaW5nIiwiaHlkcmF0ZUFuYWx5c2lzRnJvbVJlY29yZCIsInF1b3RlIiwiZ2V0UXVvdGUiLCJjb21wYW55T3ZlcnZpZXciLCJnZXRDb21wYW55T3ZlcnZpZXciLCJTZWN0b3IiLCJJbmR1c3RyeSIsIlF1b3RlIiwicmVndWxhck1hcmtldFByaWNlIiwicHJpY2UiLCJjdXJyZW5jeSIsInNob3J0TmFtZSIsIm5hbWUiLCJzZWN0b3IiLCJpbmR1c3RyeSIsImRpdmlkZW5kRXZlbnRzIiwiZ2V0RGl2aWRlbmRFdmVudHMiLCJmdW5kYW1lbnRhbHMiLCJnZXRGdW5kYW1lbnRhbHMiLCJ0dG1EaXZpZGVuZHMiLCJjYWxjdWxhdGVUVE1EaXZpZGVuZHMiLCJ0dG1ZaWVsZCIsImFubnVhbERpdmlkZW5kcyIsImFubnVhbGl6ZURpdmlkZW5kcyIsImxhc3QzIiwic2xpY2UiLCJsYXN0NSIsImNhZ3IzIiwibGVuZ3RoIiwiY2FncjUiLCJyYXdTdHJlYWsiLCJjYWxjdWxhdGVEaXZpZGVuZFN0cmVhayIsInN0cmVha1ZhbGlkYXRpb24iLCJ2YWxpZGF0ZVN0cmVhayIsImFkanVzdGVkU3RyZWFrIiwicmF0aW9uYWxlIiwiZ2V0QWRqdXN0ZWRTdHJlYWsiLCJzdHJlYWsiLCJ3YXJuaW5nIiwicHJvY2VzcyIsInNhZmVHcm93dGgiLCJjYWxjdWxhdGVTYWZlR3Jvd3RoIiwiZm9yd2FyZERpdmlkZW5kIiwiaXNGaW5pdGUiLCJOYU4iLCJmb3J3YXJkWWllbGQiLCJlbWEiLCJlbWEyMCIsImVtYTUwIiwiZW1hMjAwIiwibWFjZCIsIm1hY2RMaW5lIiwic2lnbmFsTGluZSIsImhpc3RvZ3JhbSIsInJzaSIsInBlcmlvZCIsImVtYVNvdXJjZSIsIm1hY2RTb3VyY2UiLCJyc2lTb3VyY2UiLCJ0aW1lU2VyaWVzIiwiZ2V0VGltZVNlcmllc0RhaWx5IiwiY2xvc2VQcmljZXMiLCJleHRyYWN0Q2xvc2VQcmljZXMiLCJjYWxjdWxhdGVFTUEiLCJpbmRpY2F0b3JzIiwiY2FsY3VsYXRlTUFDRCIsInB1c2giLCJjYWxjdWxhdGVSU0kiLCJqb2luIiwiaGlzdG9yaWNhbFByaWNlcyIsImdldEhpc3RvcmljYWxQcmljZXMiLCJzY29yZXMiLCJjYWxjdWxhdGVEaXZpZGVuZFNjb3JlcyIsInRvdGFsU2NvcmUiLCJjYWxjdWxhdGVUb3RhbFNjb3JlIiwiZW1hQW5hbHlzaXMiLCJhbmFseXplRU1BVHJlbmRzIiwiZnVuZGFtZW50YWxDb25jZXJucyIsInRyZW5kU3RyZW5ndGgiLCJ0b1VwcGVyQ2FzZSIsImZvckVhY2giLCJjb25jZXJuIiwiYW5hbHlzaXMiLCJzYXZlQW5hbHlzaXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/services/DividendAnalysisService.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/services/FallbackDataProvider.js":
/*!*****************************************************************!*\
  !*** ../../packages/core/dist/services/FallbackDataProvider.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FallbackDataProvider: () => (/* binding */ FallbackDataProvider)\n/* harmony export */ });\n/* harmony import */ var _models_StockData_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/StockData.js */ \"(rsc)/../../packages/core/dist/models/StockData.js\");\n/* harmony import */ var _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors/DivvyErrors.js */ \"(rsc)/../../packages/core/dist/errors/DivvyErrors.js\");\n\n\nclass FallbackDataProvider {\n    /**\n     * Provides fallback fundamentals when API data is incomplete\n     */ static createFallbackFundamentals(partialData, ttmDividends, _price) {\n        const fallbackData = {\n            ...partialData\n        };\n        // Estimate missing financial metrics using conservative assumptions\n        if (!fallbackData.OperatingCashFlow && ttmDividends > 0) {\n            // Conservative estimate: Assume dividends are 30% of operating cash flow\n            fallbackData.OperatingCashFlow = {\n                raw: ttmDividends / 0.3\n            };\n        }\n        if (!fallbackData.CapitalExpenditure && fallbackData.OperatingCashFlow) {\n            // Conservative estimate: CapEx is typically 10-20% of OCF\n            fallbackData.CapitalExpenditure = {\n                raw: fallbackData.OperatingCashFlow.raw * 0.15\n            };\n        }\n        if (!fallbackData.CashDividendsPaid && ttmDividends > 0) {\n            fallbackData.CashDividendsPaid = {\n                raw: ttmDividends\n            };\n        }\n        if (!fallbackData.NetIncome && ttmDividends > 0) {\n            // Conservative estimate: Assume 40% payout ratio\n            fallbackData.NetIncome = {\n                raw: ttmDividends / 0.4\n            };\n        }\n        if (!fallbackData.payoutRatio && ttmDividends > 0 && fallbackData.NetIncome) {\n            fallbackData.payoutRatio = {\n                raw: ttmDividends / fallbackData.NetIncome.raw\n            };\n        }\n        return new _models_StockData_js__WEBPACK_IMPORTED_MODULE_0__.Fundamentals(fallbackData);\n    }\n    /**\n     * Estimates missing dividend data points using interpolation\n     */ static fillDividendGaps(annualData) {\n        if (annualData.length < 2) {\n            return annualData;\n        }\n        const sortedData = annualData.sort((a, b)=>a[0] - b[0]);\n        const filledData = [];\n        for(let i = 0; i < sortedData.length - 1; i++){\n            const [currentYear, currentAmount] = sortedData[i];\n            const [nextYear, nextAmount] = sortedData[i + 1];\n            filledData.push([\n                currentYear,\n                currentAmount\n            ]);\n            // Fill gaps between years\n            for(let year = currentYear + 1; year < nextYear; year++){\n                const progress = (year - currentYear) / (nextYear - currentYear);\n                const interpolatedAmount = currentAmount + (nextAmount - currentAmount) * progress;\n                filledData.push([\n                    year,\n                    interpolatedAmount\n                ]);\n            }\n        }\n        // Add the last data point\n        filledData.push(sortedData[sortedData.length - 1]);\n        return filledData;\n    }\n    /**\n     * Provides conservative estimates for key ratios when data is missing\n     */ static getConservativeEstimates() {\n        return {\n            epsPayoutRatio: {\n                value: 0.8,\n                confidence: 'low',\n                source: 'conservative',\n                rationale: 'Conservative assumption when EPS payout data unavailable'\n            },\n            fcfCoverage: {\n                value: 1.2,\n                confidence: 'low',\n                source: 'conservative',\n                rationale: 'Conservative FCF coverage when cash flow data unavailable'\n            },\n            dividendGrowth: {\n                value: 0.0,\n                confidence: 'medium',\n                source: 'conservative',\n                rationale: 'Zero growth assumption when historical data is insufficient'\n            }\n        };\n    }\n    /**\n     * Creates synthetic dividend history for stocks with limited data\n     */ static createSyntheticDividendHistory(knownData, targetYears) {\n        if (knownData.length === 0) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.InsufficientDataError([\n                'dividend history'\n            ]);\n        }\n        if (knownData.length >= targetYears) {\n            return knownData;\n        }\n        const sortedData = knownData.sort((a, b)=>a[0] - b[0]);\n        const [oldestYear, oldestAmount] = sortedData[0];\n        const [newestYear, newestAmount] = sortedData[sortedData.length - 1];\n        // Calculate historical growth rate\n        const years = newestYear - oldestYear;\n        const growthRate = years > 0 ? Math.pow(newestAmount / oldestAmount, 1 / years) - 1 : 0;\n        // Cap growth rate for conservative estimates\n        const conservativeGrowthRate = Math.max(-0.1, Math.min(0.1, growthRate));\n        const syntheticData = [\n            ...sortedData\n        ];\n        // Add historical data points going backwards\n        let currentAmount = oldestAmount;\n        for(let year = oldestYear - 1; year >= newestYear - targetYears; year--){\n            currentAmount = currentAmount / (1 + conservativeGrowthRate);\n            if (currentAmount > 0) {\n                syntheticData.unshift([\n                    year,\n                    currentAmount\n                ]);\n            }\n        }\n        return syntheticData.sort((a, b)=>a[0] - b[0]);\n    }\n    /**\n     * Provides industry-average estimates for missing data\n     */ static getIndustryAverages(sector) {\n        // Default averages (could be enhanced with actual industry data)\n        const defaults = {\n            payoutRatio: 0.6,\n            dividendYield: 0.025,\n            fcfMargin: 0.15\n        };\n        // Sector-specific adjustments (simplified for demo)\n        const sectorAdjustments = {\n            'utilities': {\n                payoutRatio: 0.7,\n                dividendYield: 0.04\n            },\n            'reits': {\n                payoutRatio: 0.9,\n                dividendYield: 0.05\n            },\n            'technology': {\n                payoutRatio: 0.3,\n                dividendYield: 0.015\n            },\n            'financials': {\n                payoutRatio: 0.5,\n                dividendYield: 0.03\n            }\n        };\n        const adjustments = sector ? sectorAdjustments[sector.toLowerCase()] || {} : {};\n        const finalValues = {\n            ...defaults,\n            ...adjustments\n        };\n        return {\n            payoutRatio: {\n                value: finalValues.payoutRatio,\n                confidence: sector ? 'medium' : 'low',\n                source: 'industry_average',\n                rationale: sector ? `Industry average for ${sector} sector` : 'General market average'\n            },\n            dividendYield: {\n                value: finalValues.dividendYield,\n                confidence: sector ? 'medium' : 'low',\n                source: 'industry_average',\n                rationale: sector ? `Industry average for ${sector} sector` : 'General market average'\n            },\n            fcfMargin: {\n                value: finalValues.fcfMargin,\n                confidence: 'low',\n                source: 'industry_average',\n                rationale: 'Estimated free cash flow margin'\n            }\n        };\n    }\n    /**\n     * Validates if we have minimum viable data for analysis\n     */ static validateMinimumData(hasPrice, dividendEventCount, hasAnyFundamentals) {\n        const missing = [];\n        if (!hasPrice) {\n            missing.push('current stock price');\n        }\n        if (dividendEventCount === 0) {\n            missing.push('dividend history');\n        }\n        if (dividendEventCount < 2) {\n            missing.push('sufficient dividend history (minimum 2 years)');\n        }\n        if (missing.length > 0) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_1__.InsufficientDataError(missing);\n        }\n        // Warning for limited fundamentals\n        if (!hasAnyFundamentals) {\n            console.warn('Warning: No fundamental data available. Analysis will use conservative estimates.');\n        }\n    }\n    /**\n     * Creates a data quality report with recommendations\n     */ static assessDataQuality(hasPrice, dividendEventCount, fundamentalFields, totalFundamentalFields) {\n        let score = 0;\n        const recommendations = [];\n        // Price data (20 points)\n        if (hasPrice) {\n            score += 20;\n        } else {\n            recommendations.push('Current price data is required for analysis');\n        }\n        // Dividend history (40 points)\n        if (dividendEventCount >= 10) {\n            score += 40;\n        } else if (dividendEventCount >= 5) {\n            score += 30;\n            recommendations.push('More dividend history would improve analysis accuracy');\n        } else if (dividendEventCount >= 2) {\n            score += 20;\n            recommendations.push('Limited dividend history - analysis may be less reliable');\n        } else {\n            recommendations.push('Insufficient dividend history for reliable analysis');\n        }\n        // Fundamental data (40 points)\n        const fundamentalCompleteness = fundamentalFields / totalFundamentalFields;\n        score += fundamentalCompleteness * 40;\n        if (fundamentalCompleteness < 0.5) {\n            recommendations.push('Missing fundamental data - consider finding additional data sources');\n        } else if (fundamentalCompleteness < 0.8) {\n            recommendations.push('Some fundamental data missing - analysis uses estimates');\n        }\n        // Determine quality level\n        let level;\n        if (score >= 90) level = 'excellent';\n        else if (score >= 70) level = 'good';\n        else if (score >= 50) level = 'fair';\n        else level = 'poor';\n        return {\n            score,\n            level,\n            recommendations\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L3NlcnZpY2VzL0ZhbGxiYWNrRGF0YVByb3ZpZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzRDtBQUNXO0FBQzFELE1BQU1FO0lBQ1Q7O0tBRUMsR0FDRCxPQUFPQywyQkFBMkJDLFdBQVcsRUFBRUMsWUFBWSxFQUFFQyxNQUFNLEVBQUU7UUFDakUsTUFBTUMsZUFBZTtZQUFFLEdBQUdILFdBQVc7UUFBQztRQUN0QyxvRUFBb0U7UUFDcEUsSUFBSSxDQUFDRyxhQUFhQyxpQkFBaUIsSUFBSUgsZUFBZSxHQUFHO1lBQ3JELHlFQUF5RTtZQUN6RUUsYUFBYUMsaUJBQWlCLEdBQUc7Z0JBQUVDLEtBQUtKLGVBQWU7WUFBSTtRQUMvRDtRQUNBLElBQUksQ0FBQ0UsYUFBYUcsa0JBQWtCLElBQUlILGFBQWFDLGlCQUFpQixFQUFFO1lBQ3BFLDBEQUEwRDtZQUMxREQsYUFBYUcsa0JBQWtCLEdBQUc7Z0JBQUVELEtBQUtGLGFBQWFDLGlCQUFpQixDQUFDQyxHQUFHLEdBQUc7WUFBSztRQUN2RjtRQUNBLElBQUksQ0FBQ0YsYUFBYUksaUJBQWlCLElBQUlOLGVBQWUsR0FBRztZQUNyREUsYUFBYUksaUJBQWlCLEdBQUc7Z0JBQUVGLEtBQUtKO1lBQWE7UUFDekQ7UUFDQSxJQUFJLENBQUNFLGFBQWFLLFNBQVMsSUFBSVAsZUFBZSxHQUFHO1lBQzdDLGlEQUFpRDtZQUNqREUsYUFBYUssU0FBUyxHQUFHO2dCQUFFSCxLQUFLSixlQUFlO1lBQUk7UUFDdkQ7UUFDQSxJQUFJLENBQUNFLGFBQWFNLFdBQVcsSUFBSVIsZUFBZSxLQUFLRSxhQUFhSyxTQUFTLEVBQUU7WUFDekVMLGFBQWFNLFdBQVcsR0FBRztnQkFBRUosS0FBS0osZUFBZUUsYUFBYUssU0FBUyxDQUFDSCxHQUFHO1lBQUM7UUFDaEY7UUFDQSxPQUFPLElBQUlULDhEQUFZQSxDQUFDTztJQUM1QjtJQUNBOztLQUVDLEdBQ0QsT0FBT08saUJBQWlCQyxV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Q0FBQztRQUN6QixPQUNLLElBQUlpRCwwQkFBMEIsS0FBSztZQUNwQ0QsZ0JBQWdCaEQsSUFBSSxDQUFDO1FBQ3pCO1FBQ0EsMEJBQTBCO1FBQzFCLElBQUlrRDtRQUNKLElBQUlILFNBQVMsSUFDVEcsUUFBUTthQUNQLElBQUlILFNBQVMsSUFDZEcsUUFBUTthQUNQLElBQUlILFNBQVMsSUFDZEcsUUFBUTthQUVSQSxRQUFRO1FBQ1osT0FBTztZQUFFSDtZQUFPRztZQUFPRjtRQUFnQjtJQUMzQztBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbWFydGluc3Rhcm9zdGEvRGV2ZWxvcG1lbnQvdmliZXMvZGl2eXkvcGFja2FnZXMvY29yZS9kaXN0L3NlcnZpY2VzL0ZhbGxiYWNrRGF0YVByb3ZpZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZ1bmRhbWVudGFscyB9IGZyb20gJy4uL21vZGVscy9TdG9ja0RhdGEuanMnO1xuaW1wb3J0IHsgSW5zdWZmaWNpZW50RGF0YUVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL0RpdnZ5RXJyb3JzLmpzJztcbmV4cG9ydCBjbGFzcyBGYWxsYmFja0RhdGFQcm92aWRlciB7XG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgZmFsbGJhY2sgZnVuZGFtZW50YWxzIHdoZW4gQVBJIGRhdGEgaXMgaW5jb21wbGV0ZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVGYWxsYmFja0Z1bmRhbWVudGFscyhwYXJ0aWFsRGF0YSwgdHRtRGl2aWRlbmRzLCBfcHJpY2UpIHtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tEYXRhID0geyAuLi5wYXJ0aWFsRGF0YSB9O1xuICAgICAgICAvLyBFc3RpbWF0ZSBtaXNzaW5nIGZpbmFuY2lhbCBtZXRyaWNzIHVzaW5nIGNvbnNlcnZhdGl2ZSBhc3N1bXB0aW9uc1xuICAgICAgICBpZiAoIWZhbGxiYWNrRGF0YS5PcGVyYXRpbmdDYXNoRmxvdyAmJiB0dG1EaXZpZGVuZHMgPiAwKSB7XG4gICAgICAgICAgICAvLyBDb25zZXJ2YXRpdmUgZXN0aW1hdGU6IEFzc3VtZSBkaXZpZGVuZHMgYXJlIDMwJSBvZiBvcGVyYXRpbmcgY2FzaCBmbG93XG4gICAgICAgICAgICBmYWxsYmFja0RhdGEuT3BlcmF0aW5nQ2FzaEZsb3cgPSB7IHJhdzogdHRtRGl2aWRlbmRzIC8gMC4zIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmYWxsYmFja0RhdGEuQ2FwaXRhbEV4cGVuZGl0dXJlICYmIGZhbGxiYWNrRGF0YS5PcGVyYXRpbmdDYXNoRmxvdykge1xuICAgICAgICAgICAgLy8gQ29uc2VydmF0aXZlIGVzdGltYXRlOiBDYXBFeCBpcyB0eXBpY2FsbHkgMTAtMjAlIG9mIE9DRlxuICAgICAgICAgICAgZmFsbGJhY2tEYXRhLkNhcGl0YWxFeHBlbmRpdHVyZSA9IHsgcmF3OiBmYWxsYmFja0RhdGEuT3BlcmF0aW5nQ2FzaEZsb3cucmF3ICogMC4xNSB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghZmFsbGJhY2tEYXRhLkNhc2hEaXZpZGVuZHNQYWlkICYmIHR0bURpdmlkZW5kcyA+IDApIHtcbiAgICAgICAgICAgIGZhbGxiYWNrRGF0YS5DYXNoRGl2aWRlbmRzUGFpZCA9IHsgcmF3OiB0dG1EaXZpZGVuZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZhbGxiYWNrRGF0YS5OZXRJbmNvbWUgJiYgdHRtRGl2aWRlbmRzID4gMCkge1xuICAgICAgICAgICAgLy8gQ29uc2VydmF0aXZlIGVzdGltYXRlOiBBc3N1bWUgNDAlIHBheW91dCByYXRpb1xuICAgICAgICAgICAgZmFsbGJhY2tEYXRhLk5ldEluY29tZSA9IHsgcmF3OiB0dG1EaXZpZGVuZHMgLyAwLjQgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZhbGxiYWNrRGF0YS5wYXlvdXRSYXRpbyAmJiB0dG1EaXZpZGVuZHMgPiAwICYmIGZhbGxiYWNrRGF0YS5OZXRJbmNvbWUpIHtcbiAgICAgICAgICAgIGZhbGxiYWNrRGF0YS5wYXlvdXRSYXRpbyA9IHsgcmF3OiB0dG1EaXZpZGVuZHMgLyBmYWxsYmFja0RhdGEuTmV0SW5jb21lLnJhdyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRnVuZGFtZW50YWxzKGZhbGxiYWNrRGF0YSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVzdGltYXRlcyBtaXNzaW5nIGRpdmlkZW5kIGRhdGEgcG9pbnRzIHVzaW5nIGludGVycG9sYXRpb25cbiAgICAgKi9cbiAgICBzdGF0aWMgZmlsbERpdmlkZW5kR2Fwcyhhbm51YWxEYXRhKSB7XG4gICAgICAgIGlmIChhbm51YWxEYXRhLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIHJldHVybiBhbm51YWxEYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNvcnRlZERhdGEgPSBhbm51YWxEYXRhLnNvcnQoKGEsIGIpID0+IGFbMF0gLSBiWzBdKTtcbiAgICAgICAgY29uc3QgZmlsbGVkRGF0YSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZERhdGEubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBbY3VycmVudFllYXIsIGN1cnJlbnRBbW91bnRdID0gc29ydGVkRGF0YVtpXTtcbiAgICAgICAgICAgIGNvbnN0IFtuZXh0WWVhciwgbmV4dEFtb3VudF0gPSBzb3J0ZWREYXRhW2kgKyAxXTtcbiAgICAgICAgICAgIGZpbGxlZERhdGEucHVzaChbY3VycmVudFllYXIsIGN1cnJlbnRBbW91bnRdKTtcbiAgICAgICAgICAgIC8vIEZpbGwgZ2FwcyBiZXR3ZWVuIHllYXJzXG4gICAgICAgICAgICBmb3IgKGxldCB5ZWFyID0gY3VycmVudFllYXIgKyAxOyB5ZWFyIDwgbmV4dFllYXI7IHllYXIrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gKHllYXIgLSBjdXJyZW50WWVhcikgLyAobmV4dFllYXIgLSBjdXJyZW50WWVhcik7XG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJwb2xhdGVkQW1vdW50ID0gY3VycmVudEFtb3VudCArIChuZXh0QW1vdW50IC0gY3VycmVudEFtb3VudCkgKiBwcm9ncmVzcztcbiAgICAgICAgICAgICAgICBmaWxsZWREYXRhLnB1c2goW3llYXIsIGludGVycG9sYXRlZEFtb3VudF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCB0aGUgbGFzdCBkYXRhIHBvaW50XG4gICAgICAgIGZpbGxlZERhdGEucHVzaChzb3J0ZWREYXRhW3NvcnRlZERhdGEubGVuZ3RoIC0gMV0pO1xuICAgICAgICByZXR1cm4gZmlsbGVkRGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgY29uc2VydmF0aXZlIGVzdGltYXRlcyBmb3Iga2V5IHJhdGlvcyB3aGVuIGRhdGEgaXMgbWlzc2luZ1xuICAgICAqL1xuICAgIHN0YXRpYyBnZXRDb25zZXJ2YXRpdmVFc3RpbWF0ZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlcHNQYXlvdXRSYXRpbzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiAwLjgsIC8vIENvbnNlcnZhdGl2ZSA4MCUgcGF5b3V0IHJhdGlvXG4gICAgICAgICAgICAgICAgY29uZmlkZW5jZTogJ2xvdycsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnY29uc2VydmF0aXZlJyxcbiAgICAgICAgICAgICAgICByYXRpb25hbGU6ICdDb25zZXJ2YXRpdmUgYXNzdW1wdGlvbiB3aGVuIEVQUyBwYXlvdXQgZGF0YSB1bmF2YWlsYWJsZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmY2ZDb3ZlcmFnZToge1xuICAgICAgICAgICAgICAgIHZhbHVlOiAxLjIsIC8vIE1pbmltYWwgY292ZXJhZ2VcbiAgICAgICAgICAgICAgICBjb25maWRlbmNlOiAnbG93JyxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdjb25zZXJ2YXRpdmUnLFxuICAgICAgICAgICAgICAgIHJhdGlvbmFsZTogJ0NvbnNlcnZhdGl2ZSBGQ0YgY292ZXJhZ2Ugd2hlbiBjYXNoIGZsb3cgZGF0YSB1bmF2YWlsYWJsZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaXZpZGVuZEdyb3d0aDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiAwLjAsIC8vIE5vIGdyb3d0aCBhc3N1bXB0aW9uXG4gICAgICAgICAgICAgICAgY29uZmlkZW5jZTogJ21lZGl1bScsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnY29uc2VydmF0aXZlJyxcbiAgICAgICAgICAgICAgICByYXRpb25hbGU6ICdaZXJvIGdyb3d0aCBhc3N1bXB0aW9uIHdoZW4gaGlzdG9yaWNhbCBkYXRhIGlzIGluc3VmZmljaWVudCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBzeW50aGV0aWMgZGl2aWRlbmQgaGlzdG9yeSBmb3Igc3RvY2tzIHdpdGggbGltaXRlZCBkYXRhXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXRpY0RpdmlkZW5kSGlzdG9yeShrbm93bkRhdGEsIHRhcmdldFllYXJzKSB7XG4gICAgICAgIGlmIChrbm93bkRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW5zdWZmaWNpZW50RGF0YUVycm9yKFsnZGl2aWRlbmQgaGlzdG9yeSddKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa25vd25EYXRhLmxlbmd0aCA+PSB0YXJnZXRZZWFycykge1xuICAgICAgICAgICAgcmV0dXJuIGtub3duRGF0YTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzb3J0ZWREYXRhID0ga25vd25EYXRhLnNvcnQoKGEsIGIpID0+IGFbMF0gLSBiWzBdKTtcbiAgICAgICAgY29uc3QgW29sZGVzdFllYXIsIG9sZGVzdEFtb3VudF0gPSBzb3J0ZWREYXRhWzBdO1xuICAgICAgICBjb25zdCBbbmV3ZXN0WWVhciwgbmV3ZXN0QW1vdW50XSA9IHNvcnRlZERhdGFbc29ydGVkRGF0YS5sZW5ndGggLSAxXTtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGhpc3RvcmljYWwgZ3Jvd3RoIHJhdGVcbiAgICAgICAgY29uc3QgeWVhcnMgPSBuZXdlc3RZZWFyIC0gb2xkZXN0WWVhcjtcbiAgICAgICAgY29uc3QgZ3Jvd3RoUmF0ZSA9IHllYXJzID4gMCA/IE1hdGgucG93KG5ld2VzdEFtb3VudCAvIG9sZGVzdEFtb3VudCwgMSAvIHllYXJzKSAtIDEgOiAwO1xuICAgICAgICAvLyBDYXAgZ3Jvd3RoIHJhdGUgZm9yIGNvbnNlcnZhdGl2ZSBlc3RpbWF0ZXNcbiAgICAgICAgY29uc3QgY29uc2VydmF0aXZlR3Jvd3RoUmF0ZSA9IE1hdGgubWF4KC0wLjEsIE1hdGgubWluKDAuMSwgZ3Jvd3RoUmF0ZSkpO1xuICAgICAgICBjb25zdCBzeW50aGV0aWNEYXRhID0gWy4uLnNvcnRlZERhdGFdO1xuICAgICAgICAvLyBBZGQgaGlzdG9yaWNhbCBkYXRhIHBvaW50cyBnb2luZyBiYWNrd2FyZHNcbiAgICAgICAgbGV0IGN1cnJlbnRBbW91bnQgPSBvbGRlc3RBbW91bnQ7XG4gICAgICAgIGZvciAobGV0IHllYXIgPSBvbGRlc3RZZWFyIC0gMTsgeWVhciA+PSBuZXdlc3RZZWFyIC0gdGFyZ2V0WWVhcnM7IHllYXItLSkge1xuICAgICAgICAgICAgY3VycmVudEFtb3VudCA9IGN1cnJlbnRBbW91bnQgLyAoMSArIGNvbnNlcnZhdGl2ZUdyb3d0aFJhdGUpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRBbW91bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgc3ludGhldGljRGF0YS51bnNoaWZ0KFt5ZWFyLCBjdXJyZW50QW1vdW50XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN5bnRoZXRpY0RhdGEuc29ydCgoYSwgYikgPT4gYVswXSAtIGJbMF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBpbmR1c3RyeS1hdmVyYWdlIGVzdGltYXRlcyBmb3IgbWlzc2luZyBkYXRhXG4gICAgICovXG4gICAgc3RhdGljIGdldEluZHVzdHJ5QXZlcmFnZXMoc2VjdG9yKSB7XG4gICAgICAgIC8vIERlZmF1bHQgYXZlcmFnZXMgKGNvdWxkIGJlIGVuaGFuY2VkIHdpdGggYWN0dWFsIGluZHVzdHJ5IGRhdGEpXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgcGF5b3V0UmF0aW86IDAuNixcbiAgICAgICAgICAgIGRpdmlkZW5kWWllbGQ6IDAuMDI1LFxuICAgICAgICAgICAgZmNmTWFyZ2luOiAwLjE1XG4gICAgICAgIH07XG4gICAgICAgIC8vIFNlY3Rvci1zcGVjaWZpYyBhZGp1c3RtZW50cyAoc2ltcGxpZmllZCBmb3IgZGVtbylcbiAgICAgICAgY29uc3Qgc2VjdG9yQWRqdXN0bWVudHMgPSB7XG4gICAgICAgICAgICAndXRpbGl0aWVzJzogeyBwYXlvdXRSYXRpbzogMC43LCBkaXZpZGVuZFlpZWxkOiAwLjA0IH0sXG4gICAgICAgICAgICAncmVpdHMnOiB7IHBheW91dFJhdGlvOiAwLjksIGRpdmlkZW5kWWllbGQ6IDAuMDUgfSxcbiAgICAgICAgICAgICd0ZWNobm9sb2d5JzogeyBwYXlvdXRSYXRpbzogMC4zLCBkaXZpZGVuZFlpZWxkOiAwLjAxNSB9LFxuICAgICAgICAgICAgJ2ZpbmFuY2lhbHMnOiB7IHBheW91dFJhdGlvOiAwLjUsIGRpdmlkZW5kWWllbGQ6IDAuMDMgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhZGp1c3RtZW50cyA9IHNlY3RvciA/IHNlY3RvckFkanVzdG1lbnRzW3NlY3Rvci50b0xvd2VyQ2FzZSgpXSB8fCB7fSA6IHt9O1xuICAgICAgICBjb25zdCBmaW5hbFZhbHVlcyA9IHsgLi4uZGVmYXVsdHMsIC4uLmFkanVzdG1lbnRzIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXlvdXRSYXRpbzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBmaW5hbFZhbHVlcy5wYXlvdXRSYXRpbyxcbiAgICAgICAgICAgICAgICBjb25maWRlbmNlOiBzZWN0b3IgPyAnbWVkaXVtJyA6ICdsb3cnLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ2luZHVzdHJ5X2F2ZXJhZ2UnLFxuICAgICAgICAgICAgICAgIHJhdGlvbmFsZTogc2VjdG9yXG4gICAgICAgICAgICAgICAgICAgID8gYEluZHVzdHJ5IGF2ZXJhZ2UgZm9yICR7c2VjdG9yfSBzZWN0b3JgXG4gICAgICAgICAgICAgICAgICAgIDogJ0dlbmVyYWwgbWFya2V0IGF2ZXJhZ2UnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGl2aWRlbmRZaWVsZDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBmaW5hbFZhbHVlcy5kaXZpZGVuZFlpZWxkLFxuICAgICAgICAgICAgICAgIGNvbmZpZGVuY2U6IHNlY3RvciA/ICdtZWRpdW0nIDogJ2xvdycsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnaW5kdXN0cnlfYXZlcmFnZScsXG4gICAgICAgICAgICAgICAgcmF0aW9uYWxlOiBzZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgPyBgSW5kdXN0cnkgYXZlcmFnZSBmb3IgJHtzZWN0b3J9IHNlY3RvcmBcbiAgICAgICAgICAgICAgICAgICAgOiAnR2VuZXJhbCBtYXJrZXQgYXZlcmFnZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmY2ZNYXJnaW46IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmluYWxWYWx1ZXMuZmNmTWFyZ2luLFxuICAgICAgICAgICAgICAgIGNvbmZpZGVuY2U6ICdsb3cnLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ2luZHVzdHJ5X2F2ZXJhZ2UnLFxuICAgICAgICAgICAgICAgIHJhdGlvbmFsZTogJ0VzdGltYXRlZCBmcmVlIGNhc2ggZmxvdyBtYXJnaW4nXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBpZiB3ZSBoYXZlIG1pbmltdW0gdmlhYmxlIGRhdGEgZm9yIGFuYWx5c2lzXG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlTWluaW11bURhdGEoaGFzUHJpY2UsIGRpdmlkZW5kRXZlbnRDb3VudCwgaGFzQW55RnVuZGFtZW50YWxzKSB7XG4gICAgICAgIGNvbnN0IG1pc3NpbmcgPSBbXTtcbiAgICAgICAgaWYgKCFoYXNQcmljZSkge1xuICAgICAgICAgICAgbWlzc2luZy5wdXNoKCdjdXJyZW50IHN0b2NrIHByaWNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpdmlkZW5kRXZlbnRDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgbWlzc2luZy5wdXNoKCdkaXZpZGVuZCBoaXN0b3J5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpdmlkZW5kRXZlbnRDb3VudCA8IDIpIHtcbiAgICAgICAgICAgIG1pc3NpbmcucHVzaCgnc3VmZmljaWVudCBkaXZpZGVuZCBoaXN0b3J5IChtaW5pbXVtIDIgeWVhcnMpJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1pc3NpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEluc3VmZmljaWVudERhdGFFcnJvcihtaXNzaW5nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXYXJuaW5nIGZvciBsaW1pdGVkIGZ1bmRhbWVudGFsc1xuICAgICAgICBpZiAoIWhhc0FueUZ1bmRhbWVudGFscykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdXYXJuaW5nOiBObyBmdW5kYW1lbnRhbCBkYXRhIGF2YWlsYWJsZS4gQW5hbHlzaXMgd2lsbCB1c2UgY29uc2VydmF0aXZlIGVzdGltYXRlcy4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZGF0YSBxdWFsaXR5IHJlcG9ydCB3aXRoIHJlY29tbWVuZGF0aW9uc1xuICAgICAqL1xuICAgIHN0YXRpYyBhc3Nlc3NEYXRhUXVhbGl0eShoYXNQcmljZSwgZGl2aWRlbmRFdmVudENvdW50LCBmdW5kYW1lbnRhbEZpZWxkcywgdG90YWxGdW5kYW1lbnRhbEZpZWxkcykge1xuICAgICAgICBsZXQgc2NvcmUgPSAwO1xuICAgICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBbXTtcbiAgICAgICAgLy8gUHJpY2UgZGF0YSAoMjAgcG9pbnRzKVxuICAgICAgICBpZiAoaGFzUHJpY2UpIHtcbiAgICAgICAgICAgIHNjb3JlICs9IDIwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0N1cnJlbnQgcHJpY2UgZGF0YSBpcyByZXF1aXJlZCBmb3IgYW5hbHlzaXMnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEaXZpZGVuZCBoaXN0b3J5ICg0MCBwb2ludHMpXG4gICAgICAgIGlmIChkaXZpZGVuZEV2ZW50Q291bnQgPj0gMTApIHtcbiAgICAgICAgICAgIHNjb3JlICs9IDQwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpdmlkZW5kRXZlbnRDb3VudCA+PSA1KSB7XG4gICAgICAgICAgICBzY29yZSArPSAzMDtcbiAgICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdNb3JlIGRpdmlkZW5kIGhpc3Rvcnkgd291bGQgaW1wcm92ZSBhbmFseXNpcyBhY2N1cmFjeScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpdmlkZW5kRXZlbnRDb3VudCA+PSAyKSB7XG4gICAgICAgICAgICBzY29yZSArPSAyMDtcbiAgICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdMaW1pdGVkIGRpdmlkZW5kIGhpc3RvcnkgLSBhbmFseXNpcyBtYXkgYmUgbGVzcyByZWxpYWJsZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0luc3VmZmljaWVudCBkaXZpZGVuZCBoaXN0b3J5IGZvciByZWxpYWJsZSBhbmFseXNpcycpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZ1bmRhbWVudGFsIGRhdGEgKDQwIHBvaW50cylcbiAgICAgICAgY29uc3QgZnVuZGFtZW50YWxDb21wbGV0ZW5lc3MgPSBmdW5kYW1lbnRhbEZpZWxkcyAvIHRvdGFsRnVuZGFtZW50YWxGaWVsZHM7XG4gICAgICAgIHNjb3JlICs9IGZ1bmRhbWVudGFsQ29tcGxldGVuZXNzICogNDA7XG4gICAgICAgIGlmIChmdW5kYW1lbnRhbENvbXBsZXRlbmVzcyA8IDAuNSkge1xuICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ01pc3NpbmcgZnVuZGFtZW50YWwgZGF0YSAtIGNvbnNpZGVyIGZpbmRpbmcgYWRkaXRpb25hbCBkYXRhIHNvdXJjZXMnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmdW5kYW1lbnRhbENvbXBsZXRlbmVzcyA8IDAuOCkge1xuICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ1NvbWUgZnVuZGFtZW50YWwgZGF0YSBtaXNzaW5nIC0gYW5hbHlzaXMgdXNlcyBlc3RpbWF0ZXMnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEZXRlcm1pbmUgcXVhbGl0eSBsZXZlbFxuICAgICAgICBsZXQgbGV2ZWw7XG4gICAgICAgIGlmIChzY29yZSA+PSA5MClcbiAgICAgICAgICAgIGxldmVsID0gJ2V4Y2VsbGVudCc7XG4gICAgICAgIGVsc2UgaWYgKHNjb3JlID49IDcwKVxuICAgICAgICAgICAgbGV2ZWwgPSAnZ29vZCc7XG4gICAgICAgIGVsc2UgaWYgKHNjb3JlID49IDUwKVxuICAgICAgICAgICAgbGV2ZWwgPSAnZmFpcic7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxldmVsID0gJ3Bvb3InO1xuICAgICAgICByZXR1cm4geyBzY29yZSwgbGV2ZWwsIHJlY29tbWVuZGF0aW9ucyB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJGdW5kYW1lbnRhbHMiLCJJbnN1ZmZpY2llbnREYXRhRXJyb3IiLCJGYWxsYmFja0RhdGFQcm92aWRlciIsImNyZWF0ZUZhbGxiYWNrRnVuZGFtZW50YWxzIiwicGFydGlhbERhdGEiLCJ0dG1EaXZpZGVuZHMiLCJfcHJpY2UiLCJmYWxsYmFja0RhdGEiLCJPcGVyYXRpbmdDYXNoRmxvdyIsInJhdyIsIkNhcGl0YWxFeHBlbmRpdHVyZSIsIkNhc2hEaXZpZGVuZHNQYWlkIiwiTmV0SW5jb21lIiwicGF5b3V0UmF0aW8iLCJmaWxsRGl2aWRlbmRHYXBzIiwiYW5udWFsRGF0YSIsImxlbmd0aCIsInNvcnRlZERhdGEiLCJzb3J0IiwiYSIsImIiLCJmaWxsZWREYXRhIiwiaSIsImN1cnJlbnRZZWFyIiwiY3VycmVudEFtb3VudCIsIm5leHRZZWFyIiwibmV4dEFtb3VudCIsInB1c2giLCJ5ZWFyIiwicHJvZ3Jlc3MiLCJpbnRlcnBvbGF0ZWRBbW91bnQiLCJnZXRDb25zZXJ2YXRpdmVFc3RpbWF0ZXMiLCJlcHNQYXlvdXRSYXRpbyIsInZhbHVlIiwiY29uZmlkZW5jZSIsInNvdXJjZSIsInJhdGlvbmFsZSIsImZjZkNvdmVyYWdlIiwiZGl2aWRlbmRHcm93dGgiLCJjcmVhdGVTeW50aGV0aWNEaXZpZGVuZEhpc3RvcnkiLCJrbm93bkRhdGEiLCJ0YXJnZXRZZWFycyIsIm9sZGVzdFllYXIiLCJvbGRlc3RBbW91bnQiLCJuZXdlc3RZZWFyIiwibmV3ZXN0QW1vdW50IiwieWVhcnMiLCJncm93dGhSYXRlIiwiTWF0aCIsInBvdyIsImNvbnNlcnZhdGl2ZUdyb3d0aFJhdGUiLCJtYXgiLCJtaW4iLCJzeW50aGV0aWNEYXRhIiwidW5zaGlmdCIsImdldEluZHVzdHJ5QXZlcmFnZXMiLCJzZWN0b3IiLCJkZWZhdWx0cyIsImRpdmlkZW5kWWllbGQiLCJmY2ZNYXJnaW4iLCJzZWN0b3JBZGp1c3RtZW50cyIsImFkanVzdG1lbnRzIiwidG9Mb3dlckNhc2UiLCJmaW5hbFZhbHVlcyIsInZhbGlkYXRlTWluaW11bURhdGEiLCJoYXNQcmljZSIsImRpdmlkZW5kRXZlbnRDb3VudCIsImhhc0FueUZ1bmRhbWVudGFscyIsIm1pc3NpbmciLCJjb25zb2xlIiwid2FybiIsImFzc2Vzc0RhdGFRdWFsaXR5IiwiZnVuZGFtZW50YWxGaWVsZHMiLCJ0b3RhbEZ1bmRhbWVudGFsRmllbGRzIiwic2NvcmUiLCJyZWNvbW1lbmRhdGlvbnMiLCJmdW5kYW1lbnRhbENvbXBsZXRlbmVzcyIsImxldmVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/services/FallbackDataProvider.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/services/YahooFinanceService.js":
/*!****************************************************************!*\
  !*** ../../packages/core/dist/services/YahooFinanceService.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   YahooFinanceService: () => (/* binding */ YahooFinanceService)\n/* harmony export */ });\n/* harmony import */ var yahoo_finance2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! yahoo-finance2 */ \"(rsc)/../../node_modules/yahoo-finance2/dist/esm/src/index-node.js\");\n/* harmony import */ var _models_StockData_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/StockData.js */ \"(rsc)/../../packages/core/dist/models/StockData.js\");\n/* harmony import */ var _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/RetryHandler.js */ \"(rsc)/../../packages/core/dist/utils/RetryHandler.js\");\n/* harmony import */ var _validation_DataQualityChecker_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../validation/DataQualityChecker.js */ \"(rsc)/../../packages/core/dist/validation/DataQualityChecker.js\");\n/* harmony import */ var _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../errors/DivvyErrors.js */ \"(rsc)/../../packages/core/dist/errors/DivvyErrors.js\");\n\n\n\n\n\nclass YahooFinanceService {\n    async getQuote(ticker) {\n        try {\n            const [quote, companyInfo] = await Promise.all([\n                _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.withRetry(async ()=>{\n                    const result = await yahoo_finance2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].quote(ticker);\n                    if (!result) {\n                        throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_4__.TickerNotFoundError(ticker);\n                    }\n                    return result;\n                }, _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.getNetworkRetryConfig()),\n                this.getCompanyInfo(ticker)\n            ]);\n            // Validate the raw quote data first\n            _validation_DataQualityChecker_js__WEBPACK_IMPORTED_MODULE_3__.DataQualityChecker.validateQuote(quote);\n            // Then enhance with company info by creating new Quote with merged data\n            return new _models_StockData_js__WEBPACK_IMPORTED_MODULE_1__.Quote({\n                ...quote,\n                sector: companyInfo.sector || undefined,\n                industry: companyInfo.industry || undefined\n            });\n        } catch (error) {\n            throw this.handleYahooError(error, 'quote', ticker);\n        }\n    }\n    async getCompanyInfo(ticker) {\n        try {\n            const quoteSummary = await _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.withRetry(async ()=>{\n                return await yahoo_finance2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].quoteSummary(ticker, {\n                    modules: [\n                        \"assetProfile\"\n                    ]\n                });\n            }, _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.getDataSourceRetryConfig());\n            const profile = quoteSummary?.assetProfile;\n            return {\n                sector: profile?.sector || null,\n                industry: profile?.industry || null\n            };\n        } catch (error) {\n            console.warn(`Failed to fetch company info for ${ticker}:`, error instanceof Error ? error.message : 'Unknown error');\n            return {\n                sector: null,\n                industry: null\n            };\n        }\n    }\n    async getDividendEvents(ticker, years = 15) {\n        try {\n            const endDate = new Date();\n            const startDate = new Date();\n            startDate.setFullYear(endDate.getFullYear() - years);\n            const chart = await _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.withRetry(async ()=>{\n                return await yahoo_finance2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].chart(ticker, {\n                    period1: startDate,\n                    period2: endDate,\n                    interval: \"1mo\",\n                    events: \"dividends\"\n                });\n            }, _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.getDataSourceRetryConfig());\n            let divs = [];\n            if (chart?.events?.dividends && typeof chart.events.dividends === 'object') {\n                divs = Object.values(chart.events.dividends);\n            } else if (Array.isArray(chart?.events)) {\n                divs = chart.events;\n            }\n            const dividendEvents = (divs || []).map((d)=>new _models_StockData_js__WEBPACK_IMPORTED_MODULE_1__.DividendEvent({\n                    date: d.date || d.dateUTC || d.timestamp || new Date(),\n                    amount: d.amount ?? d.divCash ?? d.value ?? 0\n                }));\n            return _validation_DataQualityChecker_js__WEBPACK_IMPORTED_MODULE_3__.DataQualityChecker.validateDividendEvents(dividendEvents, ticker);\n        } catch (error) {\n            throw this.handleYahooError(error, 'dividends', ticker);\n        }\n    }\n    async getFundamentals(ticker, years = 15) {\n        const endDate = new Date();\n        const startDate = new Date();\n        startDate.setFullYear(endDate.getFullYear() - years);\n        let fundamentals = new _models_StockData_js__WEBPACK_IMPORTED_MODULE_1__.Fundamentals();\n        let hasData = false;\n        // Try fundamentals API first\n        try {\n            const fundamentalsData = await _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.withRetry(async ()=>{\n                return await yahoo_finance2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].fundamentalsTimeSeries(ticker, {\n                    period1: startDate,\n                    period2: endDate,\n                    type: \"annual\",\n                    module: \"all\"\n                });\n            }, _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.getDataSourceRetryConfig());\n            if (fundamentalsData?.timeSeries?.[0]) {\n                fundamentals = new _models_StockData_js__WEBPACK_IMPORTED_MODULE_1__.Fundamentals(fundamentalsData.timeSeries[0]);\n                hasData = true;\n            }\n        } catch (error) {\n            console.warn(\"Fundamentals API failed, trying quoteSummary fallback...\");\n        }\n        // Try quoteSummary as fallback\n        if (!hasData) {\n            try {\n                const quoteSummary = await _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.withRetry(async ()=>{\n                    return await yahoo_finance2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].quoteSummary(ticker, {\n                        modules: [\n                            \"summaryDetail\",\n                            \"defaultKeyStatistics\",\n                            \"financialData\"\n                        ]\n                    });\n                }, _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.getDataSourceRetryConfig());\n                // Extract what data we can from quoteSummary\n                const summaryData = {};\n                const summary = quoteSummary;\n                if (summary?.summaryDetail?.payoutRatio || summary?.defaultKeyStatistics?.payoutRatio) {\n                    summaryData.payoutRatio = summary.summaryDetail?.payoutRatio ?? summary.defaultKeyStatistics?.payoutRatio;\n                }\n                if (Object.keys(summaryData).length > 0) {\n                    fundamentals = new _models_StockData_js__WEBPACK_IMPORTED_MODULE_1__.Fundamentals(summaryData);\n                    hasData = true;\n                }\n            } catch (error) {\n                console.warn(\"QuoteSummary also failed, using fallback data\");\n            }\n        }\n        // Validate data quality\n        const qualityReport = _validation_DataQualityChecker_js__WEBPACK_IMPORTED_MODULE_3__.DataQualityChecker.validateFundamentals(fundamentals);\n        // Log warnings\n        if (qualityReport.warnings.length > 0) {\n            console.warn(`Data quality warnings: ${qualityReport.warnings.join(', ')}`);\n        }\n        return fundamentals;\n    }\n    async getHistoricalPrices(ticker, years = 1) {\n        try {\n            const endDate = new Date();\n            const startDate = new Date();\n            startDate.setFullYear(endDate.getFullYear() - years);\n            const chart = await _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.withRetry(async ()=>{\n                return await yahoo_finance2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].chart(ticker, {\n                    period1: startDate,\n                    period2: endDate,\n                    interval: \"1d\"\n                });\n            }, _utils_RetryHandler_js__WEBPACK_IMPORTED_MODULE_2__.RetryHandler.getDataSourceRetryConfig());\n            if (!chart?.quotes) {\n                return [];\n            }\n            return chart.quotes.filter((q)=>q.close !== null && q.close !== undefined).map((q)=>({\n                    date: q.date,\n                    close: q.close\n                }));\n        } catch (error) {\n            throw this.handleYahooError(error, 'historical prices', ticker);\n        }\n    }\n    handleYahooError(error, operation, ticker) {\n        // Handle specific Yahoo Finance errors\n        if (error?.message?.includes('404') || error?.message?.includes('not found')) {\n            return new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_4__.TickerNotFoundError(ticker);\n        }\n        if (error?.message?.includes('429') || error?.message?.includes('rate limit')) {\n            return new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_4__.RateLimitError(`Yahoo Finance rate limit exceeded for ${operation}`, 60000 // 1 minute retry delay\n            );\n        }\n        if (error?.code === 'ENOTFOUND' || error?.code === 'ECONNREFUSED') {\n            return new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_4__.NetworkError(`Network error accessing Yahoo Finance for ${operation}: ${error.message}`);\n        }\n        if (error?.message?.includes('timeout')) {\n            return new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_4__.NetworkError(`Timeout error accessing Yahoo Finance for ${operation}`);\n        }\n        // If it's already one of our custom errors, pass it through\n        if (error?.code?.startsWith('VALIDATION_') || error?.code?.startsWith('DATA_QUALITY_') || error?.code?.startsWith('INSUFFICIENT_')) {\n            return error;\n        }\n        // Generic data source error\n        return new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_4__.DataSourceError(`Yahoo Finance ${operation} failed: ${error.message}`, 'yahoo', true // Most Yahoo errors are retryable\n        );\n    }\n    // Health check method to test if Yahoo Finance is accessible\n    async healthCheck() {\n        const start = Date.now();\n        try {\n            await yahoo_finance2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].quote('AAPL');\n            return {\n                available: true,\n                latency: Date.now() - start\n            };\n        } catch (error) {\n            return {\n                available: false,\n                latency: Date.now() - start,\n                error: error instanceof Error ? error.message : 'Unknown error'\n            };\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L3NlcnZpY2VzL1lhaG9vRmluYW5jZVNlcnZpY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBDO0FBQ2tDO0FBQ3BCO0FBQ2lCO0FBQ3FDO0FBQ3ZHLE1BQU1VO0lBQ1QsTUFBTUMsU0FBU0MsTUFBTSxFQUFFO1FBQ25CLElBQUk7WUFDQSxNQUFNLENBQUNDLE9BQU9DLFlBQVksR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7Z0JBQzNDWixnRUFBWUEsQ0FBQ2EsU0FBUyxDQUFDO29CQUNuQixNQUFNQyxTQUFTLE1BQU1sQixzREFBWUEsQ0FBQ2EsS0FBSyxDQUFDRDtvQkFDeEMsSUFBSSxDQUFDTSxRQUFRO3dCQUNULE1BQU0sSUFBSVYsdUVBQW1CQSxDQUFDSTtvQkFDbEM7b0JBQ0EsT0FBT007Z0JBQ1gsR0FBR2QsZ0VBQVlBLENBQUNlLHFCQUFxQjtnQkFDckMsSUFBSSxDQUFDQyxjQUFjLENBQUNSO2FBQ3ZCO1lBQ0Qsb0NBQW9DO1lBQ3BDUCxpRkFBa0JBLENBQUNnQixhQUFhLENBQUNSO1lBQ2pDLHdFQUF3RTtZQUN4RSxPQUFPLElBQUlaLHVEQUFLQSxDQUFDO2dCQUNiLEdBQUdZLEtBQUs7Z0JBQ1JTLFFBQVFSLFlBQVlRLE1BQU0sSUFBSUM7Z0JBQzlCQyxVQUFVVixZQUFZVSxRQUFRLElBQUlEO1lBQ3RDO1FBQ0osRUFDQSxPQUFPRSxPQUFPO1lBQ1YsTUFBTSxJQUFJLENBQUNDLGdCQUFnQixDQUFDRCxPQUFPLFNBQVNiO1FBQ2hEO0lBQ0o7SUFDQSxNQUFNUSxlQUFlUixNQUFNLEVBQUU7UUFDekIsSUFBSTtZQUNBLE1BQU1lLGVBQWUsTUFBTXZCLGdFQUFZQSxDQUFDYSxTQUFTLENBQUM7Z0JBQzlDLE9BQU8sTUFBTWpCLHNEQUFZQSxDQUFDMkIsWUFBWSxDQUFDZixRQUFRO29CQUMzQ2dCLFNBQVM7d0JBQUM7cUJBQWU7Z0JBQzdCO1lBQ0osR0FBR3hCLGdFQUFZQSxDQUFDeUIs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QUFTc0QsU0FBUyxZQUFZO1lBQ3JDLE9BQU8sSUFBSW5GLGdFQUFZQSxDQUFDLENBQUMsMENBQTBDLEVBQUVrRixXQUFXO1FBQ3BGO1FBQ0EsNERBQTREO1FBQzVELElBQUkvRCxPQUFPaUUsTUFBTUMsV0FBVyxrQkFDeEJsRSxPQUFPaUUsTUFBTUMsV0FBVyxvQkFDeEJsRSxPQUFPaUUsTUFBTUMsV0FBVyxrQkFBa0I7WUFDMUMsT0FBT2xFO1FBQ1g7UUFDQSw0QkFBNEI7UUFDNUIsT0FBTyxJQUFJbEIsbUVBQWVBLENBQUMsQ0FBQyxjQUFjLEVBQUVpRixVQUFVLFNBQVMsRUFBRS9ELE1BQU1VLE9BQU8sRUFBRSxFQUFFLFNBQVMsS0FBSyxrQ0FBa0M7O0lBRXRJO0lBQ0EsNkRBQTZEO0lBQzdELE1BQU15RCxjQUFjO1FBQ2hCLE1BQU1DLFFBQVF0RCxLQUFLdUQsR0FBRztRQUN0QixJQUFJO1lBQ0EsTUFBTTlGLHNEQUFZQSxDQUFDYSxLQUFLLENBQUM7WUFDekIsT0FBTztnQkFDSGtGLFdBQVc7Z0JBQ1hDLFNBQVN6RCxLQUFLdUQsR0FBRyxLQUFLRDtZQUMxQjtRQUNKLEVBQ0EsT0FBT3BFLE9BQU87WUFDVixPQUFPO2dCQUNIc0UsV0FBVztnQkFDWEMsU0FBU3pELEtBQUt1RCxHQUFHLEtBQUtEO2dCQUN0QnBFLE9BQU9BLGlCQUFpQlMsUUFBUVQsTUFBTVUsT0FBTyxHQUFHO1lBQ3BEO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbWFydGluc3Rhcm9zdGEvRGV2ZWxvcG1lbnQvdmliZXMvZGl2eXkvcGFja2FnZXMvY29yZS9kaXN0L3NlcnZpY2VzL1lhaG9vRmluYW5jZVNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHlhaG9vRmluYW5jZSBmcm9tIFwieWFob28tZmluYW5jZTJcIjtcbmltcG9ydCB7IFF1b3RlLCBEaXZpZGVuZEV2ZW50LCBGdW5kYW1lbnRhbHMgfSBmcm9tIFwiLi4vbW9kZWxzL1N0b2NrRGF0YS5qc1wiO1xuaW1wb3J0IHsgUmV0cnlIYW5kbGVyIH0gZnJvbSBcIi4uL3V0aWxzL1JldHJ5SGFuZGxlci5qc1wiO1xuaW1wb3J0IHsgRGF0YVF1YWxpdHlDaGVja2VyIH0gZnJvbSBcIi4uL3ZhbGlkYXRpb24vRGF0YVF1YWxpdHlDaGVja2VyLmpzXCI7XG5pbXBvcnQgeyBOZXR3b3JrRXJyb3IsIERhdGFTb3VyY2VFcnJvciwgVGlja2VyTm90Rm91bmRFcnJvciwgUmF0ZUxpbWl0RXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzL0RpdnZ5RXJyb3JzLmpzXCI7XG5leHBvcnQgY2xhc3MgWWFob29GaW5hbmNlU2VydmljZSB7XG4gICAgYXN5bmMgZ2V0UXVvdGUodGlja2VyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBbcXVvdGUsIGNvbXBhbnlJbmZvXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICBSZXRyeUhhbmRsZXIud2l0aFJldHJ5KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgeWFob29GaW5hbmNlLnF1b3RlKHRpY2tlcik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVGlja2VyTm90Rm91bmRFcnJvcih0aWNrZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSwgUmV0cnlIYW5kbGVyLmdldE5ldHdvcmtSZXRyeUNvbmZpZygpKSxcbiAgICAgICAgICAgICAgICB0aGlzLmdldENvbXBhbnlJbmZvKHRpY2tlcilcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgLy8gVmFsaWRhdGUgdGhlIHJhdyBxdW90ZSBkYXRhIGZpcnN0XG4gICAgICAgICAgICBEYXRhUXVhbGl0eUNoZWNrZXIudmFsaWRhdGVRdW90ZShxdW90ZSk7XG4gICAgICAgICAgICAvLyBUaGVuIGVuaGFuY2Ugd2l0aCBjb21wYW55IGluZm8gYnkgY3JlYXRpbmcgbmV3IFF1b3RlIHdpdGggbWVyZ2VkIGRhdGFcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVvdGUoe1xuICAgICAgICAgICAgICAgIC4uLnF1b3RlLFxuICAgICAgICAgICAgICAgIHNlY3RvcjogY29tcGFueUluZm8uc2VjdG9yIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBpbmR1c3RyeTogY29tcGFueUluZm8uaW5kdXN0cnkgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlWWFob29FcnJvcihlcnJvciwgJ3F1b3RlJywgdGlja2VyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXRDb21wYW55SW5mbyh0aWNrZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHF1b3RlU3VtbWFyeSA9IGF3YWl0IFJldHJ5SGFuZGxlci53aXRoUmV0cnkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB5YWhvb0ZpbmFuY2UucXVvdGVTdW1tYXJ5KHRpY2tlciwge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVzOiBbXCJhc3NldFByb2ZpbGVcIl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIFJldHJ5SGFuZGxlci5nZXREYXRhU291cmNlUmV0cnlDb25maWcoKSk7XG4gICAgICAgICAgICBjb25zdCBwcm9maWxlID0gcXVvdGVTdW1tYXJ5Py5hc3NldFByb2ZpbGU7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNlY3RvcjogcHJvZmlsZT8uc2VjdG9yIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgaW5kdXN0cnk6IHByb2ZpbGU/LmluZHVzdHJ5IHx8IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBmZXRjaCBjb21wYW55IGluZm8gZm9yICR7dGlja2VyfTpgLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICByZXR1cm4geyBzZWN0b3I6IG51bGwsIGluZHVzdHJ5OiBudWxsIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZ2V0RGl2aWRlbmRFdmVudHModGlja2VyLCB5ZWFycyA9IDE1KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBzdGFydERhdGUuc2V0RnVsbFllYXIoZW5kRGF0ZS5nZXRGdWxsWWVhcigpIC0geWVhcnMpO1xuICAgICAgICAgICAgY29uc3QgY2hhcnQgPSBhd2FpdCBSZXRyeUhhbmRsZXIud2l0aFJldHJ5KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgeWFob29GaW5hbmNlLmNoYXJ0KHRpY2tlciwge1xuICAgICAgICAgICAgICAgICAgICBwZXJpb2QxOiBzdGFydERhdGUsXG4gICAgICAgICAgICAgICAgICAgIHBlcmlvZDI6IGVuZERhdGUsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOiBcIjFtb1wiLFxuICAgICAgICAgICAgICAgICAgICBldmVudHM6IFwiZGl2aWRlbmRzXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIFJldHJ5SGFuZGxlci5nZXREYXRhU291cmNlUmV0cnlDb25maWcoKSk7XG4gICAgICAgICAgICBsZXQgZGl2cyA9IFtdO1xuICAgICAgICAgICAgaWYgKGNoYXJ0Py5ldmVudHM/LmRpdmlkZW5kcyAmJiB0eXBlb2YgY2hhcnQuZXZlbnRzLmRpdmlkZW5kcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBkaXZzID0gT2JqZWN0LnZhbHVlcyhjaGFydC5ldmVudHMuZGl2aWRlbmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2hhcnQ/LmV2ZW50cykpIHtcbiAgICAgICAgICAgICAgICBkaXZzID0gY2hhcnQuZXZlbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGl2aWRlbmRFdmVudHMgPSAoZGl2cyB8fCBbXSlcbiAgICAgICAgICAgICAgICAubWFwKGQgPT4gbmV3IERpdmlkZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIGRhdGU6IGQuZGF0ZSB8fCBkLmRhdGVVVEMgfHwgZC50aW1lc3RhbXAgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICBhbW91bnQ6IGQuYW1vdW50ID8/IGQuZGl2Q2FzaCA/PyBkLnZhbHVlID8/IDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBEYXRhUXVhbGl0eUNoZWNrZXIudmFsaWRhdGVEaXZpZGVuZEV2ZW50cyhkaXZpZGVuZEV2ZW50cywgdGlja2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlWWFob29FcnJvcihlcnJvciwgJ2RpdmlkZW5kcycsIHRpY2tlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZ2V0RnVuZGFtZW50YWxzKHRpY2tlciwgeWVhcnMgPSAxNSkge1xuICAgICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgc3RhcnREYXRlLnNldEZ1bGxZZWFyKGVuZERhdGUuZ2V0RnVsbFllYXIoKSAtIHllYXJzKTtcbiAgICAgICAgbGV0IGZ1bmRhbWVudGFscyA9IG5ldyBGdW5kYW1lbnRhbHMoKTtcbiAgICAgICAgbGV0IGhhc0RhdGEgPSBmYWxzZTtcbiAgICAgICAgLy8gVHJ5IGZ1bmRhbWVudGFscyBBUEkgZmlyc3RcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmRhbWVudGFsc0RhdGEgPSBhd2FpdCBSZXRyeUhhbmRsZXIud2l0aFJldHJ5KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgeWFob29GaW5hbmNlLmZ1bmRhbWVudGFsc1RpbWVTZXJpZXModGlja2VyLCB7XG4gICAgICAgICAgICAgICAgICAgIHBlcmlvZDE6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgcGVyaW9kMjogZW5kRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhbm51YWxcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlOiBcImFsbFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBSZXRyeUhhbmRsZXIuZ2V0RGF0YVNvdXJjZVJldHJ5Q29uZmlnKCkpO1xuICAgICAgICAgICAgaWYgKGZ1bmRhbWVudGFsc0RhdGE/LnRpbWVTZXJpZXM/LlswXSkge1xuICAgICAgICAgICAgICAgIGZ1bmRhbWVudGFscyA9IG5ldyBGdW5kYW1lbnRhbHMoZnVuZGFtZW50YWxzRGF0YS50aW1lU2VyaWVzWzBdKTtcbiAgICAgICAgICAgICAgICBoYXNEYXRhID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZ1bmRhbWVudGFscyBBUEkgZmFpbGVkLCB0cnlpbmcgcXVvdGVTdW1tYXJ5IGZhbGxiYWNrLi4uXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRyeSBxdW90ZVN1bW1hcnkgYXMgZmFsbGJhY2tcbiAgICAgICAgaWYgKCFoYXNEYXRhKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlU3VtbWFyeSA9IGF3YWl0IFJldHJ5SGFuZGxlci53aXRoUmV0cnkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgeWFob29GaW5hbmNlLnF1b3RlU3VtbWFyeSh0aWNrZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZXM6IFtcInN1bW1hcnlEZXRhaWxcIiwgXCJkZWZhdWx0S2V5U3RhdGlzdGljc1wiLCBcImZpbmFuY2lhbERhdGFcIl1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgUmV0cnlIYW5kbGVyLmdldERhdGFTb3VyY2VSZXRyeUNvbmZpZygpKTtcbiAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHdoYXQgZGF0YSB3ZSBjYW4gZnJvbSBxdW90ZVN1bW1hcnlcbiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5RGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1bW1hcnkgPSBxdW90ZVN1bW1hcnk7XG4gICAgICAgICAgICAgICAgaWYgKHN1bW1hcnk/LnN1bW1hcnlEZXRhaWw/LnBheW91dFJhdGlvIHx8IHN1bW1hcnk/LmRlZmF1bHRLZXlTdGF0aXN0aWNzPy5wYXlvdXRSYXRpbykge1xuICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5RGF0YS5wYXlvdXRSYXRpbyA9IHN1bW1hcnkuc3VtbWFyeURldGFpbD8ucGF5b3V0UmF0aW8gPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnkuZGVmYXVsdEtleVN0YXRpc3RpY3M/LnBheW91dFJhdGlvO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3VtbWFyeURhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuZGFtZW50YWxzID0gbmV3IEZ1bmRhbWVudGFscyhzdW1tYXJ5RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGhhc0RhdGEgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlF1b3RlU3VtbWFyeSBhbHNvIGZhaWxlZCwgdXNpbmcgZmFsbGJhY2sgZGF0YVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSBkYXRhIHF1YWxpdHlcbiAgICAgICAgY29uc3QgcXVhbGl0eVJlcG9ydCA9IERhdGFRdWFsaXR5Q2hlY2tlci52YWxpZGF0ZUZ1bmRhbWVudGFscyhmdW5kYW1lbnRhbHMpO1xuICAgICAgICAvLyBMb2cgd2FybmluZ3NcbiAgICAgICAgaWYgKHF1YWxpdHlSZXBvcnQud2FybmluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBEYXRhIHF1YWxpdHkgd2FybmluZ3M6ICR7cXVhbGl0eVJlcG9ydC53YXJuaW5ncy5qb2luKCcsICcpfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5kYW1lbnRhbHM7XG4gICAgfVxuICAgIGFzeW5jIGdldEhpc3RvcmljYWxQcmljZXModGlja2VyLCB5ZWFycyA9IDEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHN0YXJ0RGF0ZS5zZXRGdWxsWWVhcihlbmREYXRlLmdldEZ1bGxZZWFyKCkgLSB5ZWFycyk7XG4gICAgICAgICAgICBjb25zdCBjaGFydCA9IGF3YWl0IFJldHJ5SGFuZGxlci53aXRoUmV0cnkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB5YWhvb0ZpbmFuY2UuY2hhcnQodGlja2VyLCB7XG4gICAgICAgICAgICAgICAgICAgIHBlcmlvZDE6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgcGVyaW9kMjogZW5kRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWw6IFwiMWRcIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIFJldHJ5SGFuZGxlci5nZXREYXRhU291cmNlUmV0cnlDb25maWcoKSk7XG4gICAgICAgICAgICBpZiAoIWNoYXJ0Py5xdW90ZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hhcnQucXVvdGVzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihxID0+IHEuY2xvc2UgIT09IG51bGwgJiYgcS5jbG9zZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIC5tYXAocSA9PiAoeyBkYXRlOiBxLmRhdGUsIGNsb3NlOiBxLmNsb3NlIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlWWFob29FcnJvcihlcnJvciwgJ2hpc3RvcmljYWwgcHJpY2VzJywgdGlja2VyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVZYWhvb0Vycm9yKGVycm9yLCBvcGVyYXRpb24sIHRpY2tlcikge1xuICAgICAgICAvLyBIYW5kbGUgc3BlY2lmaWMgWWFob28gRmluYW5jZSBlcnJvcnNcbiAgICAgICAgaWYgKGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnNDA0JykgfHwgZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKCdub3QgZm91bmQnKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaWNrZXJOb3RGb3VuZEVycm9yKHRpY2tlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnNDI5JykgfHwgZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKCdyYXRlIGxpbWl0JykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmF0ZUxpbWl0RXJyb3IoYFlhaG9vIEZpbmFuY2UgcmF0ZSBsaW1pdCBleGNlZWRlZCBmb3IgJHtvcGVyYXRpb259YCwgNjAwMDAgLy8gMSBtaW51dGUgcmV0cnkgZGVsYXlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yPy5jb2RlID09PSAnRU5PVEZPVU5EJyB8fCBlcnJvcj8uY29kZSA9PT0gJ0VDT05OUkVGVVNFRCcpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTmV0d29ya0Vycm9yKGBOZXR3b3JrIGVycm9yIGFjY2Vzc2luZyBZYWhvbyBGaW5hbmNlIGZvciAke29wZXJhdGlvbn06ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKCd0aW1lb3V0JykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTmV0d29ya0Vycm9yKGBUaW1lb3V0IGVycm9yIGFjY2Vzc2luZyBZYWhvbyBGaW5hbmNlIGZvciAke29wZXJhdGlvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBpdCdzIGFscmVhZHkgb25lIG9mIG91ciBjdXN0b20gZXJyb3JzLCBwYXNzIGl0IHRocm91Z2hcbiAgICAgICAgaWYgKGVycm9yPy5jb2RlPy5zdGFydHNXaXRoKCdWQUxJREFUSU9OXycpIHx8XG4gICAgICAgICAgICBlcnJvcj8uY29kZT8uc3RhcnRzV2l0aCgnREFUQV9RVUFMSVRZXycpIHx8XG4gICAgICAgICAgICBlcnJvcj8uY29kZT8uc3RhcnRzV2l0aCgnSU5TVUZGSUNJRU5UXycpKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2VuZXJpYyBkYXRhIHNvdXJjZSBlcnJvclxuICAgICAgICByZXR1cm4gbmV3IERhdGFTb3VyY2VFcnJvcihgWWFob28gRmluYW5jZSAke29wZXJhdGlvbn0gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ3lhaG9vJywgdHJ1ZSAvLyBNb3N0IFlhaG9vIGVycm9ycyBhcmUgcmV0cnlhYmxlXG4gICAgICAgICk7XG4gICAgfVxuICAgIC8vIEhlYWx0aCBjaGVjayBtZXRob2QgdG8gdGVzdCBpZiBZYWhvbyBGaW5hbmNlIGlzIGFjY2Vzc2libGVcbiAgICBhc3luYyBoZWFsdGhDaGVjaygpIHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgeWFob29GaW5hbmNlLnF1b3RlKCdBQVBMJyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGF2YWlsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXRlbmN5OiBEYXRlLm5vdygpIC0gc3RhcnRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGF2YWlsYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbGF0ZW5jeTogRGF0ZS5ub3coKSAtIHN0YXJ0LFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJ5YWhvb0ZpbmFuY2UiLCJRdW90ZSIsIkRpdmlkZW5kRXZlbnQiLCJGdW5kYW1lbnRhbHMiLCJSZXRyeUhhbmRsZXIiLCJEYXRhUXVhbGl0eUNoZWNrZXIiLCJOZXR3b3JrRXJyb3IiLCJEYXRhU291cmNlRXJyb3IiLCJUaWNrZXJOb3RGb3VuZEVycm9yIiwiUmF0ZUxpbWl0RXJyb3IiLCJZYWhvb0ZpbmFuY2VTZXJ2aWNlIiwiZ2V0UXVvdGUiLCJ0aWNrZXIiLCJxdW90ZSIsImNvbXBhbnlJbmZvIiwiUHJvbWlzZSIsImFsbCIsIndpdGhSZXRyeSIsInJlc3VsdCIsImdldE5ldHdvcmtSZXRyeUNvbmZpZyIsImdldENvbXBhbnlJbmZvIiwidmFsaWRhdGVRdW90ZSIsInNlY3RvciIsInVuZGVmaW5lZCIsImluZHVzdHJ5IiwiZXJyb3IiLCJoYW5kbGVZYWhvb0Vycm9yIiwicXVvdGVTdW1tYXJ5IiwibW9kdWxlcyIsImdldERhdGFTb3VyY2VSZXRyeUNvbmZpZyIsInByb2ZpbGUiLCJhc3NldFByb2ZpbGUiLCJjb25zb2xlIiwid2FybiIsIkVycm9yIiwibWVzc2FnZSIsImdldERpdmlkZW5kRXZlbnRzIiwieWVhcnMiLCJlbmREYXRlIiwiRGF0ZSIsInN0YXJ0RGF0ZSIsInNldEZ1bGxZZWFyIiwiZ2V0RnVsbFllYXIiLCJjaGFydCIsInBlcmlvZDEiLCJwZXJpb2QyIiwiaW50ZXJ2YWwiLCJldmVudHMiLCJkaXZzIiwiZGl2aWRlbmRzIiwiT2JqZWN0IiwidmFsdWVzIiwiQXJyYXkiLCJpc0FycmF5IiwiZGl2aWRlbmRFdmVudHMiLCJtYXAiLCJkIiwiZGF0ZSIsImRhdGVVVEMiLCJ0aW1lc3RhbXAiLCJhbW91bnQiLCJkaXZDYXNoIiwidmFsdWUiLCJ2YWxpZGF0ZURpdmlkZW5kRXZlbnRzIiwiZ2V0RnVuZGFtZW50YWxzIiwiZnVuZGFtZW50YWxzIiwiaGFzRGF0YSIsImZ1bmRhbWVudGFsc0RhdGEiLCJmdW5kYW1lbnRhbHNUaW1lU2VyaWVzIiwidHlwZSIsIm1vZHVsZSIsInRpbWVTZXJpZXMiLCJzdW1tYXJ5RGF0YSIsInN1bW1hcnkiLCJzdW1tYXJ5RGV0YWlsIiwicGF5b3V0UmF0aW8iLCJkZWZhdWx0S2V5U3RhdGlzdGljcyIsImtleXMiLCJsZW5ndGgiLCJxdWFsaXR5UmVwb3J0IiwidmFsaWRhdGVGdW5kYW1lbnRhbHMiLCJ3YXJuaW5ncyIsImpvaW4iLCJnZXRIaXN0b3JpY2FsUHJpY2VzIiwicXVvdGVzIiwiZmlsdGVyIiwicSIsImNsb3NlIiwib3BlcmF0aW9uIiwiaW5jbHVkZXMiLCJjb2RlIiwic3RhcnRzV2l0aCIsImhlYWx0aENoZWNrIiwic3RhcnQiLCJub3ciLCJhdmFpbGFibGUiLCJsYXRlbmN5Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/services/YahooFinanceService.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/supabase/supabaseClient.js":
/*!***********************************************************!*\
  !*** ../../packages/core/dist/supabase/supabaseClient.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/../../node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv */ \"(rsc)/../../node_modules/dotenv/lib/main.js\");\n\n\n// Load environment variables\n(0,dotenv__WEBPACK_IMPORTED_MODULE_0__.config)();\nconst supabaseUrl = process.env.SUPABASE_URL;\nconst supabaseAnonKey = process.env.SUPABASE_ANON_KEY;\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error('Missing Supabase environment variables. Check your .env file contains SUPABASE_URL and SUPABASE_ANON_KEY');\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseAnonKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L3N1cGFiYXNlL3N1cGFiYXNlQ2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRDtBQUNyQjtBQUNoQyw2QkFBNkI7QUFDN0JDLDhDQUFNQTtBQUNOLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWTtBQUM1QyxNQUFNQyxrQkFBa0JILFFBQVFDLEdBQUcsQ0FBQ0csaUJBQWlCO0FBQ3JELElBQUksQ0FBQ0wsZUFBZSxDQUFDSSxpQkFBaUI7SUFDbEMsTUFBTSxJQUFJRSxNQUFNO0FBQ3BCO0FBQ08sTUFBTUMsV0FBV1QsbUVBQVlBLENBQUNFLGFBQWFJLGlCQUFpQiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcnRpbnN0YXJvc3RhL0RldmVsb3BtZW50L3ZpYmVzL2Rpdnl5L3BhY2thZ2VzL2NvcmUvZGlzdC9zdXBhYmFzZS9zdXBhYmFzZUNsaWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnZG90ZW52Jztcbi8vIExvYWQgZW52aXJvbm1lbnQgdmFyaWFibGVzXG5jb25maWcoKTtcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMO1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfQU5PTl9LRVk7XG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzLiBDaGVjayB5b3VyIC5lbnYgZmlsZSBjb250YWlucyBTVVBBQkFTRV9VUkwgYW5kIFNVUEFCQVNFX0FOT05fS0VZJyk7XG59XG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiY29uZmlnIiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiU1VQQUJBU0VfQU5PTl9LRVkiLCJFcnJvciIsInN1cGFiYXNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/supabase/supabaseClient.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/utils/MathUtils.js":
/*!***************************************************!*\
  !*** ../../packages/core/dist/utils/MathUtils.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateCAGR: () => (/* binding */ calculateCAGR),\n/* harmony export */   clamp: () => (/* binding */ clamp),\n/* harmony export */   isValidNumber: () => (/* binding */ isValidNumber),\n/* harmony export */   sum: () => (/* binding */ sum)\n/* harmony export */ });\nconst clamp = (x, lo, hi)=>Math.min(hi, Math.max(lo, x));\nconst sum = (arr)=>arr.reduce((a, b)=>a + (b || 0), 0);\nconst isValidNumber = (value)=>value != null && isFinite(value);\nconst calculateCAGR = (series)=>{\n    const vals = series.filter(([, v])=>v > 0);\n    if (vals.length < 2) return null;\n    const first = vals[0];\n    const last = vals[vals.length - 1];\n    const years = last[0] - first[0] || 1;\n    if (years < 2 || first[1] <= 0) return null;\n    return Math.pow(last[1] / first[1], 1 / years) - 1;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L3V0aWxzL01hdGhVdGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQU8sTUFBTUEsUUFBUSxDQUFDQyxHQUFHQyxJQUFJQyxLQUFPQyxLQUFLQyxHQUFHLENBQUNGLElBQUlDLEtBQUtFLEdBQUcsQ0FBQ0osSUFBSUQsSUFBSTtBQUMzRCxNQUFNTSxNQUFNLENBQUNDLE1BQVFBLElBQUlDLE1BQU0sQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxJQUFLQyxDQUFBQSxLQUFLLElBQUksR0FBRztBQUMzRCxNQUFNQyxnQkFBZ0IsQ0FBQ0MsUUFBVUEsU0FBUyxRQUFRQyxTQUFTRCxPQUFPO0FBQ2xFLE1BQU1FLGdCQUFnQixDQUFDQztJQUMxQixNQUFNQyxPQUFPRCxPQUFPRSxNQUFNLENBQUMsQ0FBQyxHQUFHQyxFQUFFLEdBQUtBLElBQUk7SUFDMUMsSUFBSUYsS0FBS0csTUFBTSxHQUFHLEdBQ2QsT0FBTztJQUNYLE1BQU1DLFFBQVFKLElBQUksQ0FBQyxFQUFFO0lBQ3JCLE1BQU1LLE9BQU9MLElBQUksQ0FBQ0EsS0FBS0csTUFBTSxHQUFHLEVBQUU7SUFDbEMsTUFBTUcsUUFBUUQsSUFBSSxDQUFDLEVBQUUsR0FBR0QsS0FBSyxDQUFDLEVBQUUsSUFBSTtJQUNwQyxJQUFJRSxRQUFRLEtBQUtGLEtBQUssQ0FBQyxFQUFFLElBQUksR0FDekIsT0FBTztJQUNYLE9BQU9qQixLQUFLb0IsR0FBRyxDQUFDRixJQUFJLENBQUMsRUFBRSxHQUFHRCxLQUFLLENBQUMsRUFBRSxFQUFFLElBQUlFLFNBQVM7QUFDckQsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL21hcnRpbnN0YXJvc3RhL0RldmVsb3BtZW50L3ZpYmVzL2Rpdnl5L3BhY2thZ2VzL2NvcmUvZGlzdC91dGlscy9NYXRoVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNsYW1wID0gKHgsIGxvLCBoaSkgPT4gTWF0aC5taW4oaGksIE1hdGgubWF4KGxvLCB4KSk7XG5leHBvcnQgY29uc3Qgc3VtID0gKGFycikgPT4gYXJyLnJlZHVjZSgoYSwgYikgPT4gYSArIChiIHx8IDApLCAwKTtcbmV4cG9ydCBjb25zdCBpc1ZhbGlkTnVtYmVyID0gKHZhbHVlKSA9PiB2YWx1ZSAhPSBudWxsICYmIGlzRmluaXRlKHZhbHVlKTtcbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVDQUdSID0gKHNlcmllcykgPT4ge1xuICAgIGNvbnN0IHZhbHMgPSBzZXJpZXMuZmlsdGVyKChbLCB2XSkgPT4gdiA+IDApO1xuICAgIGlmICh2YWxzLmxlbmd0aCA8IDIpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGZpcnN0ID0gdmFsc1swXTtcbiAgICBjb25zdCBsYXN0ID0gdmFsc1t2YWxzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IHllYXJzID0gbGFzdFswXSAtIGZpcnN0WzBdIHx8IDE7XG4gICAgaWYgKHllYXJzIDwgMiB8fCBmaXJzdFsxXSA8PSAwKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gTWF0aC5wb3cobGFzdFsxXSAvIGZpcnN0WzFdLCAxIC8geWVhcnMpIC0gMTtcbn07XG4iXSwibmFtZXMiOlsiY2xhbXAiLCJ4IiwibG8iLCJoaSIsIk1hdGgiLCJtaW4iLCJtYXgiLCJzdW0iLCJhcnIiLCJyZWR1Y2UiLCJhIiwiYiIsImlzVmFsaWROdW1iZXIiLCJ2YWx1ZSIsImlzRmluaXRlIiwiY2FsY3VsYXRlQ0FHUiIsInNlcmllcyIsInZhbHMiLCJmaWx0ZXIiLCJ2IiwibGVuZ3RoIiwiZmlyc3QiLCJsYXN0IiwieWVhcnMiLCJwb3ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/utils/MathUtils.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/utils/RetryHandler.js":
/*!******************************************************!*\
  !*** ../../packages/core/dist/utils/RetryHandler.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RetryHandler: () => (/* binding */ RetryHandler)\n/* harmony export */ });\n/* harmony import */ var _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/DivvyErrors.js */ \"(rsc)/../../packages/core/dist/errors/DivvyErrors.js\");\n\nclass RetryHandler {\n    static{\n        this.DEFAULT_CONFIG = {\n            maxAttempts: 3,\n            baseDelayMs: 1000,\n            maxDelayMs: 30000,\n            backoffMultiplier: 2,\n            retryableErrors: [\n                'NETWORK_ERROR',\n                'DATA_SOURCE_YAHOO',\n                'RATE_LIMIT'\n            ],\n            jitterFactor: 0.1\n        };\n    }\n    static async withRetry(operation, config = {}) {\n        const finalConfig = {\n            ...this.DEFAULT_CONFIG,\n            ...config\n        };\n        const result = await this.executeWithRetry(operation, finalConfig);\n        if (result.success && result.result !== undefined) {\n            return result.result;\n        }\n        throw result.error || new Error('Retry operation failed');\n    }\n    static async executeWithRetry(operation, config) {\n        let lastError;\n        let totalDelay = 0;\n        for(let attempt = 1; attempt <= config.maxAttempts; attempt++){\n            try {\n                const result = await operation();\n                return {\n                    success: true,\n                    result,\n                    error: undefined,\n                    attempts: attempt,\n                    totalDelayMs: totalDelay\n                };\n            } catch (error) {\n                lastError = error;\n                // Check if error is retryable\n                if (!this.isRetryableError(lastError, config.retryableErrors)) {\n                    return {\n                        success: false,\n                        error: lastError,\n                        attempts: attempt,\n                        totalDelayMs: totalDelay\n                    };\n                }\n                // Don't delay on the last attempt\n                if (attempt < config.maxAttempts) {\n                    const delay = this.calculateDelay(attempt, config);\n                    totalDelay += delay;\n                    // Log retry attempt (in production, use proper logger)\n                    console.warn(`Retry attempt ${attempt}/${config.maxAttempts} after ${delay}ms. Error: ${lastError.message}`);\n                    await this.sleep(delay);\n                }\n            }\n        }\n        return {\n            success: false,\n            error: lastError,\n            attempts: config.maxAttempts,\n            totalDelayMs: totalDelay\n        };\n    }\n    static isRetryableError(error, retryableErrors) {\n        // Check if error is marked as retryable\n        if ('isRetryable' in error && error.isRetryable === true) {\n            return true;\n        }\n        // Check error code\n        if ('code' in error && typeof error.code === 'string') {\n            return retryableErrors.includes(error.code);\n        }\n        // Check error type\n        if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.NetworkError || error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.RateLimitError || error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.DataSourceError) {\n            return error.isRetryable;\n        }\n        // Check common network error patterns\n        const networkErrorPatterns = [\n            /ENOTFOUND/,\n            /ECONNRESET/,\n            /ETIMEDOUT/,\n            /ECONNREFUSED/,\n            /socket hang up/i,\n            /network timeout/i,\n            /rate limit/i,\n            /429/\n        ];\n        return networkErrorPatterns.some((pattern)=>pattern.test(error.message) || pattern.test(error.name));\n    }\n    static calculateDelay(attempt, config) {\n        // Exponential backoff with jitter\n        const baseDelay = config.baseDelayMs * Math.pow(config.backoffMultiplier, attempt - 1);\n        const jitter = baseDelay * config.jitterFactor * Math.random();\n        const delayWithJitter = baseDelay + jitter;\n        return Math.min(delayWithJitter, config.maxDelayMs);\n    }\n    static sleep(ms) {\n        return new Promise((resolve)=>setTimeout(resolve, ms));\n    }\n    // Specific retry configurations for different operations\n    static getNetworkRetryConfig() {\n        return {\n            maxAttempts: 3,\n            baseDelayMs: 2000,\n            maxDelayMs: 10000,\n            retryableErrors: [\n                'NETWORK_ERROR',\n                'RATE_LIMIT'\n            ]\n        };\n    }\n    static getDataSourceRetryConfig() {\n        return {\n            maxAttempts: 2,\n            baseDelayMs: 1500,\n            maxDelayMs: 5000,\n            retryableErrors: [\n                'DATA_SOURCE_YAHOO',\n                'NETWORK_ERROR'\n            ]\n        };\n    }\n    static getRateLimitRetryConfig() {\n        return {\n            maxAttempts: 5,\n            baseDelayMs: 5000,\n            maxDelayMs: 60000,\n            backoffMultiplier: 1.5,\n            retryableErrors: [\n                'RATE_LIMIT'\n            ]\n        };\n    }\n    // Circuit breaker pattern for failing services\n    static createCircuitBreaker(operation, failureThreshold = 5, recoveryTimeMs = 60000) {\n        let failures = 0;\n        let lastFailureTime = 0;\n        let isOpen = false;\n        return async ()=>{\n            const now = Date.now();\n            // Check if circuit should be reset\n            if (isOpen && now - lastFailureTime > recoveryTimeMs) {\n                isOpen = false;\n                failures = 0;\n            }\n            // If circuit is open, fail fast\n            if (isOpen) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.DataSourceError('Circuit breaker is open - service temporarily unavailable', 'CIRCUIT_BREAKER');\n            }\n            try {\n                const result = await operation();\n                // Reset failure count on success\n                failures = 0;\n                return result;\n            } catch (error) {\n                failures++;\n                lastFailureTime = now;\n                // Open circuit if threshold reached\n                if (failures >= failureThreshold) {\n                    isOpen = true;\n                }\n                throw error;\n            }\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L3V0aWxzL1JldHJ5SGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5RjtBQUNsRixNQUFNRzs7YUFDRkMsaUJBQWlCO1lBQ3BCQyxhQUFhO1lBQ2JDLGFBQWE7WUFDYkMsWUFBWTtZQUNaQyxtQkFBbUI7WUFDbkJDLGlCQUFpQjtnQkFBQztnQkFBaUI7Z0JBQXFCO2FBQWE7WUFDckVDLGNBQWM7UUFDbEI7O0lBQ0EsYUFBYUMsVUFBVUMsU0FBUyxFQUFFQyxTQUFTLENBQUMsQ0FBQyxFQUFFO1FBQzNDLE1BQU1DLGNBQWM7WUFBRSxHQUFHLElBQUksQ0FBQ1YsY0FBYztZQUFFLEdBQUdTLE1BQU07UUFBQztRQUN4RCxNQUFNRSxTQUFTLE1BQU0sSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQ0osV0FBV0U7UUFDdEQsSUFBSUMsT0FBT0UsT0FBTyxJQUFJRixPQUFPQSxNQUFNLEtBQUtHLFdBQVc7WUFDL0MsT0FBT0gsT0FBT0EsTUFBTTtRQUN4QjtRQUNBLE1BQU1BLE9BQU9JLEtBQUssSUFBSSxJQUFJQyxNQUFNO0lBQ3BDO0lBQ0EsYUFBYUosaUJBQWlCSixTQUFTLEVBQUVDLE1BQU0sRUFBRTtRQUM3QyxJQUFJUTtRQUNKLElBQUlDLGFBQWE7UUFDakIsSUFBSyxJQUFJQyxVQUFVLEdBQUdBLFdBQVdWLE9BQU9SLFdBQVcsRUFBRWtCLFVBQVc7WUFDNUQsSUFBSTtnQkFDQSxNQUFNUixTQUFTLE1BQU1IO2dCQUNyQixPQUFPO29CQUNISyxTQUFTO29CQUNURjtvQkFDQUksT0FBT0Q7b0JBQ1BNLFVBQVVEO29CQUNWRSxjQUFjSDtnQkFDbEI7WUFDSixFQUNBLE9BQU9ILE9BQU87Z0JBQ1ZFLFlBQVlGO2dCQUNaLDhCQUE4QjtnQkFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQ08sZ0JBQWdCLENBQUNMLFdBQVdSLE9BQU9KLGVBQWUsR0FBRztvQkFDM0QsT0FBTzt3QkFDSFEsU0FBUzt3QkFDVEUsT0FBT0U7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LEdBQUc7WUFDcEIsbUNBQW1DO1lBQ25DLElBQUlELFVBQVVDLE1BQU1GLGtCQUFrQkYsZ0JBQWdCO2dCQUNsREcsU0FBUztnQkFDVEYsV0FBVztZQUNmO1lBQ0EsZ0NBQWdDO1lBQ2hDLElBQUlFLFFBQVE7Z0JBQ1IsTUFBTSxJQUFJMUQsbUVBQWVBLENBQUMsNkRBQTZEO1lBQzNGO1lBQ0EsSUFBSTtnQkFDQSxNQUFNYSxTQUFTLE1BQU1IO2dCQUNyQixpQ0FBaUM7Z0JBQ2pDOEMsV0FBVztnQkFDWCxPQUFPM0M7WUFDWCxFQUNBLE9BQU9JLE9BQU87Z0JBQ1Z1QztnQkFDQUMsa0JBQWtCRTtnQkFDbEIsb0NBQW9DO2dCQUNwQyxJQUFJSCxZQUFZRixrQkFBa0I7b0JBQzlCSSxTQUFTO2dCQUNiO2dCQUNBLE1BQU16QztZQUNWO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbWFydGluc3Rhcm9zdGEvRGV2ZWxvcG1lbnQvdmliZXMvZGl2eXkvcGFja2FnZXMvY29yZS9kaXN0L3V0aWxzL1JldHJ5SGFuZGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXR3b3JrRXJyb3IsIFJhdGVMaW1pdEVycm9yLCBEYXRhU291cmNlRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvRGl2dnlFcnJvcnMuanMnO1xuZXhwb3J0IGNsYXNzIFJldHJ5SGFuZGxlciB7XG4gICAgc3RhdGljIERFRkFVTFRfQ09ORklHID0ge1xuICAgICAgICBtYXhBdHRlbXB0czogMyxcbiAgICAgICAgYmFzZURlbGF5TXM6IDEwMDAsXG4gICAgICAgIG1heERlbGF5TXM6IDMwMDAwLFxuICAgICAgICBiYWNrb2ZmTXVsdGlwbGllcjogMixcbiAgICAgICAgcmV0cnlhYmxlRXJyb3JzOiBbJ05FVFdPUktfRVJST1InLCAnREFUQV9TT1VSQ0VfWUFIT08nLCAnUkFURV9MSU1JVCddLFxuICAgICAgICBqaXR0ZXJGYWN0b3I6IDAuMVxuICAgIH07XG4gICAgc3RhdGljIGFzeW5jIHdpdGhSZXRyeShvcGVyYXRpb24sIGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGZpbmFsQ29uZmlnID0geyAuLi50aGlzLkRFRkFVTFRfQ09ORklHLCAuLi5jb25maWcgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlV2l0aFJldHJ5KG9wZXJhdGlvbiwgZmluYWxDb25maWcpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LnJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3IgfHwgbmV3IEVycm9yKCdSZXRyeSBvcGVyYXRpb24gZmFpbGVkJyk7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBleGVjdXRlV2l0aFJldHJ5KG9wZXJhdGlvbiwgY29uZmlnKSB7XG4gICAgICAgIGxldCBsYXN0RXJyb3I7XG4gICAgICAgIGxldCB0b3RhbERlbGF5ID0gMDtcbiAgICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gY29uZmlnLm1heEF0dGVtcHRzOyBhdHRlbXB0KyspIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBhdHRlbXB0czogYXR0ZW1wdCxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEZWxheU1zOiB0b3RhbERlbGF5XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGxhc3RFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGVycm9yIGlzIHJldHJ5YWJsZVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1JldHJ5YWJsZUVycm9yKGxhc3RFcnJvciwgY29uZmlnLnJldHJ5YWJsZUVycm9ycykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGxhc3RFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVtcHRzOiBhdHRlbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxEZWxheU1zOiB0b3RhbERlbGF5XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERvbid0IGRlbGF5IG9uIHRoZSBsYXN0IGF0dGVtcHRcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA8IGNvbmZpZy5tYXhBdHRlbXB0cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxheSA9IHRoaXMuY2FsY3VsYXRlRGVsYXkoYXR0ZW1wdCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEZWxheSArPSBkZWxheTtcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIHJldHJ5IGF0dGVtcHQgKGluIHByb2R1Y3Rpb24sIHVzZSBwcm9wZXIgbG9nZ2VyKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFJldHJ5IGF0dGVtcHQgJHthdHRlbXB0fS8ke2NvbmZpZy5tYXhBdHRlbXB0c30gYWZ0ZXIgJHtkZWxheX1tcy4gRXJyb3I6ICR7bGFzdEVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoZGVsYXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogbGFzdEVycm9yLFxuICAgICAgICAgICAgYXR0ZW1wdHM6IGNvbmZpZy5tYXhBdHRlbXB0cyxcbiAgICAgICAgICAgIHRvdGFsRGVsYXlNczogdG90YWxEZWxheVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgaXNSZXRyeWFibGVFcnJvcihlcnJvciwgcmV0cnlhYmxlRXJyb3JzKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIGVycm9yIGlzIG1hcmtlZCBhcyByZXRyeWFibGVcbiAgICAgICAgaWYgKCdpc1JldHJ5YWJsZScgaW4gZXJyb3IgJiYgZXJyb3IuaXNSZXRyeWFibGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGVycm9yIGNvZGVcbiAgICAgICAgaWYgKCdjb2RlJyBpbiBlcnJvciAmJiB0eXBlb2YgZXJyb3IuY29kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiByZXRyeWFibGVFcnJvcnMuaW5jbHVkZXMoZXJyb3IuY29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgZXJyb3IgdHlwZVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOZXR3b3JrRXJyb3IgfHxcbiAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgUmF0ZUxpbWl0RXJyb3IgfHxcbiAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRGF0YVNvdXJjZUVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IuaXNSZXRyeWFibGU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgY29tbW9uIG5ldHdvcmsgZXJyb3IgcGF0dGVybnNcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yUGF0dGVybnMgPSBbXG4gICAgICAgICAgICAvRU5PVEZPVU5ELyxcbiAgICAgICAgICAgIC9FQ09OTlJFU0VULyxcbiAgICAgICAgICAgIC9FVElNRURPVVQvLFxuICAgICAgICAgICAgL0VDT05OUkVGVVNFRC8sXG4gICAgICAgICAgICAvc29ja2V0IGhhbmcgdXAvaSxcbiAgICAgICAgICAgIC9uZXR3b3JrIHRpbWVvdXQvaSxcbiAgICAgICAgICAgIC9yYXRlIGxpbWl0L2ksXG4gICAgICAgICAgICAvNDI5L1xuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gbmV0d29ya0Vycm9yUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChlcnJvci5tZXNzYWdlKSB8fCBwYXR0ZXJuLnRlc3QoZXJyb3IubmFtZSkpO1xuICAgIH1cbiAgICBzdGF0aWMgY2FsY3VsYXRlRGVsYXkoYXR0ZW1wdCwgY29uZmlnKSB7XG4gICAgICAgIC8vIEV4cG9uZW50aWFsIGJhY2tvZmYgd2l0aCBqaXR0ZXJcbiAgICAgICAgY29uc3QgYmFzZURlbGF5ID0gY29uZmlnLmJhc2VEZWxheU1zICogTWF0aC5wb3coY29uZmlnLmJhY2tvZmZNdWx0aXBsaWVyLCBhdHRlbXB0IC0gMSk7XG4gICAgICAgIGNvbnN0IGppdHRlciA9IGJhc2VEZWxheSAqIGNvbmZpZy5qaXR0ZXJGYWN0b3IgKiBNYXRoLnJhbmRvbSgpO1xuICAgICAgICBjb25zdCBkZWxheVdpdGhKaXR0ZXIgPSBiYXNlRGVsYXkgKyBqaXR0ZXI7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbihkZWxheVdpdGhKaXR0ZXIsIGNvbmZpZy5tYXhEZWxheU1zKTtcbiAgICB9XG4gICAgc3RhdGljIHNsZWVwKG1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbiAgICB9XG4gICAgLy8gU3BlY2lmaWMgcmV0cnkgY29uZmlndXJhdGlvbnMgZm9yIGRpZmZlcmVudCBvcGVyYXRpb25zXG4gICAgc3RhdGljIGdldE5ldHdvcmtSZXRyeUNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiAzLFxuICAgICAgICAgICAgYmFzZURlbGF5TXM6IDIwMDAsXG4gICAgICAgICAgICBtYXhEZWxheU1zOiAxMDAwMCxcbiAgICAgICAgICAgIHJldHJ5YWJsZUVycm9yczogWydORVRXT1JLX0VSUk9SJywgJ1JBVEVfTElNSVQnXVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0RGF0YVNvdXJjZVJldHJ5Q29uZmlnKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IDIsXG4gICAgICAgICAgICBiYXNlRGVsYXlNczogMTUwMCxcbiAgICAgICAgICAgIG1heERlbGF5TXM6IDUwMDAsXG4gICAgICAgICAgICByZXRyeWFibGVFcnJvcnM6IFsnREFUQV9TT1VSQ0VfWUFIT08nLCAnTkVUV09SS19FUlJPUiddXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBnZXRSYXRlTGltaXRSZXRyeUNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1heEF0dGVtcHRzOiA1LFxuICAgICAgICAgICAgYmFzZURlbGF5TXM6IDUwMDAsXG4gICAgICAgICAgICBtYXhEZWxheU1zOiA2MDAwMCxcbiAgICAgICAgICAgIGJhY2tvZmZNdWx0aXBsaWVyOiAxLjUsXG4gICAgICAgICAgICByZXRyeWFibGVFcnJvcnM6IFsnUkFURV9MSU1JVCddXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIENpcmN1aXQgYnJlYWtlciBwYXR0ZXJuIGZvciBmYWlsaW5nIHNlcnZpY2VzXG4gICAgc3RhdGljIGNyZWF0ZUNpcmN1aXRCcmVha2VyKG9wZXJhdGlvbiwgZmFpbHVyZVRocmVzaG9sZCA9IDUsIHJlY292ZXJ5VGltZU1zID0gNjAwMDApIHtcbiAgICAgICAgbGV0IGZhaWx1cmVzID0gMDtcbiAgICAgICAgbGV0IGxhc3RGYWlsdXJlVGltZSA9IDA7XG4gICAgICAgIGxldCBpc09wZW4gPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBjaXJjdWl0IHNob3VsZCBiZSByZXNldFxuICAgICAgICAgICAgaWYgKGlzT3BlbiAmJiBub3cgLSBsYXN0RmFpbHVyZVRpbWUgPiByZWNvdmVyeVRpbWVNcykge1xuICAgICAgICAgICAgICAgIGlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZhaWx1cmVzID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIGNpcmN1aXQgaXMgb3BlbiwgZmFpbCBmYXN0XG4gICAgICAgICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFTb3VyY2VFcnJvcignQ2lyY3VpdCBicmVha2VyIGlzIG9wZW4gLSBzZXJ2aWNlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlJywgJ0NJUkNVSVRfQlJFQUtFUicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVyYXRpb24oKTtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBmYWlsdXJlIGNvdW50IG9uIHN1Y2Nlc3NcbiAgICAgICAgICAgICAgICBmYWlsdXJlcyA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGZhaWx1cmVzKys7XG4gICAgICAgICAgICAgICAgbGFzdEZhaWx1cmVUaW1lID0gbm93O1xuICAgICAgICAgICAgICAgIC8vIE9wZW4gY2lyY3VpdCBpZiB0aHJlc2hvbGQgcmVhY2hlZFxuICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlcyA+PSBmYWlsdXJlVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzT3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXR3b3JrRXJyb3IiLCJSYXRlTGltaXRFcnJvciIsIkRhdGFTb3VyY2VFcnJvciIsIlJldHJ5SGFuZGxlciIsIkRFRkFVTFRfQ09ORklHIiwibWF4QXR0ZW1wdHMiLCJiYXNlRGVsYXlNcyIsIm1heERlbGF5TXMiLCJiYWNrb2ZmTXVsdGlwbGllciIsInJldHJ5YWJsZUVycm9ycyIsImppdHRlckZhY3RvciIsIndpdGhSZXRyeSIsIm9wZXJhdGlvbiIsImNvbmZpZyIsImZpbmFsQ29uZmlnIiwicmVzdWx0IiwiZXhlY3V0ZVdpdGhSZXRyeSIsInN1Y2Nlc3MiLCJ1bmRlZmluZWQiLCJlcnJvciIsIkVycm9yIiwibGFzdEVycm9yIiwidG90YWxEZWxheSIsImF0dGVtcHQiLCJhdHRlbXB0cyIsInRvdGFsRGVsYXlNcyIsImlzUmV0cnlhYmxlRXJyb3IiLCJkZWxheSIsImNhbGN1bGF0ZURlbGF5IiwiY29uc29sZSIsIndhcm4iLCJtZXNzYWdlIiwic2xlZXAiLCJpc1JldHJ5YWJsZSIsImNvZGUiLCJpbmNsdWRlcyIsIm5ldHdvcmtFcnJvclBhdHRlcm5zIiwic29tZSIsInBhdHRlcm4iLCJ0ZXN0IiwibmFtZSIsImJhc2VEZWxheSIsIk1hdGgiLCJwb3ciLCJqaXR0ZXIiLCJyYW5kb20iLCJkZWxheVdpdGhKaXR0ZXIiLCJtaW4iLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImdldE5ldHdvcmtSZXRyeUNvbmZpZyIsImdldERhdGFTb3VyY2VSZXRyeUNvbmZpZyIsImdldFJhdGVMaW1pdFJldHJ5Q29uZmlnIiwiY3JlYXRlQ2lyY3VpdEJyZWFrZXIiLCJmYWlsdXJlVGhyZXNob2xkIiwicmVjb3ZlcnlUaW1lTXMiLCJmYWlsdXJlcyIsImxhc3RGYWlsdXJlVGltZSIsImlzT3BlbiIsIm5vdyIsIkRhdGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/utils/RetryHandler.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/validation/DataQualityChecker.js":
/*!*****************************************************************!*\
  !*** ../../packages/core/dist/validation/DataQualityChecker.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataQualityChecker: () => (/* binding */ DataQualityChecker)\n/* harmony export */ });\n/* harmony import */ var _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/DivvyErrors.js */ \"(rsc)/../../packages/core/dist/errors/DivvyErrors.js\");\n/* harmony import */ var _models_StockData_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/StockData.js */ \"(rsc)/../../packages/core/dist/models/StockData.js\");\n\n\nclass DataQualityChecker {\n    static validateQuote(quote) {\n        if (!quote) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.TickerNotFoundError('UNKNOWN');\n        }\n        const warnings = [];\n        // Check required fields\n        if (!quote.regularMarketPrice && !quote.postMarketPrice && !quote.preMarketPrice) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.DataQualityError('No valid price data found', 'quote');\n        }\n        const price = quote.regularMarketPrice || quote.postMarketPrice || quote.preMarketPrice;\n        if (price <= 0) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.DataQualityError('Invalid price: must be greater than zero', 'quote');\n        }\n        if (price > 100000) {\n            warnings.push('Unusually high stock price detected');\n        }\n        // Check for company name\n        if (!quote.shortName && !quote.longName) {\n            warnings.push('Company name not available');\n        }\n        // Validate currency\n        if (!quote.currency) {\n            warnings.push('Currency information missing, assuming USD');\n        }\n        return new _models_StockData_js__WEBPACK_IMPORTED_MODULE_1__.Quote(quote);\n    }\n    static validateDividendEvents(events, _ticker) {\n        if (!Array.isArray(events)) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.DataQualityError('Invalid dividend events data structure', 'dividends');\n        }\n        if (events.length === 0) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.InsufficientDataError([\n                'dividend history'\n            ]);\n        }\n        const validEvents = events.filter((event)=>{\n            try {\n                return event.isValid();\n            } catch  {\n                return false;\n            }\n        });\n        if (validEvents.length === 0) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.DataQualityError('No valid dividend events found', 'dividends');\n        }\n        // Check for data quality issues\n        const warnings = [];\n        if (validEvents.length < events.length) {\n            warnings.push(`Filtered out ${events.length - validEvents.length} invalid dividend events`);\n        }\n        // Check for suspicious dividend amounts\n        const amounts = validEvents.map((e)=>e.amount);\n        const maxAmount = Math.max(...amounts);\n        const minAmount = Math.min(...amounts);\n        if (maxAmount / minAmount > 100) {\n            warnings.push('Large variation in dividend amounts detected');\n        }\n        // Check for temporal consistency\n        const sortedEvents = validEvents.sort((a, b)=>a.date.getTime() - b.date.getTime());\n        let previousYear = 0;\n        for (const event of sortedEvents){\n            const year = event.year;\n            if (year < previousYear) {\n                warnings.push('Dividend events may not be properly sorted');\n                break;\n            }\n            previousYear = year;\n        }\n        // Minimum data requirement\n        if (validEvents.length < 4) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.InsufficientDataError([\n                'sufficient dividend history (minimum 4 events)'\n            ]);\n        }\n        return validEvents;\n    }\n    static validateFundamentals(fundamentals) {\n        const warnings = [];\n        const errors = [];\n        const missingData = [];\n        // Check operating cash flow\n        if (!isFinite(fundamentals.operatingCashFlow)) {\n            missingData.push('operating cash flow');\n        } else if (fundamentals.operatingCashFlow < -1e12) {\n            warnings.push('Unusually large negative operating cash flow');\n        }\n        // Check capital expenditure\n        if (!isFinite(fundamentals.capitalExpenditure)) {\n            missingData.push('capital expenditure');\n        } else if (fundamentals.capitalExpenditure > 1e12) {\n            warnings.push('Unusually large capital expenditure');\n        }\n        // Check dividend payments\n        if (!isFinite(fundamentals.cashDividendsPaid)) {\n            missingData.push('cash dividends paid');\n        } else if (fundamentals.cashDividendsPaid < 0) {\n            warnings.push('Negative dividend payments detected');\n        }\n        // Check net income\n        if (!isFinite(fundamentals.netIncome)) {\n            missingData.push('net income');\n        }\n        // Check payout ratio\n        if (!isFinite(fundamentals.epsPayoutRatio)) {\n            missingData.push('EPS payout ratio');\n        } else if (fundamentals.epsPayoutRatio > 2) {\n            warnings.push('Very high EPS payout ratio (>200%)');\n        } else if (fundamentals.epsPayoutRatio < 0) {\n            warnings.push('Negative EPS payout ratio');\n        }\n        // Calculate data completeness\n        const totalFields = 5; // OCF, CapEx, Dividends, Net Income, Payout Ratio\n        const availableFields = totalFields - missingData.length;\n        const dataCompleteness = availableFields / totalFields * 100;\n        const isValid = errors.length === 0 && missingData.length < totalFields;\n        return {\n            isValid,\n            warnings,\n            errors,\n            missingData,\n            dataCompleteness\n        };\n    }\n    static validateAnnualDividends(annualData) {\n        const warnings = [];\n        const errors = [];\n        const missingData = [];\n        if (!Array.isArray(annualData) || annualData.length === 0) {\n            errors.push('No annual dividend data available');\n            return {\n                isValid: false,\n                warnings,\n                errors,\n                missingData: [\n                    'annual dividend history'\n                ],\n                dataCompleteness: 0\n            };\n        }\n        // Check for minimum data points\n        if (annualData.length < 3) {\n            warnings.push('Limited dividend history (less than 3 years)');\n        }\n        // Check for data consistency\n        let previousYear = 0;\n        for (const [year, amount] of annualData){\n            if (year <= previousYear) {\n                warnings.push('Duplicate or out-of-order years in dividend data');\n                break;\n            }\n            if (amount < 0) {\n                warnings.push(`Negative dividend amount found for year ${year}`);\n            }\n            if (amount > 1000) {\n                warnings.push(`Unusually high dividend amount for year ${year}`);\n            }\n            previousYear = year;\n        }\n        // Check for gaps in years\n        const years = annualData.map(([year])=>year).sort((a, b)=>a - b);\n        for(let i = 1; i < years.length; i++){\n            if (years[i] - years[i - 1] > 1) {\n                warnings.push(`Gap in dividend data between ${years[i - 1]} and ${years[i]}`);\n            }\n        }\n        const dataCompleteness = Math.min(100, annualData.length / 10 * 100); // 10 years = 100%\n        return {\n            isValid: true,\n            warnings,\n            errors,\n            missingData,\n            dataCompleteness\n        };\n    }\n    static generateOverallReport(reports) {\n        const combinedWarnings = [];\n        const combinedErrors = [];\n        const combinedMissingData = [];\n        let totalCompleteness = 0;\n        let validReports = 0;\n        for (const report of reports){\n            combinedWarnings.push(...report.warnings);\n            combinedErrors.push(...report.errors);\n            combinedMissingData.push(...report.missingData);\n            if (report.isValid) {\n                totalCompleteness += report.dataCompleteness;\n                validReports++;\n            }\n        }\n        const overallCompleteness = validReports > 0 ? totalCompleteness / validReports : 0;\n        const isValid = combinedErrors.length === 0 && validReports === reports.length;\n        return {\n            isValid,\n            warnings: [\n                ...new Set(combinedWarnings)\n            ],\n            errors: [\n                ...new Set(combinedErrors)\n            ],\n            missingData: [\n                ...new Set(combinedMissingData)\n            ],\n            dataCompleteness: overallCompleteness\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L3ZhbGlkYXRpb24vRGF0YVF1YWxpdHlDaGVja2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3RztBQUN6RDtBQUN4QyxNQUFNSTtJQUNULE9BQU9DLGNBQWNDLEtBQUssRUFBRTtRQUN4QixJQUFJLENBQUNBLE9BQU87WUFDUixNQUFNLElBQUlKLHVFQUFtQkEsQ0FBQztRQUNsQztRQUNBLE1BQU1LLFdBQVcsRUFBRTtRQUNuQix3QkFBd0I7UUFDeEIsSUFBSSxDQUFDRCxNQUFNRSxrQkFBa0IsSUFBSSxDQUFDRixNQUFNRyxlQUFlLElBQUksQ0FBQ0gsTUFBTUksY0FBYyxFQUFFO1lBQzlFLE1BQU0sSUFBSVYsb0VBQWdCQSxDQUFDLDZCQUE2QjtRQUM1RDtRQUNBLE1BQU1XLFFBQVFMLE1BQU1FLGtCQUFrQixJQUFJRixNQUFNRyxlQUFlLElBQUlILE1BQU1JLGNBQWM7UUFDdkYsSUFBSUMsU0FBUyxHQUFHO1lBQ1osTUFBTSxJQUFJWCxvRUFBZ0JBLENBQUMsNENBQTRDO1FBQzNFO1FBQ0EsSUFBSVcsUUFBUSxRQUFRO1lBQ2hCSixTQUFTSyxJQUFJLENBQUM7UUFDbEI7UUFDQSx5QkFBeUI7UUFDekIsSUFBSSxDQUFDTixNQUFNTyxTQUFTLElBQUksQ0FBQ1AsTUFBTVEsUUFBUSxFQUFFO1lBQ3JDUCxTQUFTSyxJQUFJLENBQUM7UUFDbEI7UUFDQSxvQkFBb0I7UUFDcEIsSUFBSSxDQUFDTixNQUFNUyxRQUFRLEVBQUU7WUFDakJSLFNBQVNLLElBQUksQ0FBQztRQUNsQjtRQUNBLE9BQU8sSUFBSVQsdURBQUtBLENBQUNHO0lBQ3JCO0lBQ0EsT0FBT1UsdUJBQXVCQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQyxJQUFJLENBQUNDLE1BQU1DLE9BQU8sQ0FBQ0gsU0FBUztZQUN4QixNQUFNLElBQUlqQixvRUFBZ0JBLENBQUMsMENBQTBDO1FBQ3pFO1FBQ0EsSUFBSWlCLE9BQU9JLE1BQU0sS0FB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O1FBQ2xGLE1BQU16QyxVQUFVc0MsZUFBZTFDLE1BQU0sS0FBSyxLQUFLNkMsaUJBQWlCTCxRQUFReEMsTUFBTTtRQUM5RSxPQUFPO1lBQ0hJO1lBQ0FsQixVQUFVO21CQUFJLElBQUk4RCxJQUFJUDthQUFrQjtZQUN4Q2pCLFFBQVE7bUJBQUksSUFBSXdCLElBQUlOO2FBQWdCO1lBQ3BDakIsYUFBYTttQkFBSSxJQUFJdUIsSUFBSUw7YUFBcUI7WUFDOUNULGtCQUFrQmE7UUFDdEI7SUFDSjtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbWFydGluc3Rhcm9zdGEvRGV2ZWxvcG1lbnQvdmliZXMvZGl2eXkvcGFja2FnZXMvY29yZS9kaXN0L3ZhbGlkYXRpb24vRGF0YVF1YWxpdHlDaGVja2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGFRdWFsaXR5RXJyb3IsIEluc3VmZmljaWVudERhdGFFcnJvciwgVGlja2VyTm90Rm91bmRFcnJvciB9IGZyb20gJy4uL2Vycm9ycy9EaXZ2eUVycm9ycy5qcyc7XG5pbXBvcnQgeyBRdW90ZSB9IGZyb20gJy4uL21vZGVscy9TdG9ja0RhdGEuanMnO1xuZXhwb3J0IGNsYXNzIERhdGFRdWFsaXR5Q2hlY2tlciB7XG4gICAgc3RhdGljIHZhbGlkYXRlUXVvdGUocXVvdGUpIHtcbiAgICAgICAgaWYgKCFxdW90ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRpY2tlck5vdEZvdW5kRXJyb3IoJ1VOS05PV04nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgICAgICAvLyBDaGVjayByZXF1aXJlZCBmaWVsZHNcbiAgICAgICAgaWYgKCFxdW90ZS5yZWd1bGFyTWFya2V0UHJpY2UgJiYgIXF1b3RlLnBvc3RNYXJrZXRQcmljZSAmJiAhcXVvdGUucHJlTWFya2V0UHJpY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBEYXRhUXVhbGl0eUVycm9yKCdObyB2YWxpZCBwcmljZSBkYXRhIGZvdW5kJywgJ3F1b3RlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJpY2UgPSBxdW90ZS5yZWd1bGFyTWFya2V0UHJpY2UgfHwgcXVvdGUucG9zdE1hcmtldFByaWNlIHx8IHF1b3RlLnByZU1hcmtldFByaWNlO1xuICAgICAgICBpZiAocHJpY2UgPD0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFRdWFsaXR5RXJyb3IoJ0ludmFsaWQgcHJpY2U6IG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8nLCAncXVvdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJpY2UgPiAxMDAwMDApIHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goJ1VudXN1YWxseSBoaWdoIHN0b2NrIHByaWNlIGRldGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNvbXBhbnkgbmFtZVxuICAgICAgICBpZiAoIXF1b3RlLnNob3J0TmFtZSAmJiAhcXVvdGUubG9uZ05hbWUpIHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goJ0NvbXBhbnkgbmFtZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVmFsaWRhdGUgY3VycmVuY3lcbiAgICAgICAgaWYgKCFxdW90ZS5jdXJyZW5jeSkge1xuICAgICAgICAgICAgd2FybmluZ3MucHVzaCgnQ3VycmVuY3kgaW5mb3JtYXRpb24gbWlzc2luZywgYXNzdW1pbmcgVVNEJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBRdW90ZShxdW90ZSk7XG4gICAgfVxuICAgIHN0YXRpYyB2YWxpZGF0ZURpdmlkZW5kRXZlbnRzKGV2ZW50cywgX3RpY2tlcikge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFRdWFsaXR5RXJyb3IoJ0ludmFsaWQgZGl2aWRlbmQgZXZlbnRzIGRhdGEgc3RydWN0dXJlJywgJ2RpdmlkZW5kcycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW5zdWZmaWNpZW50RGF0YUVycm9yKFsnZGl2aWRlbmQgaGlzdG9yeSddKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWxpZEV2ZW50cyA9IGV2ZW50cy5maWx0ZXIoZXZlbnQgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQuaXNWYWxpZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh2YWxpZEV2ZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBEYXRhUXVhbGl0eUVycm9yKCdObyB2YWxpZCBkaXZpZGVuZCBldmVudHMgZm91bmQnLCAnZGl2aWRlbmRzJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGRhdGEgcXVhbGl0eSBpc3N1ZXNcbiAgICAgICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICAgICAgaWYgKHZhbGlkRXZlbnRzLmxlbmd0aCA8IGV2ZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goYEZpbHRlcmVkIG91dCAke2V2ZW50cy5sZW5ndGggLSB2YWxpZEV2ZW50cy5sZW5ndGh9IGludmFsaWQgZGl2aWRlbmQgZXZlbnRzYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgZm9yIHN1c3BpY2lvdXMgZGl2aWRlbmQgYW1vdW50c1xuICAgICAgICBjb25zdCBhbW91bnRzID0gdmFsaWRFdmVudHMubWFwKGUgPT4gZS5hbW91bnQpO1xuICAgICAgICBjb25zdCBtYXhBbW91bnQgPSBNYXRoLm1heCguLi5hbW91bnRzKTtcbiAgICAgICAgY29uc3QgbWluQW1vdW50ID0gTWF0aC5taW4oLi4uYW1vdW50cyk7XG4gICAgICAgIGlmIChtYXhBbW91bnQgLyBtaW5BbW91bnQgPiAxMDApIHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goJ0xhcmdlIHZhcmlhdGlvbiBpbiBkaXZpZGVuZCBhbW91bnRzIGRldGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgZm9yIHRlbXBvcmFsIGNvbnNpc3RlbmN5XG4gICAgICAgIGNvbnN0IHNvcnRlZEV2ZW50cyA9IHZhbGlkRXZlbnRzLnNvcnQoKGEsIGIpID0+IGEuZGF0ZS5nZXRUaW1lKCkgLSBiLmRhdGUuZ2V0VGltZSgpKTtcbiAgICAgICAgbGV0IHByZXZpb3VzWWVhciA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2Ygc29ydGVkRXZlbnRzKSB7XG4gICAgICAgICAgICBjb25zdCB5ZWFyID0gZXZlbnQueWVhcjtcbiAgICAgICAgICAgIGlmICh5ZWFyIDwgcHJldmlvdXNZZWFyKSB7XG4gICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaCgnRGl2aWRlbmQgZXZlbnRzIG1heSBub3QgYmUgcHJvcGVybHkgc29ydGVkJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2aW91c1llYXIgPSB5ZWFyO1xuICAgICAgICB9XG4gICAgICAgIC8vIE1pbmltdW0gZGF0YSByZXF1aXJlbWVudFxuICAgICAgICBpZiAodmFsaWRFdmVudHMubGVuZ3RoIDwgNCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEluc3VmZmljaWVudERhdGFFcnJvcihbJ3N1ZmZpY2llbnQgZGl2aWRlbmQgaGlzdG9yeSAobWluaW11bSA0IGV2ZW50cyknXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbGlkRXZlbnRzO1xuICAgIH1cbiAgICBzdGF0aWMgdmFsaWRhdGVGdW5kYW1lbnRhbHMoZnVuZGFtZW50YWxzKSB7XG4gICAgICAgIGNvbnN0IHdhcm5pbmdzID0gW107XG4gICAgICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgICAgICBjb25zdCBtaXNzaW5nRGF0YSA9IFtdO1xuICAgICAgICAvLyBDaGVjayBvcGVyYXRpbmcgY2FzaCBmbG93XG4gICAgICAgIGlmICghaXNGaW5pdGUoZnVuZGFtZW50YWxzLm9wZXJhdGluZ0Nhc2hGbG93KSkge1xuICAgICAgICAgICAgbWlzc2luZ0RhdGEucHVzaCgnb3BlcmF0aW5nIGNhc2ggZmxvdycpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZ1bmRhbWVudGFscy5vcGVyYXRpbmdDYXNoRmxvdyA8IC0xZTEyKSB7XG4gICAgICAgICAgICB3YXJuaW5ncy5wdXNoKCdVbnVzdWFsbHkgbGFyZ2UgbmVnYXRpdmUgb3BlcmF0aW5nIGNhc2ggZmxvdycpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGNhcGl0YWwgZXhwZW5kaXR1cmVcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShmdW5kYW1lbnRhbHMuY2FwaXRhbEV4cGVuZGl0dXJlKSkge1xuICAgICAgICAgICAgbWlzc2luZ0RhdGEucHVzaCgnY2FwaXRhbCBleHBlbmRpdHVyZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZ1bmRhbWVudGFscy5jYXBpdGFsRXhwZW5kaXR1cmUgPiAxZTEyKSB7XG4gICAgICAgICAgICB3YXJuaW5ncy5wdXNoKCdVbnVzdWFsbHkgbGFyZ2UgY2FwaXRhbCBleHBlbmRpdHVyZScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGRpdmlkZW5kIHBheW1lbnRzXG4gICAgICAgIGlmICghaXNGaW5pdGUoZnVuZGFtZW50YWxzLmNhc2hEaXZpZGVuZHNQYWlkKSkge1xuICAgICAgICAgICAgbWlzc2luZ0RhdGEucHVzaCgnY2FzaCBkaXZpZGVuZHMgcGFpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZ1bmRhbWVudGFscy5jYXNoRGl2aWRlbmRzUGFpZCA8IDApIHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goJ05lZ2F0aXZlIGRpdmlkZW5kIHBheW1lbnRzIGRldGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgbmV0IGluY29tZVxuICAgICAgICBpZiAoIWlzRmluaXRlKGZ1bmRhbWVudGFscy5uZXRJbmNvbWUpKSB7XG4gICAgICAgICAgICBtaXNzaW5nRGF0YS5wdXNoKCduZXQgaW5jb21lJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgcGF5b3V0IHJhdGlvXG4gICAgICAgIGlmICghaXNGaW5pdGUoZnVuZGFtZW50YWxzLmVwc1BheW91dFJhdGlvKSkge1xuICAgICAgICAgICAgbWlzc2luZ0RhdGEucHVzaCgnRVBTIHBheW91dCByYXRpbycpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZ1bmRhbWVudGFscy5lcHNQYXlvdXRSYXRpbyA+IDIpIHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goJ1ZlcnkgaGlnaCBFUFMgcGF5b3V0IHJhdGlvICg+MjAwJSknKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmdW5kYW1lbnRhbHMuZXBzUGF5b3V0UmF0aW8gPCAwKSB7XG4gICAgICAgICAgICB3YXJuaW5ncy5wdXNoKCdOZWdhdGl2ZSBFUFMgcGF5b3V0IHJhdGlvJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2FsY3VsYXRlIGRhdGEgY29tcGxldGVuZXNzXG4gICAgICAgIGNvbnN0IHRvdGFsRmllbGRzID0gNTsgLy8gT0NGLCBDYXBFeCwgRGl2aWRlbmRzLCBOZXQgSW5jb21lLCBQYXlvdXQgUmF0aW9cbiAgICAgICAgY29uc3QgYXZhaWxhYmxlRmllbGRzID0gdG90YWxGaWVsZHMgLSBtaXNzaW5nRGF0YS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGRhdGFDb21wbGV0ZW5lc3MgPSAoYXZhaWxhYmxlRmllbGRzIC8gdG90YWxGaWVsZHMpICogMTAwO1xuICAgICAgICBjb25zdCBpc1ZhbGlkID0gZXJyb3JzLmxlbmd0aCA9PT0gMCAmJiBtaXNzaW5nRGF0YS5sZW5ndGggPCB0b3RhbEZpZWxkcztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzVmFsaWQsXG4gICAgICAgICAgICB3YXJuaW5ncyxcbiAgICAgICAgICAgIGVycm9ycyxcbiAgICAgICAgICAgIG1pc3NpbmdEYXRhLFxuICAgICAgICAgICAgZGF0YUNvbXBsZXRlbmVzc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgdmFsaWRhdGVBbm51YWxEaXZpZGVuZHMoYW5udWFsRGF0YSkge1xuICAgICAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgICAgICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgICAgICAgY29uc3QgbWlzc2luZ0RhdGEgPSBbXTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFubnVhbERhdGEpIHx8IGFubnVhbERhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnTm8gYW5udWFsIGRpdmlkZW5kIGRhdGEgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLFxuICAgICAgICAgICAgICAgIGVycm9ycyxcbiAgICAgICAgICAgICAgICBtaXNzaW5nRGF0YTogWydhbm51YWwgZGl2aWRlbmQgaGlzdG9yeSddLFxuICAgICAgICAgICAgICAgIGRhdGFDb21wbGV0ZW5lc3M6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgZm9yIG1pbmltdW0gZGF0YSBwb2ludHNcbiAgICAgICAgaWYgKGFubnVhbERhdGEubGVuZ3RoIDwgMykge1xuICAgICAgICAgICAgd2FybmluZ3MucHVzaCgnTGltaXRlZCBkaXZpZGVuZCBoaXN0b3J5IChsZXNzIHRoYW4gMyB5ZWFycyknKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayBmb3IgZGF0YSBjb25zaXN0ZW5jeVxuICAgICAgICBsZXQgcHJldmlvdXNZZWFyID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBbeWVhciwgYW1vdW50XSBvZiBhbm51YWxEYXRhKSB7XG4gICAgICAgICAgICBpZiAoeWVhciA8PSBwcmV2aW91c1llYXIpIHtcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKCdEdXBsaWNhdGUgb3Igb3V0LW9mLW9yZGVyIHllYXJzIGluIGRpdmlkZW5kIGRhdGEnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbW91bnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaChgTmVnYXRpdmUgZGl2aWRlbmQgYW1vdW50IGZvdW5kIGZvciB5ZWFyICR7eWVhcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbW91bnQgPiAxMDAwKSB7XG4gICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaChgVW51c3VhbGx5IGhpZ2ggZGl2aWRlbmQgYW1vdW50IGZvciB5ZWFyICR7eWVhcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZpb3VzWWVhciA9IHllYXI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGdhcHMgaW4geWVhcnNcbiAgICAgICAgY29uc3QgeWVhcnMgPSBhbm51YWxEYXRhLm1hcCgoW3llYXJdKSA9PiB5ZWFyKS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgeWVhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh5ZWFyc1tpXSAtIHllYXJzW2kgLSAxXSA+IDEpIHtcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKGBHYXAgaW4gZGl2aWRlbmQgZGF0YSBiZXR3ZWVuICR7eWVhcnNbaSAtIDFdfSBhbmQgJHt5ZWFyc1tpXX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhQ29tcGxldGVuZXNzID0gTWF0aC5taW4oMTAwLCAoYW5udWFsRGF0YS5sZW5ndGggLyAxMCkgKiAxMDApOyAvLyAxMCB5ZWFycyA9IDEwMCVcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgICAgICB3YXJuaW5ncyxcbiAgICAgICAgICAgIGVycm9ycyxcbiAgICAgICAgICAgIG1pc3NpbmdEYXRhLFxuICAgICAgICAgICAgZGF0YUNvbXBsZXRlbmVzc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZ2VuZXJhdGVPdmVyYWxsUmVwb3J0KHJlcG9ydHMpIHtcbiAgICAgICAgY29uc3QgY29tYmluZWRXYXJuaW5ncyA9IFtdO1xuICAgICAgICBjb25zdCBjb21iaW5lZEVycm9ycyA9IFtdO1xuICAgICAgICBjb25zdCBjb21iaW5lZE1pc3NpbmdEYXRhID0gW107XG4gICAgICAgIGxldCB0b3RhbENvbXBsZXRlbmVzcyA9IDA7XG4gICAgICAgIGxldCB2YWxpZFJlcG9ydHMgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHJlcG9ydCBvZiByZXBvcnRzKSB7XG4gICAgICAgICAgICBjb21iaW5lZFdhcm5pbmdzLnB1c2goLi4ucmVwb3J0Lndhcm5pbmdzKTtcbiAgICAgICAgICAgIGNvbWJpbmVkRXJyb3JzLnB1c2goLi4ucmVwb3J0LmVycm9ycyk7XG4gICAgICAgICAgICBjb21iaW5lZE1pc3NpbmdEYXRhLnB1c2goLi4ucmVwb3J0Lm1pc3NpbmdEYXRhKTtcbiAgICAgICAgICAgIGlmIChyZXBvcnQuaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgIHRvdGFsQ29tcGxldGVuZXNzICs9IHJlcG9ydC5kYXRhQ29tcGxldGVuZXNzO1xuICAgICAgICAgICAgICAgIHZhbGlkUmVwb3J0cysrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG92ZXJhbGxDb21wbGV0ZW5lc3MgPSB2YWxpZFJlcG9ydHMgPiAwID8gdG90YWxDb21wbGV0ZW5lc3MgLyB2YWxpZFJlcG9ydHMgOiAwO1xuICAgICAgICBjb25zdCBpc1ZhbGlkID0gY29tYmluZWRFcnJvcnMubGVuZ3RoID09PSAwICYmIHZhbGlkUmVwb3J0cyA9PT0gcmVwb3J0cy5sZW5ndGg7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc1ZhbGlkLFxuICAgICAgICAgICAgd2FybmluZ3M6IFsuLi5uZXcgU2V0KGNvbWJpbmVkV2FybmluZ3MpXSwgLy8gUmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgIGVycm9yczogWy4uLm5ldyBTZXQoY29tYmluZWRFcnJvcnMpXSxcbiAgICAgICAgICAgIG1pc3NpbmdEYXRhOiBbLi4ubmV3IFNldChjb21iaW5lZE1pc3NpbmdEYXRhKV0sXG4gICAgICAgICAgICBkYXRhQ29tcGxldGVuZXNzOiBvdmVyYWxsQ29tcGxldGVuZXNzXG4gICAgICAgIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkRhdGFRdWFsaXR5RXJyb3IiLCJJbnN1ZmZpY2llbnREYXRhRXJyb3IiLCJUaWNrZXJOb3RGb3VuZEVycm9yIiwiUXVvdGUiLCJEYXRhUXVhbGl0eUNoZWNrZXIiLCJ2YWxpZGF0ZVF1b3RlIiwicXVvdGUiLCJ3YXJuaW5ncyIsInJlZ3VsYXJNYXJrZXRQcmljZSIsInBvc3RNYXJrZXRQcmljZSIsInByZU1hcmtldFByaWNlIiwicHJpY2UiLCJwdXNoIiwic2hvcnROYW1lIiwibG9uZ05hbWUiLCJjdXJyZW5jeSIsInZhbGlkYXRlRGl2aWRlbmRFdmVudHMiLCJldmVudHMiLCJfdGlja2VyIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwidmFsaWRFdmVudHMiLCJmaWx0ZXIiLCJldmVudCIsImlzVmFsaWQiLCJhbW91bnRzIiwibWFwIiwiZSIsImFtb3VudCIsIm1heEFtb3VudCIsIk1hdGgiLCJtYXgiLCJtaW5BbW91bnQiLCJtaW4iLCJzb3J0ZWRFdmVudHMiLCJzb3J0IiwiYSIsImIiLCJkYXRlIiwiZ2V0VGltZSIsInByZXZpb3VzWWVhciIsInllYXIiLCJ2YWxpZGF0ZUZ1bmRhbWVudGFscyIsImZ1bmRhbWVudGFscyIsImVycm9ycyIsIm1pc3NpbmdEYXRhIiwiaXNGaW5pdGUiLCJvcGVyYXRpbmdDYXNoRmxvdyIsImNhcGl0YWxFeHBlbmRpdHVyZSIsImNhc2hEaXZpZGVuZHNQYWlkIiwibmV0SW5jb21lIiwiZXBzUGF5b3V0UmF0aW8iLCJ0b3RhbEZpZWxkcyIsImF2YWlsYWJsZUZpZWxkcyIsImRhdGFDb21wbGV0ZW5lc3MiLCJ2YWxpZGF0ZUFubnVhbERpdmlkZW5kcyIsImFubnVhbERhdGEiLCJ5ZWFycyIsImkiLCJnZW5lcmF0ZU92ZXJhbGxSZXBvcnQiLCJyZXBvcnRzIiwiY29tYmluZWRXYXJuaW5ncyIsImNvbWJpbmVkRXJyb3JzIiwiY29tYmluZWRNaXNzaW5nRGF0YSIsInRvdGFsQ29tcGxldGVuZXNzIiwidmFsaWRSZXBvcnRzIiwicmVwb3J0Iiwib3ZlcmFsbENvbXBsZXRlbmVzcyIsIlNldCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/validation/DataQualityChecker.js\n");

/***/ }),

/***/ "(rsc)/../../packages/core/dist/validation/InputValidator.js":
/*!*************************************************************!*\
  !*** ../../packages/core/dist/validation/InputValidator.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InputValidator: () => (/* binding */ InputValidator)\n/* harmony export */ });\n/* harmony import */ var _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/DivvyErrors.js */ \"(rsc)/../../packages/core/dist/errors/DivvyErrors.js\");\n\nclass InputValidator {\n    static{\n        this.TICKER_PATTERN = /^[A-Z0-9.-]{1,10}$/;\n    }\n    static{\n        this.MIN_YEARS = 1;\n    }\n    static{\n        this.MAX_YEARS = 50;\n    }\n    static{\n        this.MIN_REQUIRED_RETURN = 0.001; // 0.1%\n    }\n    static{\n        this.MAX_REQUIRED_RETURN = 1.0; // 100%\n    }\n    static{\n        this.VALID_PROVIDERS = [\n            'yahoo',\n            'av',\n            'auto'\n        ];\n    }\n    static validateTicker(ticker) {\n        if (!ticker) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Ticker symbol is required', 'ticker');\n        }\n        if (typeof ticker !== 'string') {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Ticker must be a string', 'ticker');\n        }\n        const cleanTicker = ticker.trim().toUpperCase();\n        if (cleanTicker.length === 0) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Ticker symbol cannot be empty', 'ticker');\n        }\n        if (cleanTicker.length > 10) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Ticker symbol too long (max 10 characters)', 'ticker');\n        }\n        if (!this.TICKER_PATTERN.test(cleanTicker)) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Invalid ticker format. Use only letters, numbers, dots, and hyphens', 'ticker');\n        }\n        // Check for common invalid patterns\n        if (cleanTicker.startsWith('-') || cleanTicker.endsWith('-')) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Ticker cannot start or end with hyphen', 'ticker');\n        }\n        if (cleanTicker.startsWith('.') || cleanTicker.endsWith('.')) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Ticker cannot start or end with dot', 'ticker');\n        }\n        return cleanTicker;\n    }\n    static validateYears(years) {\n        let numYears;\n        if (typeof years === 'string') {\n            numYears = parseInt(years, 10);\n            if (isNaN(numYears)) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Years must be a valid number', 'years');\n            }\n        } else {\n            numYears = years;\n        }\n        if (!Number.isInteger(numYears)) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Years must be a whole number', 'years');\n        }\n        if (numYears < this.MIN_YEARS) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError(`Years must be at least ${this.MIN_YEARS}`, 'years');\n        }\n        if (numYears > this.MAX_YEARS) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError(`Years cannot exceed ${this.MAX_YEARS}`, 'years');\n        }\n        return numYears;\n    }\n    static validateRequiredReturn(requiredReturn) {\n        let numReturn;\n        if (typeof requiredReturn === 'string') {\n            numReturn = parseFloat(requiredReturn);\n            if (isNaN(numReturn)) {\n                throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Required return must be a valid number', 'requiredReturn');\n            }\n        } else {\n            numReturn = requiredReturn;\n        }\n        if (!isFinite(numReturn)) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Required return must be a finite number', 'requiredReturn');\n        }\n        if (numReturn < this.MIN_REQUIRED_RETURN) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError(`Required return too low (minimum ${(this.MIN_REQUIRED_RETURN * 100).toFixed(1)}%)`, 'requiredReturn');\n        }\n        if (numReturn > this.MAX_REQUIRED_RETURN) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError(`Required return too high (maximum ${this.MAX_REQUIRED_RETURN * 100}%)`, 'requiredReturn');\n        }\n        return numReturn;\n    }\n    static validateProvider(provider) {\n        if (!provider) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Provider is required', 'provider');\n        }\n        if (typeof provider !== 'string') {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Provider must be a string', 'provider');\n        }\n        const cleanProvider = provider.trim().toLowerCase();\n        if (!this.VALID_PROVIDERS.includes(cleanProvider)) {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError(`Invalid provider \"${provider}\". Valid providers: ${this.VALID_PROVIDERS.join(', ')}`, 'provider');\n        }\n        return cleanProvider;\n    }\n    static validateCommanderOptions(options) {\n        if (!options || typeof options !== 'object') {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ConfigurationError('Invalid command options');\n        }\n        // Validate years if provided\n        if (options.years !== undefined) {\n            try {\n                this.validateYears(options.years);\n            } catch (error) {\n                if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError) {\n                    throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError(`Invalid --years parameter: ${error.message}`, 'years');\n                }\n                throw error;\n            }\n        }\n        // Validate required return if provided\n        if (options.r !== undefined) {\n            try {\n                this.validateRequiredReturn(options.r);\n            } catch (error) {\n                if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError) {\n                    throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError(`Invalid --r parameter: ${error.message}`, 'requiredReturn');\n                }\n                throw error;\n            }\n        }\n        // Validate provider if provided\n        if (options.provider !== undefined) {\n            try {\n                this.validateProvider(options.provider);\n            } catch (error) {\n                if (error instanceof _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError) {\n                    throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError(`Invalid --provider parameter: ${error.message}`, 'provider');\n                }\n                throw error;\n            }\n        }\n    }\n    static sanitizeInput(input) {\n        if (typeof input !== 'string') {\n            throw new _errors_DivvyErrors_js__WEBPACK_IMPORTED_MODULE_0__.ValidationError('Input must be a string');\n        }\n        // Remove potentially dangerous characters\n        return input.trim().replace(/[<>'\"&]/g, '') // Remove HTML/script injection characters\n        .slice(0, 50); // Limit length\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvY29yZS9kaXN0L3ZhbGlkYXRpb24vSW5wdXRWYWxpZGF0b3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0U7QUFDeEUsTUFBTUU7O2FBQ0ZDLGlCQUFpQjs7O2FBQ2pCQyxZQUFZOzs7YUFDWkMsWUFBWTs7O2FBQ1pDLHNCQUFzQixPQUFPLE9BQU87OzthQUNwQ0Msc0JBQXNCLEtBQUssT0FBTzs7O2FBQ2xDQyxrQkFBa0I7WUFBQztZQUFTO1lBQU07U0FBTzs7SUFDaEQsT0FBT0MsZUFBZUMsTUFBTSxFQUFFO1FBQzFCLElBQUksQ0FBQ0EsUUFBUTtZQUNULE1BQU0sSUFBSVYsbUVBQWVBLENBQUMsNkJBQTZCO1FBQzNEO1FBQ0EsSUFBSSxPQUFPVSxXQUFXLFVBQVU7WUFDNUIsTUFBTSxJQUFJVixtRUFBZUEsQ0FBQywyQkFBMkI7UUFDekQ7UUFDQSxNQUFNVyxjQUFjRCxPQUFPRSxJQUFJLEdBQUdDLFdBQVc7UUFDN0MsSUFBSUYsWUFBWUcsTUFBTSxLQUFLLEdBQUc7WUFDMUIsTUFBTSxJQUFJZCxtRUFBZUEsQ0FBQyxpQ0FBaUM7UUFDL0Q7UUFDQSxJQUFJVyxZQUFZRyxNQUFNLEdBQUcsSUFBSTtZQUN6QixNQUFNLElBQUlkLG1FQUFlQSxDQUFDLDhDQUE4QztRQUM1RTtRQUNBLElBQUksQ0FBQyxJQUFJLENBQUNHLGNBQWMsQ0FBQ1ksSUFBSSxDQUFDSixjQUFjO1lBQ3hDLE1BQU0sSUFBSVgsbUVBQWVBLENBQUMsdUVBQXVFO1FBQ3JHO1FBQ0Esb0NBQW9DO1FBQ3BDLElBQUlXLFlBQVlLLFVBQVUsQ0FBQyxRQUFRTCxZQUFZTSxRQUFRLENBQUMsTUFBTTtZQUMxRCxNQUFNLElBQUlqQixtRUFBZUEsQ0FBQywwQ0FBMEM7UUFDeEU7UUFDQSxJQUFJVyxZQUFZSyxVQUFVLENBQUMsUUFBUUwsWUFBWU0sUUFBUSxDQUFDLE1BQU07WUFDMUQsTUFBTSxJQUFJakIsbUVBQWVBLENBQUMsdUNBQXVDO1FBQ3JFO1FBQ0Es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QyxNQUFNQyxPQUFPLEVBQUUsRUFBRTtnQkFDN0U7Z0JBQ0EsTUFBTUQ7WUFDVjtRQUNKO1FBQ0EsdUNBQXVDO1FBQ3ZDLElBQUlGLFFBQVFJLENBQUMsS0FBS0gsV0FBVztZQUN6QixJQUFJO2dCQUNBLElBQUksQ0FBQ2Qsc0JBQXNCLENBQUNhLFFBQVFJLENBQUM7WUFDekMsRUFDQSxPQUFPRixPQUFPO2dCQUNWLElBQUlBLGlCQUFpQnhDLG1FQUFlQSxFQUFFO29CQUNsQyxNQUFNLElBQUlBLG1FQUFlQSxDQUFDLENBQUMsdUJBQXVCLEVBQUV3QyxNQUFNQyxPQUFPLEVBQUUsRUFBRTtnQkFDekU7Z0JBQ0EsTUFBTUQ7WUFDVjtRQUNKO1FBQ0EsZ0NBQWdDO1FBQ2hDLElBQUlGLFFBQVFOLFFBQVEsS0FBS08sV0FBVztZQUNoQyxJQUFJO2dCQUNBLElBQUksQ0FBQ1IsZ0JBQWdCLENBQUNPLFFBQVFOLFFBQVE7WUFDMUMsRUFDQSxPQUFPUSxPQUFPO2dCQUNWLElBQUlBLGlCQUFpQnhDLG1FQUFlQSxFQUFFO29CQUNsQyxNQUFNLElBQUlBLG1FQUFlQSxDQUFDLENBQUMsOEJBQThCLEVBQUV3QyxNQUFNQyxPQUFPLEVBQUUsRUFBRTtnQkFDaEY7Z0JBQ0EsTUFBTUQ7WUFDVjtRQUNKO0lBQ0o7SUFDQSxPQUFPRyxjQUFjQyxLQUFLLEVBQUU7UUFDeEIsSUFBSSxPQUFPQSxVQUFVLFVBQVU7WUFDM0IsTUFBTSxJQUFJNUMsbUVBQWVBLENBQUM7UUFDOUI7UUFDQSwwQ0FBMEM7UUFDMUMsT0FBTzRDLE1BQ0ZoQyxJQUFJLEdBQ0ppQyxPQUFPLENBQUMsWUFBWSxJQUFJLDBDQUEwQztTQUNsRUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxlQUFlO0lBQ3RDO0FBQ0oiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXJ0aW5zdGFyb3N0YS9EZXZlbG9wbWVudC92aWJlcy9kaXZ5eS9wYWNrYWdlcy9jb3JlL2Rpc3QvdmFsaWRhdGlvbi9JbnB1dFZhbGlkYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IsIENvbmZpZ3VyYXRpb25FcnJvciB9IGZyb20gJy4uL2Vycm9ycy9EaXZ2eUVycm9ycy5qcyc7XG5leHBvcnQgY2xhc3MgSW5wdXRWYWxpZGF0b3Ige1xuICAgIHN0YXRpYyBUSUNLRVJfUEFUVEVSTiA9IC9eW0EtWjAtOS4tXXsxLDEwfSQvO1xuICAgIHN0YXRpYyBNSU5fWUVBUlMgPSAxO1xuICAgIHN0YXRpYyBNQVhfWUVBUlMgPSA1MDtcbiAgICBzdGF0aWMgTUlOX1JFUVVJUkVEX1JFVFVSTiA9IDAuMDAxOyAvLyAwLjElXG4gICAgc3RhdGljIE1BWF9SRVFVSVJFRF9SRVRVUk4gPSAxLjA7IC8vIDEwMCVcbiAgICBzdGF0aWMgVkFMSURfUFJPVklERVJTID0gWyd5YWhvbycsICdhdicsICdhdXRvJ107XG4gICAgc3RhdGljIHZhbGlkYXRlVGlja2VyKHRpY2tlcikge1xuICAgICAgICBpZiAoIXRpY2tlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignVGlja2VyIHN5bWJvbCBpcyByZXF1aXJlZCcsICd0aWNrZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRpY2tlciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1RpY2tlciBtdXN0IGJlIGEgc3RyaW5nJywgJ3RpY2tlcicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsZWFuVGlja2VyID0gdGlja2VyLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAoY2xlYW5UaWNrZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdUaWNrZXIgc3ltYm9sIGNhbm5vdCBiZSBlbXB0eScsICd0aWNrZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xlYW5UaWNrZXIubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1RpY2tlciBzeW1ib2wgdG9vIGxvbmcgKG1heCAxMCBjaGFyYWN0ZXJzKScsICd0aWNrZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuVElDS0VSX1BBVFRFUk4udGVzdChjbGVhblRpY2tlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0ludmFsaWQgdGlja2VyIGZvcm1hdC4gVXNlIG9ubHkgbGV0dGVycywgbnVtYmVycywgZG90cywgYW5kIGh5cGhlbnMnLCAndGlja2VyJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNvbW1vbiBpbnZhbGlkIHBhdHRlcm5zXG4gICAgICAgIGlmIChjbGVhblRpY2tlci5zdGFydHNXaXRoKCctJykgfHwgY2xlYW5UaWNrZXIuZW5kc1dpdGgoJy0nKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignVGlja2VyIGNhbm5vdCBzdGFydCBvciBlbmQgd2l0aCBoeXBoZW4nLCAndGlja2VyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsZWFuVGlja2VyLnN0YXJ0c1dpdGgoJy4nKSB8fCBjbGVhblRpY2tlci5lbmRzV2l0aCgnLicpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdUaWNrZXIgY2Fubm90IHN0YXJ0IG9yIGVuZCB3aXRoIGRvdCcsICd0aWNrZXInKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xlYW5UaWNrZXI7XG4gICAgfVxuICAgIHN0YXRpYyB2YWxpZGF0ZVllYXJzKHllYXJzKSB7XG4gICAgICAgIGxldCBudW1ZZWFycztcbiAgICAgICAgaWYgKHR5cGVvZiB5ZWFycyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIG51bVllYXJzID0gcGFyc2VJbnQoeWVhcnMsIDEwKTtcbiAgICAgICAgICAgIGlmIChpc05hTihudW1ZZWFycykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdZZWFycyBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyJywgJ3llYXJzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBudW1ZZWFycyA9IHllYXJzO1xuICAgICAgICB9XG4gICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihudW1ZZWFycykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1llYXJzIG11c3QgYmUgYSB3aG9sZSBudW1iZXInLCAneWVhcnMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVtWWVhcnMgPCB0aGlzLk1JTl9ZRUFSUykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgWWVhcnMgbXVzdCBiZSBhdCBsZWFzdCAke3RoaXMuTUlOX1lFQVJTfWAsICd5ZWFycycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChudW1ZZWFycyA+IHRoaXMuTUFYX1lFQVJTKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBZZWFycyBjYW5ub3QgZXhjZWVkICR7dGhpcy5NQVhfWUVBUlN9YCwgJ3llYXJzJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bVllYXJzO1xuICAgIH1cbiAgICBzdGF0aWMgdmFsaWRhdGVSZXF1aXJlZFJldHVybihyZXF1aXJlZFJldHVybikge1xuICAgICAgICBsZXQgbnVtUmV0dXJuO1xuICAgICAgICBpZiAodHlwZW9mIHJlcXVpcmVkUmV0dXJuID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbnVtUmV0dXJuID0gcGFyc2VGbG9hdChyZXF1aXJlZFJldHVybik7XG4gICAgICAgICAgICBpZiAoaXNOYU4obnVtUmV0dXJuKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1JlcXVpcmVkIHJldHVybiBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyJywgJ3JlcXVpcmVkUmV0dXJuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBudW1SZXR1cm4gPSByZXF1aXJlZFJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzRmluaXRlKG51bVJldHVybikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1JlcXVpcmVkIHJldHVybiBtdXN0IGJlIGEgZmluaXRlIG51bWJlcicsICdyZXF1aXJlZFJldHVybicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChudW1SZXR1cm4gPCB0aGlzLk1JTl9SRVFVSVJFRF9SRVRVUk4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYFJlcXVpcmVkIHJldHVybiB0b28gbG93IChtaW5pbXVtICR7KHRoaXMuTUlOX1JFUVVJUkVEX1JFVFVSTiAqIDEwMCkudG9GaXhlZCgxKX0lKWAsICdyZXF1aXJlZFJldHVybicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChudW1SZXR1cm4gPiB0aGlzLk1BWF9SRVFVSVJFRF9SRVRVUk4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYFJlcXVpcmVkIHJldHVybiB0b28gaGlnaCAobWF4aW11bSAkeyh0aGlzLk1BWF9SRVFVSVJFRF9SRVRVUk4gKiAxMDApfSUpYCwgJ3JlcXVpcmVkUmV0dXJuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bVJldHVybjtcbiAgICB9XG4gICAgc3RhdGljIHZhbGlkYXRlUHJvdmlkZXIocHJvdmlkZXIpIHtcbiAgICAgICAgaWYgKCFwcm92aWRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignUHJvdmlkZXIgaXMgcmVxdWlyZWQnLCAncHJvdmlkZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHByb3ZpZGVyICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignUHJvdmlkZXIgbXVzdCBiZSBhIHN0cmluZycsICdwcm92aWRlcicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsZWFuUHJvdmlkZXIgPSBwcm92aWRlci50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKCF0aGlzLlZBTElEX1BST1ZJREVSUy5pbmNsdWRlcyhjbGVhblByb3ZpZGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgSW52YWxpZCBwcm92aWRlciBcIiR7cHJvdmlkZXJ9XCIuIFZhbGlkIHByb3ZpZGVyczogJHt0aGlzLlZBTElEX1BST1ZJREVSUy5qb2luKCcsICcpfWAsICdwcm92aWRlcicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbGVhblByb3ZpZGVyO1xuICAgIH1cbiAgICBzdGF0aWMgdmFsaWRhdGVDb21tYW5kZXJPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8IHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IENvbmZpZ3VyYXRpb25FcnJvcignSW52YWxpZCBjb21tYW5kIG9wdGlvbnMnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSB5ZWFycyBpZiBwcm92aWRlZFxuICAgICAgICBpZiAob3B0aW9ucy55ZWFycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVZZWFycyhvcHRpb25zLnllYXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBJbnZhbGlkIC0teWVhcnMgcGFyYW1ldGVyOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ3llYXJzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIHJldHVybiBpZiBwcm92aWRlZFxuICAgICAgICBpZiAob3B0aW9ucy5yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVJlcXVpcmVkUmV0dXJuKG9wdGlvbnMucik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgSW52YWxpZCAtLXIgcGFyYW1ldGVyOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ3JlcXVpcmVkUmV0dXJuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFZhbGlkYXRlIHByb3ZpZGVyIGlmIHByb3ZpZGVkXG4gICAgICAgIGlmIChvcHRpb25zLnByb3ZpZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByb3ZpZGVyKG9wdGlvbnMucHJvdmlkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEludmFsaWQgLS1wcm92aWRlciBwYXJhbWV0ZXI6ICR7ZXJyb3IubWVzc2FnZX1gLCAncHJvdmlkZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNhbml0aXplSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0lucHV0IG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZW1vdmUgcG90ZW50aWFsbHkgZGFuZ2Vyb3VzIGNoYXJhY3RlcnNcbiAgICAgICAgcmV0dXJuIGlucHV0XG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgICAucmVwbGFjZSgvWzw+J1wiJl0vZywgJycpIC8vIFJlbW92ZSBIVE1ML3NjcmlwdCBpbmplY3Rpb24gY2hhcmFjdGVyc1xuICAgICAgICAgICAgLnNsaWNlKDAsIDUwKTsgLy8gTGltaXQgbGVuZ3RoXG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlZhbGlkYXRpb25FcnJvciIsIkNvbmZpZ3VyYXRpb25FcnJvciIsIklucHV0VmFsaWRhdG9yIiwiVElDS0VSX1BBVFRFUk4iLCJNSU5fWUVBUlMiLCJNQVhfWUVBUlMiLCJNSU5fUkVRVUlSRURfUkVUVVJOIiwiTUFYX1JFUVVJUkVEX1JFVFVSTiIsIlZBTElEX1BST1ZJREVSUyIsInZhbGlkYXRlVGlja2VyIiwidGlja2VyIiwiY2xlYW5UaWNrZXIiLCJ0cmltIiwidG9VcHBlckNhc2UiLCJsZW5ndGgiLCJ0ZXN0Iiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwidmFsaWRhdGVZZWFycyIsInllYXJzIiwibnVtWWVhcnMiLCJwYXJzZUludCIsImlzTmFOIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwidmFsaWRhdGVSZXF1aXJlZFJldHVybiIsInJlcXVpcmVkUmV0dXJuIiwibnVtUmV0dXJuIiwicGFyc2VGbG9hdCIsImlzRmluaXRlIiwidG9GaXhlZCIsInZhbGlkYXRlUHJvdmlkZXIiLCJwcm92aWRlciIsImNsZWFuUHJvdmlkZXIiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiam9pbiIsInZhbGlkYXRlQ29tbWFuZGVyT3B0aW9ucyIsIm9wdGlvbnMiLCJ1bmRlZmluZWQiLCJlcnJvciIsIm1lc3NhZ2UiLCJyIiwic2FuaXRpemVJbnB1dCIsImlucHV0IiwicmVwbGFjZSIsInNsaWNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/core/dist/validation/InputValidator.js\n");

/***/ }),

/***/ "(rsc)/./src/app/api/analyze/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/analyze/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _repo_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @repo/core */ \"(rsc)/../../packages/core/dist/lib.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/next/dist/api/server.js\");\n\n\nasync function GET(request) {\n    const { searchParams } = new URL(request.url);\n    const ticker = searchParams.get('ticker');\n    if (!ticker) {\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            error: 'Ticker symbol is required'\n        }, {\n            status: 400\n        });\n    }\n    try {\n        const analysisService = new _repo_core__WEBPACK_IMPORTED_MODULE_0__.DividendAnalysisService();\n        const analysis = await analysisService.analyze(ticker);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json(analysis);\n    } catch (error) {\n        console.error(error);\n        const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred';\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hbmFseXplL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRDtBQUNWO0FBRXBDLGVBQWVFLElBQUlDLE9BQWdCO0lBQ3hDLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUYsUUFBUUcsR0FBRztJQUM1QyxNQUFNQyxTQUFTSCxhQUFhSSxHQUFHLENBQUM7SUFFaEMsSUFBSSxDQUFDRCxRQUFRO1FBQ1gsT0FBT04scURBQVlBLENBQUNRLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQTRCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ2pGO0lBRUEsSUFBSTtRQUNGLE1BQU1DLGtCQUFrQixJQUFJWiwrREFBdUJBO1FBRW5ELE1BQU1hLFdBQVcsTUFBTUQsZ0JBQWdCRSxPQUFPLENBQUNQO1FBRS9DLE9BQU9OLHFEQUFZQSxDQUFDUSxJQUFJLENBQUNJO0lBQzNCLEVBQUUsT0FBT0gsT0FBTztRQUNkSyxRQUFRTCxLQUFLLENBQUNBO1FBQ2QsTUFBTU0sZUFBZU4saUJBQWlCTyxRQUFRUCxNQUFNUSxPQUFPLEdBQUc7UUFDOUQsT0FBT2pCLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7WUFBRUMsT0FBT007UUFBYSxHQUFHO1lBQUVMLFFBQVE7UUFBSTtJQUNsRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbWFydGluc3Rhcm9zdGEvRGV2ZWxvcG1lbnQvdmliZXMvZGl2eXkvYXBwcy93ZWIvc3JjL2FwcC9hcGkvYW5hbHl6ZS9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXZpZGVuZEFuYWx5c2lzU2VydmljZSB9IGZyb20gJ0ByZXBvL2NvcmUnO1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICBjb25zdCB0aWNrZXIgPSBzZWFyY2hQYXJhbXMuZ2V0KCd0aWNrZXInKTtcblxuICBpZiAoIXRpY2tlcikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVGlja2VyIHN5bWJvbCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgYW5hbHlzaXNTZXJ2aWNlID0gbmV3IERpdmlkZW5kQW5hbHlzaXNTZXJ2aWNlKCk7XG5cbiAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IGFuYWx5c2lzU2VydmljZS5hbmFseXplKHRpY2tlcik7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oYW5hbHlzaXMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvck1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkRpdmlkZW5kQW5hbHlzaXNTZXJ2aWNlIiwiTmV4dFJlc3BvbnNlIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInRpY2tlciIsImdldCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImFuYWx5c2lzU2VydmljZSIsImFuYWx5c2lzIiwiYW5hbHl6ZSIsImNvbnNvbGUiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsIm1lc3NhZ2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analyze/route.ts\n");

/***/ }),

/***/ "(ssr)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:child_process":
/*!*************************************!*\
  !*** external "node:child_process" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:child_process");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:events");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@sinclair","vendor-chunks/@supabase","vendor-chunks/yahoo-finance2","vendor-chunks/tough-cookie","vendor-chunks/commander","vendor-chunks/whatwg-url","vendor-chunks/tr46","vendor-chunks/dotenv","vendor-chunks/psl","vendor-chunks/webidl-conversions","vendor-chunks/url-parse","vendor-chunks/universalify","vendor-chunks/requires-port","vendor-chunks/querystringify","vendor-chunks/punycode"], () => (__webpack_exec__("(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fmartinstarosta%2FDevelopment%2Fvibes%2Fdivyy%2Fapps%2Fweb%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmartinstarosta%2FDevelopment%2Fvibes%2Fdivyy%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();